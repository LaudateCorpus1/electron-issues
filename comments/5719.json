[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/221949545",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-221949545",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 221949545,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-05-26T18:09:12Z",
    "updated_at": "2016-05-26T18:09:12Z",
    "body": "@romaincointepas can you share the options you are passing to the `BrowserWindow` constructor for the window containing the webview?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/221950897",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-221950897",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 221950897,
    "user": {
      "login": "romaincointepas",
      "id": 797899,
      "avatar_url": "https://avatars1.githubusercontent.com/u/797899?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/romaincointepas",
      "html_url": "https://github.com/romaincointepas",
      "followers_url": "https://api.github.com/users/romaincointepas/followers",
      "following_url": "https://api.github.com/users/romaincointepas/following{/other_user}",
      "gists_url": "https://api.github.com/users/romaincointepas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/romaincointepas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/romaincointepas/subscriptions",
      "organizations_url": "https://api.github.com/users/romaincointepas/orgs",
      "repos_url": "https://api.github.com/users/romaincointepas/repos",
      "events_url": "https://api.github.com/users/romaincointepas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/romaincointepas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-26T18:14:07Z",
    "updated_at": "2016-05-26T18:14:07Z",
    "body": "Sure, here it is:\n\n```\nwin = new BrowserWindow(\n    x: winState.x\n    y: winState.y\n    width: winState.width\n    height: winState.height\n    show: false\n    backgroundColor: '#101010'\n    titleBarStyle: 'hidden'\n    webPreferences:\n      plugins: true\n      allowDisplayingInsecureContent: true\n  )\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/221952079",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-221952079",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 221952079,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-05-26T18:18:40Z",
    "updated_at": "2016-05-26T18:18:40Z",
    "body": "Hmm, having trouble reproducing this with the following app:\n\n### main.js\n\n``` js\nconst {app, BrowserWindow} = require('electron')\nlet window\napp.on('ready', function () {\n  window = new BrowserWindow({\n    width: 200,\n    height: 200,\n    show: true\n  })\n  window.loadURL('file://' + __dirname + '/page.html')\n})\n```\n\n### page.html\n\n``` html\n<body>\n  <webview preload=\"preload.js\" src=\"wv.html\" style=\"display:inline-flex; width:640px; height:480px\"></webview>\n</body>\n```\n\n### wv.html\n\n``` html\n<body>\n  <script>document.write('preload time? ' + window.preloaded)</script>\n</body>\n```\n\n### preload.js\n\n``` js\nwindow.preloaded = Date.now()\n```\n\nIt currently shows the value at launch, any differences in your app that you can think of that might help me reproduce this?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/221953135",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-221953135",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 221953135,
    "user": {
      "login": "romaincointepas",
      "id": 797899,
      "avatar_url": "https://avatars1.githubusercontent.com/u/797899?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/romaincointepas",
      "html_url": "https://github.com/romaincointepas",
      "followers_url": "https://api.github.com/users/romaincointepas/followers",
      "following_url": "https://api.github.com/users/romaincointepas/following{/other_user}",
      "gists_url": "https://api.github.com/users/romaincointepas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/romaincointepas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/romaincointepas/subscriptions",
      "organizations_url": "https://api.github.com/users/romaincointepas/orgs",
      "repos_url": "https://api.github.com/users/romaincointepas/repos",
      "events_url": "https://api.github.com/users/romaincointepas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/romaincointepas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-26T18:22:33Z",
    "updated_at": "2016-05-26T18:22:33Z",
    "body": "How do you not get the error `Only \"file:\" protocol is supported in \"preload\" attribute.` in the Console when not using `file:` in the `preload` attribute?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/221953657",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-221953657",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 221953657,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-05-26T18:24:27Z",
    "updated_at": "2016-05-26T18:24:27Z",
    "body": "> How do you not get the error Only \"file:\" protocol is supported in \"preload\" attribute. in the Console when not using file: in the preload attribute?\n\nNot sure, do you have any other attributes set on your `<webview>` tag?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/221954416",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-221954416",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 221954416,
    "user": {
      "login": "romaincointepas",
      "id": 797899,
      "avatar_url": "https://avatars1.githubusercontent.com/u/797899?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/romaincointepas",
      "html_url": "https://github.com/romaincointepas",
      "followers_url": "https://api.github.com/users/romaincointepas/followers",
      "following_url": "https://api.github.com/users/romaincointepas/following{/other_user}",
      "gists_url": "https://api.github.com/users/romaincointepas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/romaincointepas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/romaincointepas/subscriptions",
      "organizations_url": "https://api.github.com/users/romaincointepas/orgs",
      "repos_url": "https://api.github.com/users/romaincointepas/repos",
      "events_url": "https://api.github.com/users/romaincointepas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/romaincointepas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-26T18:27:21Z",
    "updated_at": "2016-05-26T18:47:51Z",
    "body": "``` html\n<webview id=\"player-webview\" src=\"data:text/plain,_\" preload=\"preload.js\" disablewebsecurity plugins></webview>\n```\n\n`src=\"data:text/plain,_\"` seems to be the problem, weird. When I remove it, no error in the console.\n\nAlso definitely worth noting, the `BrowserWindow` is loading a remote html page that has the webview tag (that's why I use `app.getAppPath()`, as the preload script is local).\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/222146970",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-222146970",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 222146970,
    "user": {
      "login": "kjlaw89",
      "id": 4183007,
      "avatar_url": "https://avatars3.githubusercontent.com/u/4183007?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kjlaw89",
      "html_url": "https://github.com/kjlaw89",
      "followers_url": "https://api.github.com/users/kjlaw89/followers",
      "following_url": "https://api.github.com/users/kjlaw89/following{/other_user}",
      "gists_url": "https://api.github.com/users/kjlaw89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kjlaw89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kjlaw89/subscriptions",
      "organizations_url": "https://api.github.com/users/kjlaw89/orgs",
      "repos_url": "https://api.github.com/users/kjlaw89/repos",
      "events_url": "https://api.github.com/users/kjlaw89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kjlaw89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-27T13:32:00Z",
    "updated_at": "2016-05-27T13:32:00Z",
    "body": "I'm running into this same issue. I ran a few tests and determined a few things:\n1. It appears setting \"disablewebsecurity\" kills the preload scripts. In my case I have to set this flag if I want to be able to load PDFs in my application (though I'm working on a more native way to do this but haven't figured one out yet)\n2. When I get rid of disablewebsecurity the preload script starts working again, but some web requests fail to go through. i.e., clicking a link on a website does nothing. When disablewebsecurity is active, the preload scripts don't load but I can navigate around just fine.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/222150360",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-222150360",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 222150360,
    "user": {
      "login": "kjlaw89",
      "id": 4183007,
      "avatar_url": "https://avatars3.githubusercontent.com/u/4183007?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kjlaw89",
      "html_url": "https://github.com/kjlaw89",
      "followers_url": "https://api.github.com/users/kjlaw89/followers",
      "following_url": "https://api.github.com/users/kjlaw89/following{/other_user}",
      "gists_url": "https://api.github.com/users/kjlaw89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kjlaw89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kjlaw89/subscriptions",
      "organizations_url": "https://api.github.com/users/kjlaw89/orgs",
      "repos_url": "https://api.github.com/users/kjlaw89/repos",
      "events_url": "https://api.github.com/users/kjlaw89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kjlaw89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-27T13:46:10Z",
    "updated_at": "2016-05-27T13:46:10Z",
    "body": "Okay, I did a little extra research and can elaborate more on #2. When _disablewebsecurity_ is removed, the preload script will load and execute just fine. It appears that using **remote.getGlobal** at any point (and apparently just a normal **alert()**) will keep the page from following any links. You don't even need to do anything with the global variable you got, you just need to pull one in for page navigation to break. \n\nI verified that the browser does still recognize the attempt to navigate as I'm watching session.webRequest.onBeforeSendHeaders and it does show the URL/Headers of the link I clicked, but it never navigates or loads any of the resources.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/222230323",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-222230323",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 222230323,
    "user": {
      "login": "marbemac",
      "id": 847542,
      "avatar_url": "https://avatars0.githubusercontent.com/u/847542?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/marbemac",
      "html_url": "https://github.com/marbemac",
      "followers_url": "https://api.github.com/users/marbemac/followers",
      "following_url": "https://api.github.com/users/marbemac/following{/other_user}",
      "gists_url": "https://api.github.com/users/marbemac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/marbemac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/marbemac/subscriptions",
      "organizations_url": "https://api.github.com/users/marbemac/orgs",
      "repos_url": "https://api.github.com/users/marbemac/repos",
      "events_url": "https://api.github.com/users/marbemac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/marbemac/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-27T19:12:09Z",
    "updated_at": "2016-05-27T19:12:09Z",
    "body": "We can confirm the same behavior @kjlaw89 is describing. Preload script breaks/doesn't load in 1.2 when webSecurity is set to false.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/222231526",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-222231526",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 222231526,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-05-27T19:17:46Z",
    "updated_at": "2016-05-27T19:17:46Z",
    "body": "This looks similar to #5712 where `webSecurity` affects script loading\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/222416877",
    "html_url": "https://github.com/electron/electron/issues/5719#issuecomment-222416877",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5719",
    "id": 222416877,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-05-30T05:57:32Z",
    "updated_at": "2016-05-30T05:57:32Z",
    "body": "I'm merging this to #5712 since they are essentially the same bug.\n"
  }
]