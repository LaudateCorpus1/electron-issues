[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/229477300",
    "html_url": "https://github.com/electron/electron/issues/6277#issuecomment-229477300",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6277",
    "id": 229477300,
    "user": {
      "login": "hawkins",
      "id": 9123458,
      "avatar_url": "https://avatars3.githubusercontent.com/u/9123458?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hawkins",
      "html_url": "https://github.com/hawkins",
      "followers_url": "https://api.github.com/users/hawkins/followers",
      "following_url": "https://api.github.com/users/hawkins/following{/other_user}",
      "gists_url": "https://api.github.com/users/hawkins/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hawkins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hawkins/subscriptions",
      "organizations_url": "https://api.github.com/users/hawkins/orgs",
      "repos_url": "https://api.github.com/users/hawkins/repos",
      "events_url": "https://api.github.com/users/hawkins/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hawkins/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-29T20:25:36Z",
    "updated_at": "2016-06-29T20:43:50Z",
    "body": "While not nearly as convenient as I had originally hoped, I've come up with a workaround for the time being.\n\nUsing [BrowserWindow's show and hide events](https://github.com/electron/electron/blob/master/docs/api/browser-window.md#event-show), I was able to listen for these events and manually adjust the `visible` property for both items.\n\nMenu definition: \n\n```\nvar contextMenu = Menu.buildFromTemplate([\n    {\n        label: 'Show Window',\n        visible: false, // Hidden at startup\n        click: function () {\n            mainWindow.show()\n        }\n    },\n    {\n        label: 'Hide Window',\n        visible: true, // Visible at startup\n        click: function () {\n            mainWindow.hide()\n        }\n    }\n]);\n\n\n// And later in the same function that created this menu...\n// Allow mainWindow events to change menu item visibility\nmainWindow.on('show', function () {\n    contextMenu.items[0].visible = false;\n    contextMenu.items[1].visible = true;\n});\nmainWindow.on('hide', function () {\n    contextMenu.items[0].visible = true;\n    contextMenu.items[1].visible = false;\n});\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/229920870",
    "html_url": "https://github.com/electron/electron/issues/6277#issuecomment-229920870",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6277",
    "id": 229920870,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-07-01T11:08:29Z",
    "updated_at": "2016-07-01T11:08:29Z",
    "body": "Listening to the show/hide events is the best solution for now. A more general solution is tracked at #528.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/286580177",
    "html_url": "https://github.com/electron/electron/issues/6277#issuecomment-286580177",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6277",
    "id": 286580177,
    "user": {
      "login": "amig",
      "id": 203434,
      "avatar_url": "https://avatars3.githubusercontent.com/u/203434?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amig",
      "html_url": "https://github.com/amig",
      "followers_url": "https://api.github.com/users/amig/followers",
      "following_url": "https://api.github.com/users/amig/following{/other_user}",
      "gists_url": "https://api.github.com/users/amig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amig/subscriptions",
      "organizations_url": "https://api.github.com/users/amig/orgs",
      "repos_url": "https://api.github.com/users/amig/repos",
      "events_url": "https://api.github.com/users/amig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-14T22:23:31Z",
    "updated_at": "2017-03-14T22:23:31Z",
    "body": "When implementing the above on the tray menu, the only way this worked for me is by re-setting the menu via the `tray.setContextMenu(contextMenu);` i.e.,\r\n\r\n```\r\nmainWindow.on('show', function () {\r\n    contextMenu.items[0].visible = false;\r\n    contextMenu.items[1].visible = true;\r\n    tray.setContextMenu(contextMenu);\r\n});\r\nmainWindow.on('hide', function () {\r\n    contextMenu.items[0].visible = true;\r\n    contextMenu.items[1].visible = false;\r\n    tray.setContextMenu(contextMenu);\r\n});\r\n```"
  }
]