[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/272844250",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-272844250",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 272844250,
    "user": {
      "login": "LoganDark",
      "id": 4723091,
      "avatar_url": "https://avatars2.githubusercontent.com/u/4723091?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LoganDark",
      "html_url": "https://github.com/LoganDark",
      "followers_url": "https://api.github.com/users/LoganDark/followers",
      "following_url": "https://api.github.com/users/LoganDark/following{/other_user}",
      "gists_url": "https://api.github.com/users/LoganDark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LoganDark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LoganDark/subscriptions",
      "organizations_url": "https://api.github.com/users/LoganDark/orgs",
      "repos_url": "https://api.github.com/users/LoganDark/repos",
      "events_url": "https://api.github.com/users/LoganDark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LoganDark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-16T11:57:37Z",
    "updated_at": "2017-01-16T11:57:37Z",
    "body": "Isn't that what `localStorage` is for?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/272868488",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-272868488",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 272868488,
    "user": {
      "login": "clusterberries",
      "id": 9727404,
      "avatar_url": "https://avatars0.githubusercontent.com/u/9727404?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clusterberries",
      "html_url": "https://github.com/clusterberries",
      "followers_url": "https://api.github.com/users/clusterberries/followers",
      "following_url": "https://api.github.com/users/clusterberries/following{/other_user}",
      "gists_url": "https://api.github.com/users/clusterberries/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clusterberries/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clusterberries/subscriptions",
      "organizations_url": "https://api.github.com/users/clusterberries/orgs",
      "repos_url": "https://api.github.com/users/clusterberries/repos",
      "events_url": "https://api.github.com/users/clusterberries/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clusterberries/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-16T13:59:46Z",
    "updated_at": "2017-01-16T13:59:46Z",
    "body": "@LoganDark could you please explain for what purpose localStorage should be used in this case?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/272880456",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-272880456",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 272880456,
    "user": {
      "login": "LoganDark",
      "id": 4723091,
      "avatar_url": "https://avatars2.githubusercontent.com/u/4723091?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LoganDark",
      "html_url": "https://github.com/LoganDark",
      "followers_url": "https://api.github.com/users/LoganDark/followers",
      "following_url": "https://api.github.com/users/LoganDark/following{/other_user}",
      "gists_url": "https://api.github.com/users/LoganDark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LoganDark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LoganDark/subscriptions",
      "organizations_url": "https://api.github.com/users/LoganDark/orgs",
      "repos_url": "https://api.github.com/users/LoganDark/repos",
      "events_url": "https://api.github.com/users/LoganDark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LoganDark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-16T14:43:47Z",
    "updated_at": "2017-01-16T14:44:10Z",
    "body": "Persistent data storage.\r\n\r\nFor example storing cookies in localStorage and loading them back when restarted."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/272882974",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-272882974",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 272882974,
    "user": {
      "login": "clusterberries",
      "id": 9727404,
      "avatar_url": "https://avatars0.githubusercontent.com/u/9727404?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/clusterberries",
      "html_url": "https://github.com/clusterberries",
      "followers_url": "https://api.github.com/users/clusterberries/followers",
      "following_url": "https://api.github.com/users/clusterberries/following{/other_user}",
      "gists_url": "https://api.github.com/users/clusterberries/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/clusterberries/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/clusterberries/subscriptions",
      "organizations_url": "https://api.github.com/users/clusterberries/orgs",
      "repos_url": "https://api.github.com/users/clusterberries/repos",
      "events_url": "https://api.github.com/users/clusterberries/events{/privacy}",
      "received_events_url": "https://api.github.com/users/clusterberries/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-16T14:54:12Z",
    "updated_at": "2017-01-16T14:54:12Z",
    "body": "Yes, I use it as data storage. But I'm talking about session, cookies are used in this case."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/273352642",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-273352642",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 273352642,
    "user": {
      "login": "TimNZ",
      "id": 1051701,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1051701?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimNZ",
      "html_url": "https://github.com/TimNZ",
      "followers_url": "https://api.github.com/users/TimNZ/followers",
      "following_url": "https://api.github.com/users/TimNZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimNZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimNZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimNZ/subscriptions",
      "organizations_url": "https://api.github.com/users/TimNZ/orgs",
      "repos_url": "https://api.github.com/users/TimNZ/repos",
      "events_url": "https://api.github.com/users/TimNZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimNZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-18T01:11:41Z",
    "updated_at": "2017-01-18T01:13:11Z",
    "body": "@clusterberries is referring to my comment on testing on BrowserWindow or webview session persistence when an Electron app is closed seconds after a change to session data.\r\n\r\nBasically there's a small window of a few seconds when changes to cookies (perhaps other things) are not persisted and are lost if the app is closed in the meantime.\r\n\r\nI haven't tested this for a while so can't confirm it still happens"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/273409283",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-273409283",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 273409283,
    "user": {
      "login": "ButzYung",
      "id": 3256084,
      "avatar_url": "https://avatars1.githubusercontent.com/u/3256084?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ButzYung",
      "html_url": "https://github.com/ButzYung",
      "followers_url": "https://api.github.com/users/ButzYung/followers",
      "following_url": "https://api.github.com/users/ButzYung/following{/other_user}",
      "gists_url": "https://api.github.com/users/ButzYung/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ButzYung/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ButzYung/subscriptions",
      "organizations_url": "https://api.github.com/users/ButzYung/orgs",
      "repos_url": "https://api.github.com/users/ButzYung/repos",
      "events_url": "https://api.github.com/users/ButzYung/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ButzYung/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-18T08:06:11Z",
    "updated_at": "2017-01-18T08:06:11Z",
    "body": "I am affected by the same problem. I wonder if there can be a workaround for now, like saving the current session of cookies to localStorage or file before the app closes, and then restore it on app restart."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/273411908",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-273411908",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 273411908,
    "user": {
      "login": "TimNZ",
      "id": 1051701,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1051701?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimNZ",
      "html_url": "https://github.com/TimNZ",
      "followers_url": "https://api.github.com/users/TimNZ/followers",
      "following_url": "https://api.github.com/users/TimNZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimNZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimNZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimNZ/subscriptions",
      "organizations_url": "https://api.github.com/users/TimNZ/orgs",
      "repos_url": "https://api.github.com/users/TimNZ/repos",
      "events_url": "https://api.github.com/users/TimNZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimNZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-18T08:21:35Z",
    "updated_at": "2017-01-18T08:21:35Z",
    "body": "I think the easiest thing to do in short term is try to introduce a delay before quitting the app.\r\nYou can hide any windows first, delay, then quit.\r\n\r\nUsers won't care."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/273534009",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-273534009",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 273534009,
    "user": {
      "login": "LoganDark",
      "id": 4723091,
      "avatar_url": "https://avatars2.githubusercontent.com/u/4723091?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LoganDark",
      "html_url": "https://github.com/LoganDark",
      "followers_url": "https://api.github.com/users/LoganDark/followers",
      "following_url": "https://api.github.com/users/LoganDark/following{/other_user}",
      "gists_url": "https://api.github.com/users/LoganDark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LoganDark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LoganDark/subscriptions",
      "organizations_url": "https://api.github.com/users/LoganDark/orgs",
      "repos_url": "https://api.github.com/users/LoganDark/repos",
      "events_url": "https://api.github.com/users/LoganDark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LoganDark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-18T16:58:42Z",
    "updated_at": "2017-01-18T16:58:42Z",
    "body": "@ButzYung That was my idea at first, but nobody seemed to understand. "
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/273699958",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-273699958",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 273699958,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-19T07:21:58Z",
    "updated_at": "2017-01-19T07:21:58Z",
    "body": "@clusterberries can you provide a minimal example to reproduce the issue ? Also @TimNZ if you are still facing the webview issue can you open a new issue with a reproducible example ? Thanks!\r\n\r\nHave you tried the `session.flushStorageData` api ?\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/294088649",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-294088649",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 294088649,
    "user": {
      "login": "juturu",
      "id": 11049886,
      "avatar_url": "https://avatars1.githubusercontent.com/u/11049886?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/juturu",
      "html_url": "https://github.com/juturu",
      "followers_url": "https://api.github.com/users/juturu/followers",
      "following_url": "https://api.github.com/users/juturu/following{/other_user}",
      "gists_url": "https://api.github.com/users/juturu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/juturu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juturu/subscriptions",
      "organizations_url": "https://api.github.com/users/juturu/orgs",
      "repos_url": "https://api.github.com/users/juturu/repos",
      "events_url": "https://api.github.com/users/juturu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/juturu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T04:39:28Z",
    "updated_at": "2017-04-14T04:43:59Z",
    "body": "I'm noticing this issue with electron 1.6.2. I tried `session.flushStorageData` without any luck. \r\n\r\nLooking into chromium issues, found [this](https://bugs.chromium.org/p/chromium/issues/detail?id=496564&can=1&q=component%3AInternals%3ENetwork%3ECookies%20&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified&start=100). Delaying the restart by 30s resolved the issue for me. Should this limitation be removed from electron or make `flushStorageData` update sqlite db? @kevinsawicki @deepak1556 \r\n\r\nAlso, this is happening only on windows platform for me. Mac seems fine. \r\n\r\nRegarding minimal example to repro, with a simple test app i'm not noticing this issue. Which is weird (given chromium's implementation). But, with the app we are building this is very consistently hitting."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/294092242",
    "html_url": "https://github.com/electron/electron/issues/8416#issuecomment-294092242",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8416",
    "id": 294092242,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-14T05:20:02Z",
    "updated_at": "2017-04-14T06:36:42Z",
    "body": "Thanks @juturu for confirming!\r\n\r\n> Should this limitation be removed from electron or make flushStorageData update sqlite db? \r\n\r\nChanging the commit interval in general will cause some perf regressions. Currently `session.flushStorageData` only flushes localstorage data to disk. We need to implement flushing cookie store with it. This can be achieved by calling [net::CookieStore::FlushStore](https://cs.chromium.org/chromium/src/net/cookies/cookie_store.h?q=flushsto&l=208) api."
  }
]