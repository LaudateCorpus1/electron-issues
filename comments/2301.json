[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/123736541",
    "html_url": "https://github.com/electron/electron/issues/2301#issuecomment-123736541",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/2301",
    "id": 123736541,
    "user": {
      "login": "etiktin",
      "id": 4381579,
      "avatar_url": "https://avatars1.githubusercontent.com/u/4381579?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/etiktin",
      "html_url": "https://github.com/etiktin",
      "followers_url": "https://api.github.com/users/etiktin/followers",
      "following_url": "https://api.github.com/users/etiktin/following{/other_user}",
      "gists_url": "https://api.github.com/users/etiktin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/etiktin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/etiktin/subscriptions",
      "organizations_url": "https://api.github.com/users/etiktin/orgs",
      "repos_url": "https://api.github.com/users/etiktin/repos",
      "events_url": "https://api.github.com/users/etiktin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/etiktin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-22T14:13:50Z",
    "updated_at": "2015-07-22T14:13:50Z",
    "body": "Never mind. I figured it out.\n\nFor future reference, here's an example:\n\n``` javascript\nwindow.onbeforeunload = function(e) {\n    var remote = require('remote');\n    var dialog = remote.require('dialog');\n    var choice = dialog.showMessageBox(\n            remote.getCurrentWindow(),\n            {\n                type: 'question',\n                buttons: ['Yes', 'No'],\n                title: 'Confirm',\n                message: 'Are you sure you want to quit?'\n            });\n\n    return choice === 0;\n};\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/266981503",
    "html_url": "https://github.com/electron/electron/issues/2301#issuecomment-266981503",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/2301",
    "id": 266981503,
    "user": {
      "login": "shneorasa",
      "id": 23152725,
      "avatar_url": "https://avatars0.githubusercontent.com/u/23152725?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shneorasa",
      "html_url": "https://github.com/shneorasa",
      "followers_url": "https://api.github.com/users/shneorasa/followers",
      "following_url": "https://api.github.com/users/shneorasa/following{/other_user}",
      "gists_url": "https://api.github.com/users/shneorasa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shneorasa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shneorasa/subscriptions",
      "organizations_url": "https://api.github.com/users/shneorasa/orgs",
      "repos_url": "https://api.github.com/users/shneorasa/repos",
      "events_url": "https://api.github.com/users/shneorasa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shneorasa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-14T09:09:40Z",
    "updated_at": "2016-12-14T09:10:08Z",
    "body": "hi(:\r\nthe solution stated above doesn't work for me.\r\nbecause it still take the \"onbeforeunload\" of the browser...\r\nany idea?  "
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/308384017",
    "html_url": "https://github.com/electron/electron/issues/2301#issuecomment-308384017",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/2301",
    "id": 308384017,
    "user": {
      "login": "Abbondanzo",
      "id": 10366495,
      "avatar_url": "https://avatars1.githubusercontent.com/u/10366495?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Abbondanzo",
      "html_url": "https://github.com/Abbondanzo",
      "followers_url": "https://api.github.com/users/Abbondanzo/followers",
      "following_url": "https://api.github.com/users/Abbondanzo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Abbondanzo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Abbondanzo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Abbondanzo/subscriptions",
      "organizations_url": "https://api.github.com/users/Abbondanzo/orgs",
      "repos_url": "https://api.github.com/users/Abbondanzo/repos",
      "events_url": "https://api.github.com/users/Abbondanzo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Abbondanzo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-14T09:57:10Z",
    "updated_at": "2017-06-14T09:58:19Z",
    "body": "@shneorasa I know it's been a few months since you asked (and you've probably found a solution by now), but for those looking for a solution in the future, here's a better way in handling this issue as opposed to using ```window.onbeforeload```.\r\n\r\nThe ```beforeunload``` event getting overwritten can potentially mess up future dialogs, breaking your app. Instead, you can store a simple boolean inside your app like I have done:\r\n```javascript\r\n// Inside main/index.js\r\nimport { app, BrowserWindow, dialog } from 'electron'\r\napp.showExitPrompt = true\r\n```\r\nWith that, you can interrupt the ```close``` event of your ```BrowserWindow``` as follows:\r\n```javascript\r\n// Inside main/index.js, where BrowserWindow is initialized\r\nmainWindow.on('close', (e) => {\r\n    if (app.showExitPrompt) {\r\n        e.preventDefault() // Prevents the window from closing \r\n        dialog.showMessageBox({\r\n            type: 'question',\r\n            buttons: ['Yes', 'No'],\r\n            title: 'Confirm',\r\n            message: 'Unsaved data will be lost. Are you sure you want to quit?'\r\n        }, function (response) {\r\n            if (response === 0) { // Runs the following if 'Yes' is clicked\r\n                app.showExitPrompt = false\r\n                mainWindow.close()\r\n            }\r\n        })\r\n    }\r\n})\r\n```\r\nI have implemented this solution into an Electron app using Vue.js, and showing/hiding the dialog is as simple as importing ```app```:\r\n```javascript\r\nconst { app } = require('electron').remote\r\n```\r\nand overwriting the stored boolean value:\r\n```javascript\r\napp.showExitPrompt = true\r\n```"
  }
]