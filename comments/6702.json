[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/237151154",
    "html_url": "https://github.com/electron/electron/issues/6702#issuecomment-237151154",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6702",
    "id": 237151154,
    "user": {
      "login": "MarshallOfSound",
      "id": 6634592,
      "avatar_url": "https://avatars0.githubusercontent.com/u/6634592?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarshallOfSound",
      "html_url": "https://github.com/MarshallOfSound",
      "followers_url": "https://api.github.com/users/MarshallOfSound/followers",
      "following_url": "https://api.github.com/users/MarshallOfSound/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarshallOfSound/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarshallOfSound/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarshallOfSound/subscriptions",
      "organizations_url": "https://api.github.com/users/MarshallOfSound/orgs",
      "repos_url": "https://api.github.com/users/MarshallOfSound/repos",
      "events_url": "https://api.github.com/users/MarshallOfSound/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarshallOfSound/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-03T06:11:29Z",
    "updated_at": "2016-08-03T06:11:29Z",
    "body": "You should really ask these question on the Discussion forum or in Slack.\n\nBut have some untested code ðŸ˜† The TLDR is use IPC\n\n``` js\n// app.js\nimport { ipcMain } from 'electron';\n\nlet canQuit = false;\nipcMain.on('test-over', () => {\n  canQuit = true;\n});\n\nmainWindow.on('close', (event) => {\n  if (!canQuit) event.preventDefault();\n});\n\n// index.html\n// When the test is over\nimport { ipcRenderer } from 'electron';\nipcRenderer.send('test-over');\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/237151345",
    "html_url": "https://github.com/electron/electron/issues/6702#issuecomment-237151345",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6702",
    "id": 237151345,
    "user": {
      "login": "MarshallOfSound",
      "id": 6634592,
      "avatar_url": "https://avatars0.githubusercontent.com/u/6634592?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarshallOfSound",
      "html_url": "https://github.com/MarshallOfSound",
      "followers_url": "https://api.github.com/users/MarshallOfSound/followers",
      "following_url": "https://api.github.com/users/MarshallOfSound/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarshallOfSound/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarshallOfSound/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarshallOfSound/subscriptions",
      "organizations_url": "https://api.github.com/users/MarshallOfSound/orgs",
      "repos_url": "https://api.github.com/users/MarshallOfSound/repos",
      "events_url": "https://api.github.com/users/MarshallOfSound/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarshallOfSound/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-03T06:12:49Z",
    "updated_at": "2016-08-03T06:12:49Z",
    "body": "Oops, missed the bit about `app.on 'will-quit', (event) -> event.preventDefault()` not working.\n\nCan you provide a minimal app that reproduces the issue?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/247936831",
    "html_url": "https://github.com/electron/electron/issues/6702#issuecomment-247936831",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6702",
    "id": 247936831,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-09-19T08:31:01Z",
    "updated_at": "2016-09-19T08:31:01Z",
    "body": "Closing until more information is provided.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/298570937",
    "html_url": "https://github.com/electron/electron/issues/6702#issuecomment-298570937",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6702",
    "id": 298570937,
    "user": {
      "login": "DarrenCook",
      "id": 880436,
      "avatar_url": "https://avatars1.githubusercontent.com/u/880436?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DarrenCook",
      "html_url": "https://github.com/DarrenCook",
      "followers_url": "https://api.github.com/users/DarrenCook/followers",
      "following_url": "https://api.github.com/users/DarrenCook/following{/other_user}",
      "gists_url": "https://api.github.com/users/DarrenCook/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DarrenCook/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DarrenCook/subscriptions",
      "organizations_url": "https://api.github.com/users/DarrenCook/orgs",
      "repos_url": "https://api.github.com/users/DarrenCook/repos",
      "events_url": "https://api.github.com/users/DarrenCook/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DarrenCook/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T09:15:26Z",
    "updated_at": "2017-05-02T09:15:50Z",
    "body": "I have the same issue, so can provide a little more information. I have added this handler:\r\n\r\n```\r\napp.on('before-quit', (ev)=>{\r\n   const hasUnsavedChanges = true; //Get from somewhere\r\n   if(hasUnsavedChanges){\r\n     //I actually show a dialog asking if they should quit\r\n     ev.preventDefault();\r\n     }\r\n  });\r\n```\r\n\r\nIf I use File|Quit menu option this works fine. But if I press Alt-F4 what happens is:\r\n\r\n* The dialog still pops up, and I press cancel\r\n* The main window has disappeared\r\n* The app is still running.\r\n\r\nI.e. Alt-F4 must be closing the main window process, and not paying attention to the before-quit event.\r\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/298580349",
    "html_url": "https://github.com/electron/electron/issues/6702#issuecomment-298580349",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6702",
    "id": 298580349,
    "user": {
      "login": "DarrenCook",
      "id": 880436,
      "avatar_url": "https://avatars1.githubusercontent.com/u/880436?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DarrenCook",
      "html_url": "https://github.com/DarrenCook",
      "followers_url": "https://api.github.com/users/DarrenCook/followers",
      "following_url": "https://api.github.com/users/DarrenCook/following{/other_user}",
      "gists_url": "https://api.github.com/users/DarrenCook/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DarrenCook/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DarrenCook/subscriptions",
      "organizations_url": "https://api.github.com/users/DarrenCook/orgs",
      "repos_url": "https://api.github.com/users/DarrenCook/repos",
      "events_url": "https://api.github.com/users/DarrenCook/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DarrenCook/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-02T09:42:13Z",
    "updated_at": "2017-05-02T09:42:13Z",
    "body": "In the browser window js, I tried this:\r\n\r\n```\r\nwindow.onbeforeunload = function(){\r\nreturn false;\r\n};\r\n```\r\n\r\nThis stops alt-f4 working completely (i.e. the app never shuts, I don't get the \"ok to close?\" dialog any more). If I use File|Quit I get the dialog, but saying I want to quit gets ignored."
  }
]