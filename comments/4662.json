[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/192777284",
    "html_url": "https://github.com/electron/electron/issues/4662#issuecomment-192777284",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4662",
    "id": 192777284,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-03-06T01:28:07Z",
    "updated_at": "2016-03-06T01:28:07Z",
    "body": "Can you paste the crash report which can be found in the `Console.app`?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/192890243",
    "html_url": "https://github.com/electron/electron/issues/4662#issuecomment-192890243",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4662",
    "id": 192890243,
    "user": {
      "login": "nomeyer",
      "id": 4775299,
      "avatar_url": "https://avatars2.githubusercontent.com/u/4775299?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nomeyer",
      "html_url": "https://github.com/nomeyer",
      "followers_url": "https://api.github.com/users/nomeyer/followers",
      "following_url": "https://api.github.com/users/nomeyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/nomeyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nomeyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nomeyer/subscriptions",
      "organizations_url": "https://api.github.com/users/nomeyer/orgs",
      "repos_url": "https://api.github.com/users/nomeyer/repos",
      "events_url": "https://api.github.com/users/nomeyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nomeyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-06T13:40:56Z",
    "updated_at": "2016-03-06T13:40:56Z",
    "body": "Sure, here it is\n[crash_report.txt](https://github.com/atom/electron/files/160337/crash_report.txt)\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/193065147",
    "html_url": "https://github.com/electron/electron/issues/4662#issuecomment-193065147",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4662",
    "id": 193065147,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-03-07T02:39:26Z",
    "updated_at": "2016-03-07T02:39:26Z",
    "body": "Hmm from the crash report it happened when closing the window, but I can not figure out why. Are you able to work out a reproducible example? The crash is probably caused by something else.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/193301531",
    "html_url": "https://github.com/electron/electron/issues/4662#issuecomment-193301531",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4662",
    "id": 193301531,
    "user": {
      "login": "nomeyer",
      "id": 4775299,
      "avatar_url": "https://avatars2.githubusercontent.com/u/4775299?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nomeyer",
      "html_url": "https://github.com/nomeyer",
      "followers_url": "https://api.github.com/users/nomeyer/followers",
      "following_url": "https://api.github.com/users/nomeyer/following{/other_user}",
      "gists_url": "https://api.github.com/users/nomeyer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nomeyer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nomeyer/subscriptions",
      "organizations_url": "https://api.github.com/users/nomeyer/orgs",
      "repos_url": "https://api.github.com/users/nomeyer/repos",
      "events_url": "https://api.github.com/users/nomeyer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nomeyer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-07T15:34:00Z",
    "updated_at": "2016-03-07T15:34:00Z",
    "body": "So... After looking into it, it looks like we've been taking advantage of a race condition that was fixed in 0.36.8 onwards.\n\nAfter the GitHub login redirect, we close the browser window and open a new one. I was unaware of this as it doesn't seem to be mentioned in the documentation, but the app starts the quitting process after all the browser windows are closed.\n\nOn 0.36.7 – opening a new browser window after closing the previous one stops the quitting process, and the `will-quit` event is not triggered.\nOn 0.36.8 onwards – opening a new browser window after closing the previous one does not stop the quitting process and the `will-quit` event is triggered. I haven't dug further than that, but these two things happening concurrently appear to be the source of the crash.\n\nThe example project attached illustrates the crash. A browser window is opened and closed after 10 seconds, and a new window is opened straight after closing the previous one. On 0.36.7, this doesn't crash, and on 0.36.8 onwards, it does.\n\nI'm guessing this is the intended behaviour and we were getting away with it by exploiting a bug... Will refactor our code and it should all work fine.\n\nThanks\n\n[example.zip](https://github.com/atom/electron/files/161534/example.zip)\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/195921889",
    "html_url": "https://github.com/electron/electron/issues/4662#issuecomment-195921889",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4662",
    "id": 195921889,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-03-13T09:36:30Z",
    "updated_at": "2016-03-13T09:36:30Z",
    "body": "Minimal test case:\n\n``` js\napp.on('ready', function() {\n  createWindow();\n});\n\nfunction createWindow() {\n  window = new BrowserWindow({width: 800, height: 800});\n  window.loadURL('about:blank');\n  setImmediate(function() {\n    window.close();\n    createNewWindow();\n  });\n}\n\nfunction createNewWindow() {\n  window = new BrowserWindow({width: 800, height: 800});\n  window.loadURL('about:blank');\n}\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/225792805",
    "html_url": "https://github.com/electron/electron/issues/4662#issuecomment-225792805",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4662",
    "id": 225792805,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-06-14T06:40:55Z",
    "updated_at": "2016-06-14T06:40:55Z",
    "body": "Unable to reproduce in 1.2.2 anymore.\n"
  }
]