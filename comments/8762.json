[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/284672219",
    "html_url": "https://github.com/electron/electron/issues/8762#issuecomment-284672219",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8762",
    "id": 284672219,
    "user": {
      "login": "alespergl",
      "id": 19880051,
      "avatar_url": "https://avatars2.githubusercontent.com/u/19880051?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alespergl",
      "html_url": "https://github.com/alespergl",
      "followers_url": "https://api.github.com/users/alespergl/followers",
      "following_url": "https://api.github.com/users/alespergl/following{/other_user}",
      "gists_url": "https://api.github.com/users/alespergl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alespergl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alespergl/subscriptions",
      "organizations_url": "https://api.github.com/users/alespergl/orgs",
      "repos_url": "https://api.github.com/users/alespergl/repos",
      "events_url": "https://api.github.com/users/alespergl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alespergl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-07T09:46:10Z",
    "updated_at": "2017-03-07T09:46:10Z",
    "body": "@cberescu Can you please provide more context on what is the issue you are experiencing? Is your experience that Electron somehow subverts the default handling of `WM_QUERYENDSESSION`? If you are proposing a feature in relation to `WM_QUERYENDSESSION`, could you be more specific in terms of what tasks you have in mind that you would like to perform in response to that message?\r\nThanks"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/284785435",
    "html_url": "https://github.com/electron/electron/issues/8762#issuecomment-284785435",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8762",
    "id": 284785435,
    "user": {
      "login": "cberescu",
      "id": 1267846,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1267846?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cberescu",
      "html_url": "https://github.com/cberescu",
      "followers_url": "https://api.github.com/users/cberescu/followers",
      "following_url": "https://api.github.com/users/cberescu/following{/other_user}",
      "gists_url": "https://api.github.com/users/cberescu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cberescu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cberescu/subscriptions",
      "organizations_url": "https://api.github.com/users/cberescu/orgs",
      "repos_url": "https://api.github.com/users/cberescu/repos",
      "events_url": "https://api.github.com/users/cberescu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cberescu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-07T16:55:21Z",
    "updated_at": "2017-03-07T16:55:21Z",
    "body": "What i initially wanted was to stop my app from exiting when windows is shuting down so i will be able to finish some last operations. In the end i resolved this using node-ffi  by overwriting the default window procedure   \r\n\r\nI didn't find any  better way in the documentation so i think there is no way to do this or i didn't look good enough.\r\n\r\nIf there is a way to do this then just ignore what i am saying below. \r\n\r\nMy way to resolve this was by using the _ShutdownBlockReasonCreate_ API , i also had to hook the default window procedure so i can parse the window messages. I had to hook the default window procedure becase when it received WM_QUERYENDSESSION it must return 0 so that the _ShutdownBlockReasonCreate_ API will be called.\r\n\r\nFrom my point of view it will be a nice and usefull feature to have this, having the ability to delay the exit for a few seconds until the app is done finishing some last operations. \r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/286125959",
    "html_url": "https://github.com/electron/electron/issues/8762#issuecomment-286125959",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8762",
    "id": 286125959,
    "user": {
      "login": "alespergl",
      "id": 19880051,
      "avatar_url": "https://avatars2.githubusercontent.com/u/19880051?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alespergl",
      "html_url": "https://github.com/alespergl",
      "followers_url": "https://api.github.com/users/alespergl/followers",
      "following_url": "https://api.github.com/users/alespergl/following{/other_user}",
      "gists_url": "https://api.github.com/users/alespergl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alespergl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alespergl/subscriptions",
      "organizations_url": "https://api.github.com/users/alespergl/orgs",
      "repos_url": "https://api.github.com/users/alespergl/repos",
      "events_url": "https://api.github.com/users/alespergl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alespergl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-13T14:37:12Z",
    "updated_at": "2017-03-13T14:37:12Z",
    "body": "Thanks for sharing your experience. Your request to process the return value from `hookWindowMessage` callback and pass it on to the system is problematic, because there can be multiple callbacks registered for any message. Obviously there is no way to accumulate all their return values into just one which would be passed on.\r\n\r\nApart from adding a whole feature for supporting logout scenarios, there's one simpler thing which I suppose we could do, which is to handle `WM_QUERYENDSESSION` so that when there's a shutdown block reason in place (installed by `ShutdownBlockReasonCreate`), we would block log out. You would then need to make sure you call `ShutdownBlockReasonDestroy` to allow the system to log the user out."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/287606086",
    "html_url": "https://github.com/electron/electron/issues/8762#issuecomment-287606086",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8762",
    "id": 287606086,
    "user": {
      "login": "cberescu",
      "id": 1267846,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1267846?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cberescu",
      "html_url": "https://github.com/cberescu",
      "followers_url": "https://api.github.com/users/cberescu/followers",
      "following_url": "https://api.github.com/users/cberescu/following{/other_user}",
      "gists_url": "https://api.github.com/users/cberescu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cberescu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cberescu/subscriptions",
      "organizations_url": "https://api.github.com/users/cberescu/orgs",
      "repos_url": "https://api.github.com/users/cberescu/repos",
      "events_url": "https://api.github.com/users/cberescu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cberescu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-19T10:05:58Z",
    "updated_at": "2017-03-19T10:05:58Z",
    "body": "\r\nI think the best option is to add at some point a new feture that will support logout scenarios.  While your solution will work it will still force me to use the API from windows by using ffi or a c++ module.\r\n\r\n\r\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/307725336",
    "html_url": "https://github.com/electron/electron/issues/8762#issuecomment-307725336",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8762",
    "id": 307725336,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-06-12T08:37:40Z",
    "updated_at": "2017-06-12T08:37:40Z",
    "body": "Closing since adding return value to `hookWindowMessage` is not going to be added."
  }
]