[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/161381464",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-161381464",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 161381464,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-02T17:59:47Z",
    "updated_at": "2015-12-02T17:59:47Z",
    "body": "A consequence of this issue is that `window.require` is not defined in the renderer process, making impossible to require any code.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/161622302",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-161622302",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 161622302,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-03T12:40:47Z",
    "updated_at": "2015-12-03T12:40:47Z",
    "body": "Turns out I can reproduce in Ubuntu 14.04 running in a real machine, but not in a VM.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/161765667",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-161765667",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 161765667,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-03T19:58:17Z",
    "updated_at": "2015-12-03T19:58:17Z",
    "body": "I'm still doing the bisect process. The first bad commit is among these ones:\n\n```\n53b9d61 Fix building on Windows\n2c3751e Merge pull request #2696 from John-Lin/master\n4a81300 Merge pull request #2695 from takashi/patch-1\n73af4c0 remove -jp suffix from quick-start-jp.md\n2734d67 add Traditional Chinese documents link in README to navigate\nc81de98 Update brightray to Chrome 45\n599e9b9 Provide task runner for the node mode\nc1d7ad9 Devtools no longer uses iframes\nee0dc0d Update clang\n4254eb2 Fix API changes on Linux \n262b66b Feed gin::PerIsolateData with a task runner\n45491ca Fix API changes\n1db8432 Upgrade to Chrome 45\n992aada Can only run tests on x64 machine\n```\n\nI'll finish the remaining steps tomorrow.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/162051713",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-162051713",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 162051713,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-04T18:56:41Z",
    "updated_at": "2015-12-04T18:56:41Z",
    "body": "The bug was introduced in the following commits:\n\n```\n599e9b9 Provide task runner for the node mode\nc1d7ad9 Devtools no longer uses iframes\nee0dc0d Update clang\n4254eb2 Fix API changes on Linux \n262b66b Feed gin::PerIsolateData with a task runner\n45491ca Fix API changes\n1db8432 Upgrade to Chrome 45\n```\n\nSadly, all these commits are completely broken on Linux (both Ubuntu and Fedora) and do not build at all (I get lots of C++ errors), so I couldn't reduce the options anymore.\n\nHere is the compare view between those commits: https://github.com/atom/electron/compare/1db8432...599e9b9.\n\nHopefully someone with more experience in the C++ side of electron can review.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/162052109",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-162052109",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 162052109,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-04T18:58:36Z",
    "updated_at": "2015-12-04T18:58:36Z",
    "body": "As a side note, https://github.com/atom/electron/commit/992aada90f4bb53913e58d90f49b8ecce7bf02c1 is the last good commit.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/162596860",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-162596860",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 162596860,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-07T17:14:49Z",
    "updated_at": "2015-12-07T17:14:49Z",
    "body": "These are the errors I get on the broken commits mentioned above:\n\n```\nparallels@ubuntu:~/Projects/electron$ ./script/build.py -c D\nninja: Entering directory `out/D'\n[18/1114] CXX obj/vendor/brightray/browser/brightray.browser_client.o\nFAILED: /home/parallels/Projects/electron/vendor/llvm-build/Release+Asserts/bin/clang++ -MMD -MF obj/vendor/brightray/browser/brightray.browser_client.o.d -DNDEBUG -DV8_USE_EXTERNAL_STARTUP_DATA -DSK_SUPPORT_LEGACY_GETTOPDEVICE -DSK_SUPPORT_LEGACY_BITMAP_CONFIG -DSK_SUPPORT_LEGACY_DEVICE_VIRTUAL_ISOPAQUE -DSK_SUPPORT_LEGACY_N32_NAME -DSK_SUPPORT_LEGACY_SETCONFIG -DSK_IGNORE_ETC1_SUPPORT -DSK_IGNORE_GPU_DITHER -DTOOLKIT_VIEWS -DUSE_AURA -DUSE_X11 -DUSE_NSS_CERTS -DUSE_NSS -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DDEBUG -DCOMPONENT_BUILD -DGURL_DLL -DSKIA_DLL -DUSING_V8_SHARED -DWEBKIT_DLL -I../../vendor/brightray -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/skia/config -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/skia/include/core -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/mojo/src -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/WebKit -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/shared_library/gen -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/freetype2 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/harfbuzz -I/usr/include/dbus-1.0 -I/usr/lib/x86_64-linux-gnu/dbus-1.0/include -I/usr/include/gconf/2 -I/usr/include/nss -I/usr/include/nspr -Wno-deprecated-register -Wno-sentinel -m64 -march=x86-64 -std=c++11 -Wno-reserved-user-defined-literal -D__STRICT_ANSI__ -fno-rtti  -c ../../vendor/brightray/browser/browser_client.cc -o obj/vendor/brightray/browser/brightray.browser_client.o\nIn file included from ../../vendor/brightray/browser/browser_client.cc:7:\nIn file included from ../../vendor/brightray/browser/browser_context.h:8:\n../../vendor/brightray/browser/permission_manager.h:26:72: error: non-virtual member function marked 'override' hides virtual member function\n      const base::Callback<void(content::PermissionStatus)>& callback) override;\n                                                                       ^\n/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/content/public/browser/permission_manager.h:29:16: note: hidden overloaded virtual function 'content::PermissionManager::RequestPermission' declared here: type mismatch at 2nd parameter ('content::RenderFrameHost *' vs 'content::WebContents *')\n  virtual void RequestPermission(\n               ^\nIn file included from ../../vendor/brightray/browser/browser_client.cc:7:\nIn file included from ../../vendor/brightray/browser/browser_context.h:8:\n../../vendor/brightray/browser/permission_manager.h:30:63: error: non-virtual member function marked 'override' hides virtual member function\n                               const GURL& requesting_origin) override;\n                                                              ^\n/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/content/public/browser/permission_manager.h:39:16: note: hidden overloaded virtual function 'content::PermissionManager::CancelPermissionRequest' declared here: type mismatch at 2nd parameter ('content::RenderFrameHost *' vs 'content::WebContents *')\n  virtual void CancelPermissionRequest(PermissionType permission,\n               ^\n2 errors generated.\n[18/1114] CXX obj/vendor/brightray/browser/brightray.browser_context.o\nFAILED: /home/parallels/Projects/electron/vendor/llvm-build/Release+Asserts/bin/clang++ -MMD -MF obj/vendor/brightray/browser/brightray.browser_context.o.d -DNDEBUG -DV8_USE_EXTERNAL_STARTUP_DATA -DSK_SUPPORT_LEGACY_GETTOPDEVICE -DSK_SUPPORT_LEGACY_BITMAP_CONFIG -DSK_SUPPORT_LEGACY_DEVICE_VIRTUAL_ISOPAQUE -DSK_SUPPORT_LEGACY_N32_NAME -DSK_SUPPORT_LEGACY_SETCONFIG -DSK_IGNORE_ETC1_SUPPORT -DSK_IGNORE_GPU_DITHER -DTOOLKIT_VIEWS -DUSE_AURA -DUSE_X11 -DUSE_NSS_CERTS -DUSE_NSS -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DDEBUG -DCOMPONENT_BUILD -DGURL_DLL -DSKIA_DLL -DUSING_V8_SHARED -DWEBKIT_DLL -I../../vendor/brightray -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/skia/config -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/skia/include/core -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/mojo/src -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/WebKit -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/shared_library/gen -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/freetype2 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/harfbuzz -I/usr/include/dbus-1.0 -I/usr/lib/x86_64-linux-gnu/dbus-1.0/include -I/usr/include/gconf/2 -I/usr/include/nss -I/usr/include/nspr -Wno-deprecated-register -Wno-sentinel -m64 -march=x86-64 -std=c++11 -Wno-reserved-user-defined-literal -D__STRICT_ANSI__ -fno-rtti  -c ../../vendor/brightray/browser/browser_context.cc -o obj/vendor/brightray/browser/brightray.browser_context.o\nIn file included from ../../vendor/brightray/browser/browser_context.cc:5:\nIn file included from ../../vendor/brightray/browser/browser_context.h:8:\n../../vendor/brightray/browser/permission_manager.h:22:16: error: no type named 'WebContents' in namespace 'content'\n      content::WebContents* web_contents,\n      ~~~~~~~~~^\n../../vendor/brightray/browser/permission_manager.h:28:41: error: no type named 'WebContents' in namespace 'content'\n                               content::WebContents* web_contents,\n                               ~~~~~~~~~^\nIn file included from ../../vendor/brightray/browser/browser_context.cc:8:\n../../vendor/brightray/browser/inspectable_web_contents_impl.h:149:68: error: non-virtual member function marked 'override' hides virtual member function\n      content::SessionStorageNamespace* session_storage_namespace) override;\n                                                                   ^\n/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/content/public/browser/web_contents_delegate.h:293:16: note: hidden overloaded virtual function 'content::WebContentsDelegate::ShouldCreateWebContents' declared here: type mismatch at 5th parameter ('const std::string &' (aka 'const basic_string<char> &') vs 'const base::string16 &' (aka 'const basic_string<char16, base::string16_char_traits> &'))\n  virtual bool ShouldCreateWebContents(\n               ^\nIn file included from ../../vendor/brightray/browser/browser_context.cc:9:\n../../vendor/brightray/browser/network_delegate.h:64:67: error: only virtual member functions can be marked 'override'\n  bool OnCanThrottleRequest(const net::URLRequest& request) const override;\n                                                                  ^~~~~~~~\n../../vendor/brightray/browser/browser_context.cc:188:35: error: allocating an object of abstract class type 'brightray::PermissionManager'\n    permission_manager_.reset(new PermissionManager);\n                                  ^\n/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/content/public/browser/permission_manager.h:29:16: note: unimplemented pure virtual method 'RequestPermission' in 'PermissionManager'\n  virtual void RequestPermission(\n               ^\n/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/content/public/browser/permission_manager.h:39:16: note: unimplemented pure virtual method 'CancelPermissionRequest' in 'PermissionManager'\n  virtual void CancelPermissionRequest(PermissionType permission,\n               ^\n5 errors generated.\n[18/1114] CXX obj/vendor/brightray/browser/brightray.browser_main_parts.o\nFAILED: /home/parallels/Projects/electron/vendor/llvm-build/Release+Asserts/bin/clang++ -MMD -MF obj/vendor/brightray/browser/brightray.browser_main_parts.o.d -DNDEBUG -DV8_USE_EXTERNAL_STARTUP_DATA -DSK_SUPPORT_LEGACY_GETTOPDEVICE -DSK_SUPPORT_LEGACY_BITMAP_CONFIG -DSK_SUPPORT_LEGACY_DEVICE_VIRTUAL_ISOPAQUE -DSK_SUPPORT_LEGACY_N32_NAME -DSK_SUPPORT_LEGACY_SETCONFIG -DSK_IGNORE_ETC1_SUPPORT -DSK_IGNORE_GPU_DITHER -DTOOLKIT_VIEWS -DUSE_AURA -DUSE_X11 -DUSE_NSS_CERTS -DUSE_NSS -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DDEBUG -DCOMPONENT_BUILD -DGURL_DLL -DSKIA_DLL -DUSING_V8_SHARED -DWEBKIT_DLL -I../../vendor/brightray -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/skia/config -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/skia/include/core -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/mojo/src -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/src/third_party/WebKit -I/home/parallels/Projects/electron/vendor/brightray/vendor/download/libchromiumcontent/shared_library/gen -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/freetype2 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/harfbuzz -I/usr/include/dbus-1.0 -I/usr/lib/x86_64-linux-gnu/dbus-1.0/include -I/usr/include/gconf/2 -I/usr/include/nss -I/usr/include/nspr -Wno-deprecated-register -Wno-sentinel -m64 -march=x86-64 -std=c++11 -Wno-reserved-user-defined-literal -D__STRICT_ANSI__ -fno-rtti  -c ../../vendor/brightray/browser/browser_main_parts.cc -o obj/vendor/brightray/browser/brightray.browser_main_parts.o\nIn file included from ../../vendor/brightray/browser/browser_main_parts.cc:7:\nIn file included from ../../vendor/brightray/browser/browser_context.h:8:\n../../vendor/brightray/browser/permission_manager.h:22:16: error: no type named 'WebContents' in namespace 'content'\n      content::WebContents* web_contents,\n      ~~~~~~~~~^\n../../vendor/brightray/browser/permission_manager.h:28:41: error: no type named 'WebContents' in namespace 'content'\n                               content::WebContents* web_contents,\n                               ~~~~~~~~~^\n2 errors generated.\nninja: build stopped: subcommand failed.\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/162598486",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-162598486",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 162598486,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-07T17:21:37Z",
    "updated_at": "2015-12-07T17:21:37Z",
    "body": "The issue seems to be gone by cherry picking `c81de98 Update brightray to Chrome 45`. I don't have access to a Linux machine at the moment (only a VM, but I can't reproduce the original issue there), but I'll keep bisecting later.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/163867611",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-163867611",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 163867611,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-12-11T07:51:18Z",
    "updated_at": "2015-12-11T07:51:18Z",
    "body": "Can you try whether 0.36.0 works?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/164436176",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-164436176",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 164436176,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-12-14T13:27:51Z",
    "updated_at": "2015-12-14T13:27:51Z",
    "body": "@zcbenz It still fails with the same error.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/168952697",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-168952697",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 168952697,
    "user": {
      "login": "arashpayan",
      "id": 46624,
      "avatar_url": "https://avatars3.githubusercontent.com/u/46624?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arashpayan",
      "html_url": "https://github.com/arashpayan",
      "followers_url": "https://api.github.com/users/arashpayan/followers",
      "following_url": "https://api.github.com/users/arashpayan/following{/other_user}",
      "gists_url": "https://api.github.com/users/arashpayan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arashpayan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arashpayan/subscriptions",
      "organizations_url": "https://api.github.com/users/arashpayan/orgs",
      "repos_url": "https://api.github.com/users/arashpayan/repos",
      "events_url": "https://api.github.com/users/arashpayan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arashpayan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-05T09:51:22Z",
    "updated_at": "2016-01-05T09:51:22Z",
    "body": "I just experienced this while using v0.36.2 as well.\nOn Ubuntu 14.04 x86_64, and on a custom Linux distro running on an ARM chip. Running as a non-root user lets me work around the issue on both systems.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/168997014",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-168997014",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 168997014,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-05T13:28:10Z",
    "updated_at": "2016-01-05T13:28:10Z",
    "body": "@arashpayan Sadly I was unable to find the reason of the error. It seems to start happening right after upgrading to Chrome 45, and is still present on newer Chrome versions.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/170578291",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-170578291",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 170578291,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-11T14:55:00Z",
    "updated_at": "2016-01-11T14:55:00Z",
    "body": "@zcbenz Any updates on this?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/170579699",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-170579699",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 170579699,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-01-11T15:00:38Z",
    "updated_at": "2016-01-11T15:00:38Z",
    "body": "@jviotti I can not reproduce the problem on any machine, and I never saw similar issues in Atom, so you are basically on your own.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/172737785",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-172737785",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 172737785,
    "user": {
      "login": "jrobeson",
      "id": 56908,
      "avatar_url": "https://avatars3.githubusercontent.com/u/56908?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrobeson",
      "html_url": "https://github.com/jrobeson",
      "followers_url": "https://api.github.com/users/jrobeson/followers",
      "following_url": "https://api.github.com/users/jrobeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrobeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrobeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrobeson/subscriptions",
      "organizations_url": "https://api.github.com/users/jrobeson/orgs",
      "repos_url": "https://api.github.com/users/jrobeson/repos",
      "events_url": "https://api.github.com/users/jrobeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrobeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T05:03:00Z",
    "updated_at": "2016-01-19T05:03:00Z",
    "body": "@jviotti : maybe a silly question because I'm unfamiliar with the build process, but shouldn't those compilation failures show up in the build process? \n\nI'm think I'm having the same issue myself, and trying to track it down. My app actually requires root privs to run (or CAP_NET_ADMIN capabilities), so I'm glad you came up with a simpler test case :)\n\nI'm currently attempting to build electron myself to see if i can reproduce those errors on Fedora 23.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/172741005",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-172741005",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 172741005,
    "user": {
      "login": "jrobeson",
      "id": 56908,
      "avatar_url": "https://avatars3.githubusercontent.com/u/56908?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrobeson",
      "html_url": "https://github.com/jrobeson",
      "followers_url": "https://api.github.com/users/jrobeson/followers",
      "following_url": "https://api.github.com/users/jrobeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrobeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrobeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrobeson/subscriptions",
      "organizations_url": "https://api.github.com/users/jrobeson/orgs",
      "repos_url": "https://api.github.com/users/jrobeson/repos",
      "events_url": "https://api.github.com/users/jrobeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrobeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T05:18:15Z",
    "updated_at": "2016-01-19T08:41:27Z",
    "body": "definitely getting a ton of build errors and/or warnings when trying to build 0.36.4, so many that the output went past my shell buffer, and I don't have time to build again right now. I do see similar brightray issues though.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/172836551",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-172836551",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 172836551,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T12:26:59Z",
    "updated_at": "2016-01-19T12:26:59Z",
    "body": "@jrobeson Are you bisecting electron? I get the build errors on certain commits, unless I cherry pick `c81de98 Update brightray to Chrome 45` on each step.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/173002535",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-173002535",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 173002535,
    "user": {
      "login": "jrobeson",
      "id": 56908,
      "avatar_url": "https://avatars3.githubusercontent.com/u/56908?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrobeson",
      "html_url": "https://github.com/jrobeson",
      "followers_url": "https://api.github.com/users/jrobeson/followers",
      "following_url": "https://api.github.com/users/jrobeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrobeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrobeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrobeson/subscriptions",
      "organizations_url": "https://api.github.com/users/jrobeson/orgs",
      "repos_url": "https://api.github.com/users/jrobeson/repos",
      "events_url": "https://api.github.com/users/jrobeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrobeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-19T22:03:19Z",
    "updated_at": "2016-01-19T22:04:27Z",
    "body": "nah, I'm not bisecting, that'd take up too much machine time.  I just wanted to see if i could replicate your build issue with the latest electron, since it seemed like nobody else did/could.  Seems like that build issue should be verified against a newer chromium.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/173492878",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-173492878",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 173492878,
    "user": {
      "login": "jrobeson",
      "id": 56908,
      "avatar_url": "https://avatars3.githubusercontent.com/u/56908?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrobeson",
      "html_url": "https://github.com/jrobeson",
      "followers_url": "https://api.github.com/users/jrobeson/followers",
      "following_url": "https://api.github.com/users/jrobeson/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrobeson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrobeson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrobeson/subscriptions",
      "organizations_url": "https://api.github.com/users/jrobeson/orgs",
      "repos_url": "https://api.github.com/users/jrobeson/repos",
      "events_url": "https://api.github.com/users/jrobeson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrobeson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-21T08:19:54Z",
    "updated_at": "2016-01-21T08:19:54Z",
    "body": "I wonder if it's fixed if chrome 48 updates will help.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175796441",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175796441",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175796441,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T19:03:40Z",
    "updated_at": "2016-01-27T19:39:17Z",
    "body": "@zcbenz I've been debugging this issue on `master` and found that the origin of this issue is `_file.IsValid()` returning `false` in `asar/archive.cc` when running `getOrCreateArchive()` on `atom.asar`:\n\n``` cpp\n// https://github.com/atom/electron/blob/master/atom/common/asar/archive.cc#L139\n\nbool Archive::Init() {\n  if (!file_.IsValid())\n    return false;\n\n...\n```\n\nI was able to get more information about the error like this:\n\n``` cpp\nif (!file_.IsValid()) {\n\n    // Include <iostream> for std::cout and std::endl\n    std::cout << file_.ErrorToString(file_.error_details()) << std::endl;\n\n    return false;\n}\n```\n\nWhich printed: `FILE_ERROR_ACCESS_DENIED`, which is very weird given that the process is running as `root` and I of course have access to the package.\n\nWhat do you think?\n\n---\n\n**UPDATE 1:** I've tried adjusting the permissions of `atom.asar` and even making `root` the owner without luck.\n\n**UPDATE 2:** Another discovery: `file_.GetPlatformFile()` returns `-1` when running as `root`, while it returns `201` when being ran as a normal user. This is probably due to the file not able to being opened before.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175821460",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175821460",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175821460,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T19:49:27Z",
    "updated_at": "2016-01-27T19:54:08Z",
    "body": "Could this be somehow related to new Chromium policies for accessing files? The code works fine when dealing with `asar` archives in the main process, but fails when loading the first file inside an `asar` in the renderer process.\n\nMaybe Chromium prevents I/O to filesystem files from a WebView when the process is running as `root`?\n\nI extracted `resources/atom.asar` to `resources/atom` and modified `node_bindings.cc` to access the extracted directory instead of the `asar` package:\n\n``` cpp\n// https://github.com/atom/electron/blob/master/atom/common/node_bindings.cc#L166\n\nresources_path.Append(FILE_PATH_LITERAL(\"atom\"))\n```\n\nBut still `module.js` refuses to require the file, returning an 'internalModuleStat' of `-13` (when the expected is `0`).\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175838515",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175838515",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175838515,
    "user": {
      "login": "arashpayan",
      "id": 46624,
      "avatar_url": "https://avatars3.githubusercontent.com/u/46624?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arashpayan",
      "html_url": "https://github.com/arashpayan",
      "followers_url": "https://api.github.com/users/arashpayan/followers",
      "following_url": "https://api.github.com/users/arashpayan/following{/other_user}",
      "gists_url": "https://api.github.com/users/arashpayan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arashpayan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arashpayan/subscriptions",
      "organizations_url": "https://api.github.com/users/arashpayan/orgs",
      "repos_url": "https://api.github.com/users/arashpayan/repos",
      "events_url": "https://api.github.com/users/arashpayan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arashpayan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T20:26:26Z",
    "updated_at": "2016-01-27T20:26:26Z",
    "body": "I'd like to share my work around for this bug, in case it helps in debugging. Please take it with a grain of sodium chloride.\n\nWhen I originally extracted the electron archive, it was on my desktop which has multiple user accounts, and the file owner was set to my personal user account (`arash`). When I transferred it (I don't remember if I `tar`ed then `scp`ed or just straight `scp`) to the test system where I first experienced this bug, there was only one account, `root`. `ls` showed the files as being owned by `root`, but I kept experiencing the bug from this thread. On a whim, I thought maybe the uid from my desktop computer was intact in the files and causing the problem.\n\nTo test my theory, I created another account on this test system named `foo`, and without doing anything else, running `ls` now showed the electron files as belonging to `foo`. I presume this was because the uid of the new `foo` user was the same as the user id of the account on my desktop. Running electron as `foo` worked just fine. So I `chown`ed the files back to `root` and this error went away.\n\nSo maybe the invalid uid is causing some function to fail in Electron. It's still odd, because root should have access to everything.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175848717",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175848717",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175848717,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T20:55:55Z",
    "updated_at": "2016-01-27T20:55:55Z",
    "body": "@arashpayan Thanks for the information. \n\nCan you reproduce the issue without transferring files between systems, etc (by running on the same system where electron was initially downloaded)?\n\nI've tried the `chown` suggestion but it sadly didn't work for me.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175849662",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175849662",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175849662,
    "user": {
      "login": "petrosagg",
      "id": 939420,
      "avatar_url": "https://avatars0.githubusercontent.com/u/939420?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrosagg",
      "html_url": "https://github.com/petrosagg",
      "followers_url": "https://api.github.com/users/petrosagg/followers",
      "following_url": "https://api.github.com/users/petrosagg/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrosagg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrosagg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrosagg/subscriptions",
      "organizations_url": "https://api.github.com/users/petrosagg/orgs",
      "repos_url": "https://api.github.com/users/petrosagg/repos",
      "events_url": "https://api.github.com/users/petrosagg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrosagg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T20:59:41Z",
    "updated_at": "2016-01-27T20:59:41Z",
    "body": "I reproduced this issue using @jviotti's gist on my machine.\n\nnode version: v5.4.1\nnpm version: 3.5.3\nelectron-prebuild version: 0.35.6\nDistro: Arch linux natively\nAppArmor/SELinux: N/A\nLinux: 4.3.3-2-ARCH\n\nI'm currently investigating two strace dumps to see the difference between running as root and running as a user.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175851619",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175851619",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175851619,
    "user": {
      "login": "arashpayan",
      "id": 46624,
      "avatar_url": "https://avatars3.githubusercontent.com/u/46624?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arashpayan",
      "html_url": "https://github.com/arashpayan",
      "followers_url": "https://api.github.com/users/arashpayan/followers",
      "following_url": "https://api.github.com/users/arashpayan/following{/other_user}",
      "gists_url": "https://api.github.com/users/arashpayan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arashpayan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arashpayan/subscriptions",
      "organizations_url": "https://api.github.com/users/arashpayan/orgs",
      "repos_url": "https://api.github.com/users/arashpayan/repos",
      "events_url": "https://api.github.com/users/arashpayan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arashpayan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T21:05:56Z",
    "updated_at": "2016-01-27T21:05:56Z",
    "body": "@jviotti that's where it gets weird. If I run electron as root on my desktop where I originally extracted the files (Ubuntu 14.04), it still fails. That's why I was originally hesitant to present my work around.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175854334",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175854334",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175854334,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T21:10:17Z",
    "updated_at": "2016-01-27T21:10:17Z",
    "body": "I found this closed issue about the exact same problem where the author came close to what we have here: https://github.com/atom/electron/issues/3528. \n\nHe mentions that the app works in his personal computer but not in the Raspberry Pi, but notice he mentions that the app is running as `root` on the Pi, which supports the argument that the issue is only present when running as `root`.\n\nThe guy mentions that Raspbian is able to run the app without any issues, but it fails with this error on Arch, which maybe indicates some dependency issue.\n\nMaybe @szz-dvl might want to provide more information here.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175860474",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175860474",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175860474,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T21:25:02Z",
    "updated_at": "2016-01-27T21:27:45Z",
    "body": "@zcbenz Could this be somehow related to Chromium's Linux SUID Sandboxing? According to https://chromium.googlesource.com/chromium/src/+/master/docs/linux_suid_sandbox.md:\n\n> With r20110, Chromium on Linux can now sandbox its renderers using a SUID helper binary. This is one of our layer-1 sandboxing solutions.\n\nAccording to the Chromium docs (https://chromium.googlesource.com/chromium/src/+/master/docs/linux_suid_sandbox_development.md), there is an option to disable sandboxing:\n\n``` sh\n--disable-setuid-sandbox\n```\n\nHowever [this option doesn't seem to be supported as a Chromium switch](https://github.com/atom/electron/blob/master/docs/api/chrome-command-line-switches.md) by electron.\n\nCan you instruct us on how to disable sandboxing programatically to test this?\n\n---\n\n**UPDATE 1:** I've tried setting `CHROME_DEVEL_SANDBOX` to an empty string as pointed out by the docs but this didn't make any difference.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175868914",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175868914",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175868914,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T21:36:19Z",
    "updated_at": "2016-01-27T21:36:19Z",
    "body": "Building electron as `root` fixes the issue, but I have no idea why.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175936056",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-175936056",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 175936056,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-01-28T03:14:20Z",
    "updated_at": "2016-01-28T03:14:20Z",
    "body": "@jviotti The sandbox of Chromium is disabled in Electron, so it shouldn't be the cause.\n\nCan you paste the value of`path_.value()`? Chromium does a check of whether path component contains `..`, and if it does the `FILE_ERROR_ACCESS_DENIED` error would be returned.\n\nRefs:\nhttps://codereview.chromium.org/1469153006\nhttps://codereview.chromium.org/1488873002\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/176185693",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-176185693",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 176185693,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-28T13:28:37Z",
    "updated_at": "2016-01-28T13:28:37Z",
    "body": "@zcbenz The result of `path_.value()` is `/home/jviotti/Projects/electron-current/out/D/resources/atom.asar`, no `..`.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/176240336",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-176240336",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 176240336,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-28T15:39:41Z",
    "updated_at": "2016-01-28T15:39:41Z",
    "body": "I've modified `Archive::Init` to print the mode of `path_.value()` before checking for it's validity:\n\n``` cpp\n#include <sys/stat.h>\n\n...\n\nint getPathMode(std::string name) {\n  struct stat buffer;   \n  int ret = stat(name.c_str(), &buffer);\n  if (ret < 0) return -1;\n  return buffer.st_mode;\n}\n\nbool Archive::Init() {\n  std::cout << getPathMode(path_.value()) << std::endl;\n  if (!file_.IsValid()) {\n    std::cout << \"Archive is invalid: (\"\n              << file_.ErrorToString(file_.error_details())\n              << \"): \"\n              << path_.value()\n              << std::endl;\n    return false;\n  }\n\n...\n```\n\nThis is the output when running my app as `root` (notice I packed the gist I linked above as `resources/app.asar` for convenience):\n\n``` sh\n$ sudo ./out/D/electron \n33204\n33204\n(electron) loadUrl is deprecated. Use loadURL instead.\n33204\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n-1\nArchive is invalid: (FILE_ERROR_ACCESS_DENIED): /home/jviotti/electron-current/out/D/resources/atom.asar\n[30652:0128/113606:ERROR:CONSOLE(340)] \"Uncaught Error: Cannot find module '/home/jviotti/electron-current/out/D/resources/atom.asar/renderer/lib/init.js'\", source: module.js (340)\n```\n\nNotice that the stat succeeds three times at the beginning, apparently before the `index.html` file gets loaded. \n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/176241384",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-176241384",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 176241384,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-28T15:42:40Z",
    "updated_at": "2016-01-28T15:42:40Z",
    "body": "I also noticed that the `stat` always succeeds on `/home` and `/home/jviotti` but not any nested directories like `/home/jviotti/Projects` despite `root` having full permissions on those of course.\n\nAs an experiment, I created a fake `john` account on my system, and turns out I _can_ stat files inside `/home/john` without any issues. What could be going on?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/176243411",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-176243411",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 176243411,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-28T15:48:15Z",
    "updated_at": "2016-01-28T15:48:31Z",
    "body": "@zcbenz I found something! The newly created `/home/john` home directory had execution permissions, which `/home/jviotti` didn't. Adding executing permissions to my home directory fixes the issue:\n\n``` sh\nchmod a+x /home/jviotti\n```\n\nRemoving the execution permissions makes the issue appear again.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/176745568",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-176745568",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 176745568,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-29T13:07:25Z",
    "updated_at": "2016-01-29T13:07:25Z",
    "body": "I initially mentioned that this bug was not reproducible in an Ubuntu 14.04 virtual machine, which after checking, had execution permissions on the home directory by default. Under the assumption that execution permissions were the issue, I've removed execution permissions from my home directory in the virtual machine and the error didn't happen.\n\nI also ran the same experiment in OS X and was not able to reproduce the issue.\n\nI tried the execution permissions workaround in two real Linux boxes and that worked, so it definitely seems to be a Linux specific issue, but it doesn't happen on virtual machines. What could be the difference between running electron in both environments?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/182517408",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-182517408",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 182517408,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-10T18:29:10Z",
    "updated_at": "2016-02-10T18:53:31Z",
    "body": "I've made some progress regarding why the file is read successfully a couple of times before failing:\n\nI can see that running my app in Electron forks three processes:\n- The main process.\n- A renderer process with `--node-integration=true` whose parent process is the main process.\n- A renderer process without `--node-integration=true` whose parent process is the main process.\n\nWhen running under `root`, the main process has a `uid` and `gid` of zero. The first three times that the file is opened is opened in original process that forks the other three. This process has full permissions over the system, and I can freely change my `uid` and `gid` with `setuid` and `setgid` correctly (as a way to check I indeed have permissions).\n\nThe rest of the times, the file is attempted to be opened in the two renderer processes. Since their parent process is the main process, they inherit the `uid` and `gid` of the parent (the main process), which inherits from the original process, but lack enough permissions for some reason (`setuid` returns `-1`, and they throw our ACCESS_DENIED error).\n\nSee more information about the three processes in this output from `ps`, where `23294` is the original process that forks the three ones, `23296` is the main process, and `23320` and `23321` are the renderer processes:\n\n``` sh\n PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND\n 6049 23293 23293  6049 pts/10   23293 S+       0   0:00          |   |   \\_ sudo ./out/D/electron /home/jviotti/Downloads/7193eec573c62867151d-4e63199c2cf83a13e4a2301c61deec2616f9187b\n23293 23294 23293  6049 pts/10   23293 Sl+      0   0:01          |   |       \\_ /home/jviotti/electron-current/out/D/electron /home/jviotti/Downloads/7193eec573c62867151d-4e63199c2cf83a13e4a2301c61deec2616f9187b\n23294 23296 23293  6049 pts/10   23293 S+       0   0:00          |   |           \\_ /home/jviotti/electron-current/out/D/electron --type=zygote --no-sandbox\n23296 23320 23293  6049 pts/10   23293 Sl+      0   0:00          |   |               \\_ /home/jviotti/electron-current/out/D/electron --type=renderer --no-sandbox --lang=en-US --node-integration=true --num-raster-threads=2 --content-image-texture-target=3553,3553,3553,3553,3553,3553,3553,3553,3553,3553,3553,3553,3553 --video-image-texture-target=3553 --disable-accelerated-video-decode --disable-webrtc-hw-encoding --disable-gpu-compositing --channel=23294.0.921772104 --v8-natives-passed-by-fd --v8-snapshot-passed-by-fd\n23296 23321 23293  6049 pts/10   23293 Sl+      0   0:00          |   |               \\_ /home/jviotti/electron-current/out/D/electron --type=renderer --no-sandbox --lang=en-US --num-raster-threads=2 --content-image-texture-target=3553,3553,3553,3553,3553,3553,3553,3553,3553,3553,3553,3553,3553 --video-image-texture-target=3553 --disable-accelerated-video-decode --disable-webrtc-hw-encoding --disable-gpu-compositing --channel=23294.1.175272910 --v8-natives-passed-by-fd --v8-snapshot-passed-by-fd\n```\n\n@zcbenz Why are there two renderer process threads? Also, why is `node-integration=true` only enabled in one of them?\n\n---\n\n**UPDATE 1:** According to [this SuperUser answer](http://superuser.com/a/626850):\n\n> root is always uid 0, but uid 0 is not necessarily always root.\n\nAll the threads have a UID 0, and they show as ran by `root` under `htop`, so how can the access error occur?\n\n**UPDATE 2:** I also tested what's the `euid` (effective group id) of all process, which is what programs use for checking permissions, and is zero in all cases as well.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/182597667",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-182597667",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 182597667,
    "user": {
      "login": "petrosagg",
      "id": 939420,
      "avatar_url": "https://avatars0.githubusercontent.com/u/939420?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petrosagg",
      "html_url": "https://github.com/petrosagg",
      "followers_url": "https://api.github.com/users/petrosagg/followers",
      "following_url": "https://api.github.com/users/petrosagg/following{/other_user}",
      "gists_url": "https://api.github.com/users/petrosagg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petrosagg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petrosagg/subscriptions",
      "organizations_url": "https://api.github.com/users/petrosagg/orgs",
      "repos_url": "https://api.github.com/users/petrosagg/repos",
      "events_url": "https://api.github.com/users/petrosagg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petrosagg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-10T21:52:53Z",
    "updated_at": "2016-02-10T21:52:53Z",
    "body": "After some strace digging I found the offending syscall. The threads that run the node code will do\n\n``` C\ncapset({_LINUX_CAPABILITY_VERSION_3, 0}, {0, 0, 0})\n```\n\nwhich drops all the capabilities. This is ok when the process is running as a user that has access to every directory in the path leading to `atom.asar`, but it will fail if one directory isn't accessible. That's why doing `chmod a+x` on the home directory fixes the problem.\n\nHere is an example C program that demonstrates the above\n\n``` C\n#include <sys/capability.h>\n#include <stdio.h>\n#include <fcntl.h>\n\n#define FILENAME \"/home/petrosagg/somefile\"\n\nint main () {\n    struct __user_cap_header_struct hdr;\n    struct __user_cap_data_struct data;\n\n    hdr.version = _LINUX_CAPABILITY_VERSION;\n    hdr.pid = 0;\n\n    data.effective = 0;\n    data.permitted = 0;\n    data.inheritable = 0;\n\n    if (capset(&hdr, &data) < 0)\n        printf(\"capset failed\");\n\n    if (open(FILENAME, O_RDONLY) < 0)\n        printf(\"open failed\");\n\n    return 0;\n}\n```\n\nChange the `FILENAME` accordingly for your system and run it once with and once without `sudo`. Only without will work.\n\nNow that we know what the problem is, I'm not sure what the fix should be. On one hand, it sounds too invasive to disable that syscall. On the other hand, standalone nodejs doesn't do that by default when running under root.\n\nSome input from the maintainers would be highly appreciated. \n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/182882660",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-182882660",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 182882660,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-11T14:16:11Z",
    "updated_at": "2016-02-11T17:52:47Z",
    "body": "The sys call seems to proceed from chromium. There is a function called `Credentials::DropAllCapabilitiesOnCurrentThread()` that performs this:\n\n``` cpp\n// See https://code.google.com/p/chromium/codesearch#chromium/src/sandbox/linux/services/credentials.cc&q=DropAllCapabilitiesOnCurrentThread&sq=package:chromium&type=cs&l=173\n\n// static\nbool Credentials::DropAllCapabilitiesOnCurrentThread() {\n  return SetCapabilitiesOnCurrentThread(std::vector<Capability>());\n}\n\n// static\nbool Credentials::SetCapabilitiesOnCurrentThread(\n    const std::vector<Capability>& caps) {\n  struct cap_hdr hdr = {};\n  hdr.version = _LINUX_CAPABILITY_VERSION_3;\n  struct cap_data data[_LINUX_CAPABILITY_U32S_3] = {{}};\n\n  // Initially, cap has no capability flags set. Enable the effective and\n  // permitted flags only for the requested capabilities.\n  for (const Capability cap : caps) {\n    const int cap_num = CapabilityToKernelValue(cap);\n    const size_t index = CAP_TO_INDEX(cap_num);\n    const uint32_t mask = CAP_TO_MASK(cap_num);\n    data[index].effective |= mask;\n    data[index].permitted |= mask;\n  }\n\n  return sys_capset(&hdr, data) == 0;\n}\n```\n\nThis is itself used in a function called `Credentials::ForkAndDropCapabilitiesInChild`:\n\n``` cpp\n// See https://code.google.com/p/chromium/codesearch#chromium/src/sandbox/linux/services/credentials.cc&q=ForkAndDrop&sq=package:chromium&type=cs&l=325\n\npid_t Credentials::ForkAndDropCapabilitiesInChild() {\n  pid_t pid = fork();\n  if (pid != 0) {\n    return pid;\n  }\n\n  // Since we just forked, we are single threaded.\n  PCHECK(DropAllCapabilitiesOnCurrentThread());\n  return 0;\n}\n```\n\nWhich [is called by Zygote](https://code.google.com/p/chromium/codesearch#chromium/src/content/zygote/zygote_linux.cc&q=ForkAndDropCapabilitiesInChild&sq=package:chromium&type=cs&l=453), which drops capabilities independently of sandbox settings:\n\n``` cpp\n// See https://code.google.com/p/chromium/codesearch#chromium/src/content/zygote/zygote_linux.cc&q=ForkAndDropCapabilitiesInChild&sq=package:chromium&type=cs&l=448\n\nif (sandbox_flags_ & kSandboxLinuxPIDNS && sandbox_flags_ & kSandboxLinuxUserNS) {\n   pid = sandbox::NamespaceSandbox::ForkInNewPidNamespace(/*drop_capabilities_in_child=*/true);\n} else {\n   pid = sandbox::Credentials::ForkAndDropCapabilitiesInChild();\n}\n```\n\nI guess we could submit a patch to `libchromiumcontent` to not drop capabilities when sandbox is not enabled, although I'm not sure about the impact of such change.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/184671181",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-184671181",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 184671181,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-02-16T12:56:19Z",
    "updated_at": "2016-02-16T12:56:19Z",
    "body": "Awesome research on this! Patching the `ForkAndDropCapabilitiesInChild` code looks good to me, we are not using sandbox at all so it doesn't hurt to give more capabilities to renderer process.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/184923284",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-184923284",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 184923284,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-16T23:40:32Z",
    "updated_at": "2016-02-16T23:40:32Z",
    "body": "@zcbenz Do you have any instructions on how to build electron with a local checkout of `libchromiumcontent`? I've made my changes to `libchromiumcontent` but having problems following the nested `script/bootstrap` calls, and the fact that `brightray` always seems to call the download script.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/184978627",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-184978627",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 184978627,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-02-17T02:15:58Z",
    "updated_at": "2016-02-17T02:15:58Z",
    "body": "@jviotti You can find some instructions at https://github.com/atom/libchromiumcontent/issues/174#issuecomment-178409045, the key is to pass the `file://` URL to the bootstrap script.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/185506617",
    "html_url": "https://github.com/electron/electron/issues/3666#issuecomment-185506617",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3666",
    "id": 185506617,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-18T01:57:31Z",
    "updated_at": "2016-02-18T01:57:31Z",
    "body": "@zcbenz Thanks for the instructions. The patch seems to be working great! See https://github.com/atom/libchromiumcontent/pull/180\n"
  }
]