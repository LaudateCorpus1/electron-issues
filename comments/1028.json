[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70555576",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70555576",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70555576,
    "user": {
      "login": "paulcbetts",
      "id": 1396,
      "avatar_url": "https://avatars1.githubusercontent.com/u/1396?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulcbetts",
      "html_url": "https://github.com/paulcbetts",
      "followers_url": "https://api.github.com/users/paulcbetts/followers",
      "following_url": "https://api.github.com/users/paulcbetts/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulcbetts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulcbetts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulcbetts/subscriptions",
      "organizations_url": "https://api.github.com/users/paulcbetts/orgs",
      "repos_url": "https://api.github.com/users/paulcbetts/repos",
      "events_url": "https://api.github.com/users/paulcbetts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulcbetts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-19T20:29:57Z",
    "updated_at": "2015-01-19T20:35:40Z",
    "body": "Some more info, note that the Module filename flips from init.js to index.html:\n\nBefore Refresh:\n\n```\n>> require.main\n\n{  \n  id:\".\",\n  exports:Object,\n  parent:null,\n  filename:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h00….app/Contents/Resources/atom/renderer/lib/init.js\",\n  loaded:true  …\n}children:Array[  \n  4\n]0:Modulechildren:Array[  \n  2\n]exports:Objectfilename:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/atom/common/lib/init.js\"id:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/atom/common/lib/init.js\"loaded:trueparent:Modulepaths:Array[  \n  14\n]__proto__:Module1:Module2:Module3:Modulelength:4__proto__:Array[  \n  0\n]exports:Objectfilename:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/atom/renderer/lib/init.js\"id:\".\"loaded:trueparent:nullpaths:Array[  \n  14\n]0:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/atom/renderer/lib/node_modules\"1:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/atom/renderer/node_modules\"2:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/atom/node_modules\"3:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/node_modules\"4:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/node_modules\"5:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/node_modules\"6:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/node_modules\"7:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/node_modules\"8:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/node_modules\"9:\"/private/var/folders/_c/node_modules\"10:\"/private/var/folders/node_modules\"11:\"/private/var/node_modules\"12:\"/private/node_modules\"13:\"/node_modules\"length:14__proto__:Array[  \n  0\n]__proto__:Module\n}\n```\n\nAfter Refresh:\n\n```\n>> require.main\n\n{  \n  id:\".\",\n  exports:Object,\n  parent:null,\n  filename:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h00…lack.app/Contents/Resources/app/static/index.html\",\n  loaded:true  …\n}children:Array[  \n  9\n]exports:Objectfilename:\"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Resources/app/static/index.html\"id:\".\"loaded:trueparent:nullpaths:Array[  \n  27\n]__proto__:Module\n}\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70561531",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70561531",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70561531,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-01-19T21:11:44Z",
    "updated_at": "2015-01-19T21:11:44Z",
    "body": "@paulcbetts Can you also print the following variables at the beginning of app:\n- `window.location.protocol`\n- `process.argv`\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70576614",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70576614",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70576614,
    "user": {
      "login": "paulcbetts",
      "id": 1396,
      "avatar_url": "https://avatars1.githubusercontent.com/u/1396?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulcbetts",
      "html_url": "https://github.com/paulcbetts",
      "followers_url": "https://api.github.com/users/paulcbetts/followers",
      "following_url": "https://api.github.com/users/paulcbetts/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulcbetts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulcbetts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulcbetts/subscriptions",
      "organizations_url": "https://api.github.com/users/paulcbetts/orgs",
      "repos_url": "https://api.github.com/users/paulcbetts/repos",
      "events_url": "https://api.github.com/users/paulcbetts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulcbetts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-19T23:03:00Z",
    "updated_at": "2015-01-19T23:04:11Z",
    "body": "Before:\n\n```\n>> window.location.protocol\nfile:\n\n>> process.argv\n[  \n  \"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Frameworks/Slack Helper.app/Contents/MacOS/Slack Helper\",\n  \"--type=renderer\",\n  \"--js-flags=--harmony\",\n  \"--no-sandbox\",\n  \"--enable-deferred-image-decoding\",\n  \"--lang=English\",\n  \"--node-integration=true\",\n  \"--subpixel-font-scaling=false\",\n  \"--enable-delegated-renderer\",\n  \"--enable-impl-side-painting\",\n  \"--num-raster-threads=1\",\n  \"--disable-accelerated-video-decode\",\n  \"--channel=6140.1.277471217\"\n]\n```\n\nAfter:\n\n```\n>> window.location.protocol\nfile:\n\n>> process.argv\n[  \n  \"/private/var/folders/_c/hwfdpfg168s0tl7dlqzfrf_h0000gn/T/slack-build/Slack.app/Contents/Frameworks/Slack Helper.app/Contents/MacOS/Slack Helper\",\n  \"--type=renderer\",\n  \"--js-flags=--harmony\",\n  \"--no-sandbox\",\n  \"--enable-deferred-image-decoding\",\n  \"--lang=English\",\n  \"--node-integration=true\",\n  \"--subpixel-font-scaling=false\",\n  \"--enable-delegated-renderer\",\n  \"--enable-impl-side-painting\",\n  \"--num-raster-threads=1\",\n  \"--disable-accelerated-video-decode\",\n  \"--channel=6140.5.40585886\"\n]\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70583035",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70583035",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70583035,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-01-20T00:07:03Z",
    "updated_at": "2015-01-20T00:07:03Z",
    "body": "I can not find out why this happened, it seems that the [code to inject module search paths](https://github.com/atom/atom-shell/blob/master/atom/renderer/lib/init.coffee#L59-L72) didn't execute, but according to your output this should not happen. Can you debug locally whether the code in the link has executed?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70584047",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70584047",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70584047,
    "user": {
      "login": "paulcbetts",
      "id": 1396,
      "avatar_url": "https://avatars1.githubusercontent.com/u/1396?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulcbetts",
      "html_url": "https://github.com/paulcbetts",
      "followers_url": "https://api.github.com/users/paulcbetts/followers",
      "following_url": "https://api.github.com/users/paulcbetts/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulcbetts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulcbetts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulcbetts/subscriptions",
      "organizations_url": "https://api.github.com/users/paulcbetts/orgs",
      "repos_url": "https://api.github.com/users/paulcbetts/repos",
      "events_url": "https://api.github.com/users/paulcbetts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulcbetts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-20T00:18:58Z",
    "updated_at": "2015-01-20T00:18:58Z",
    "body": "@zcbenz Is there a trick to break in super early and trace through that stuff? Does the node-debugger stuff work still?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70584686",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70584686",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70584686,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-01-20T00:26:00Z",
    "updated_at": "2015-01-20T00:26:00Z",
    "body": "Using [node-inspector to debug](https://github.com/atom/atom-shell/blob/master/docs/tutorial/debugging-browser-process.md) used to work, but with recent updates of V8 it is not working now. I'm afraid you have to use `console.log` to trace now.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70756348",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70756348",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70756348,
    "user": {
      "login": "paulcbetts",
      "id": 1396,
      "avatar_url": "https://avatars1.githubusercontent.com/u/1396?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulcbetts",
      "html_url": "https://github.com/paulcbetts",
      "followers_url": "https://api.github.com/users/paulcbetts/followers",
      "following_url": "https://api.github.com/users/paulcbetts/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulcbetts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulcbetts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulcbetts/subscriptions",
      "organizations_url": "https://api.github.com/users/paulcbetts/orgs",
      "repos_url": "https://api.github.com/users/paulcbetts/repos",
      "events_url": "https://api.github.com/users/paulcbetts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulcbetts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-20T23:29:27Z",
    "updated_at": "2015-01-20T23:30:00Z",
    "body": "@zcbenz It looks like at the time that code is executing, `window.location` points to \"about:blank\". However, if I save off `window.location` then examine it later, it's a file URI.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70757541",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70757541",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70757541,
    "user": {
      "login": "paulcbetts",
      "id": 1396,
      "avatar_url": "https://avatars1.githubusercontent.com/u/1396?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulcbetts",
      "html_url": "https://github.com/paulcbetts",
      "followers_url": "https://api.github.com/users/paulcbetts/followers",
      "following_url": "https://api.github.com/users/paulcbetts/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulcbetts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulcbetts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulcbetts/subscriptions",
      "organizations_url": "https://api.github.com/users/paulcbetts/orgs",
      "repos_url": "https://api.github.com/users/paulcbetts/repos",
      "events_url": "https://api.github.com/users/paulcbetts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulcbetts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-20T23:39:32Z",
    "updated_at": "2015-01-20T23:39:32Z",
    "body": "It looks like this bug is a race condition in the renderer between Chromium and `NodeBindings::CreateEnvironment`, where we're trying to access `window.location` too early, before we've actually started to load the page. \n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/70759060",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-70759060",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 70759060,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-01-20T23:52:30Z",
    "updated_at": "2015-01-20T23:52:30Z",
    "body": "The node environment is created in `DidCreateScriptContext` in atom-shell, it seems that the page is not guaranteed to load at this point, I'll move the initialization code to `DidCreateDocumentElement` and see if it works.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/71295689",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-71295689",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 71295689,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-01-24T02:07:59Z",
    "updated_at": "2015-01-24T02:08:07Z",
    "body": "I found that this happens when the user sends a message to web contents immediately after loading url, like this:\n\n``` javascript\nmyWindow.loadUrl('http://github.com');\nmyWindow.webContents.send('message');\n```\n\nIt also influences `<webview>` under some conditions.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/71517032",
    "html_url": "https://github.com/electron/electron/issues/1028#issuecomment-71517032",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1028",
    "id": 71517032,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-01-26T19:03:41Z",
    "updated_at": "2015-01-26T19:03:41Z",
    "body": "Fixed by #1044.\n"
  }
]