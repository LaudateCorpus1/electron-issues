[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/277117534",
    "html_url": "https://github.com/electron/electron/issues/8563#issuecomment-277117534",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8563",
    "id": 277117534,
    "user": {
      "login": "groundwater",
      "id": 538488,
      "avatar_url": "https://avatars3.githubusercontent.com/u/538488?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/groundwater",
      "html_url": "https://github.com/groundwater",
      "followers_url": "https://api.github.com/users/groundwater/followers",
      "following_url": "https://api.github.com/users/groundwater/following{/other_user}",
      "gists_url": "https://api.github.com/users/groundwater/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/groundwater/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/groundwater/subscriptions",
      "organizations_url": "https://api.github.com/users/groundwater/orgs",
      "repos_url": "https://api.github.com/users/groundwater/repos",
      "events_url": "https://api.github.com/users/groundwater/events{/privacy}",
      "received_events_url": "https://api.github.com/users/groundwater/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-02T23:26:02Z",
    "updated_at": "2017-02-02T23:26:02Z",
    "body": "Hi @alexstrat, this does appear to be a bug, but it may take some time to track it down. A few options that might help in the mean time.\r\n\r\n1. Can you reproduce this on 1.4.15, our latest stable release?\r\n2. Can you reproduce this on 1.5.0, our latest beta?\r\n\r\nIt appears the crashed tread is doing Geolocation:\r\n\r\n1. are you use that feature?\r\n2. can you describe how you're using it?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/277126164",
    "html_url": "https://github.com/electron/electron/issues/8563#issuecomment-277126164",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8563",
    "id": 277126164,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-03T00:10:18Z",
    "updated_at": "2017-02-03T00:10:18Z",
    "body": "I mapped the symbols from the crash, here is the top of the stack from the crashed thread:\r\n\r\n```\r\ncontent::RenderProcessHostImpl::Cleanup() (render_process_host_impl.cc:1908)\r\ncontent::ServiceWorkerProcessManager::Shutdown() (__tree:165)\r\ncontent::ServiceWorkerContextWrapper::Shutdown() (service_worker_context_wrapper.cc:143)\r\ncontent::StoragePartitionImpl::~StoragePartitionImpl() (storage_partition_impl.cc:419)\r\ncontent::StoragePartitionImpl::~StoragePartitionImpl() (storage_partition_impl.cc:398)\r\ncontent::StoragePartitionImplMap::~StoragePartitionImplMap() (stl_util.h:86)\r\ncontent::StoragePartitionImplMap::~StoragePartitionImplMap() (storage_partition_impl_map.cc:380)\r\nstd::__1::__tree<std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > >, std::__1::__map_value_compare<void const*, std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > >, std::__1::less<void const*>, true>, std::__1::allocator<std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > > > >::destroy(std::__1::__tree_node<std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > >, void*>*) (new:176)\r\nstd::__1::__tree<std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > >, std::__1::__map_value_compare<void const*, std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > >, std::__1::less<void const*>, true>, std::__1::allocator<std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > > > >::destroy(std::__1::__tree_node<std::__1::__value_type<void const*, std::__1::unique_ptr<base::SupportsUserData::Data, std::__1::default_delete<base::SupportsUserData::Data> > >, void*>*) (__tree:1718)\r\nbase::SupportsUserData::~SupportsUserData() (__tree:1001)\r\ncontent::BrowserContext::~BrowserContext() (browser_context.cc:491)\r\nbrightray::BrowserContext::~BrowserContext() (browser_context.cc:107)\r\n```"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/277138306",
    "html_url": "https://github.com/electron/electron/issues/8563#issuecomment-277138306",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8563",
    "id": 277138306,
    "user": {
      "login": "groundwater",
      "id": 538488,
      "avatar_url": "https://avatars3.githubusercontent.com/u/538488?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/groundwater",
      "html_url": "https://github.com/groundwater",
      "followers_url": "https://api.github.com/users/groundwater/followers",
      "following_url": "https://api.github.com/users/groundwater/following{/other_user}",
      "gists_url": "https://api.github.com/users/groundwater/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/groundwater/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/groundwater/subscriptions",
      "organizations_url": "https://api.github.com/users/groundwater/orgs",
      "repos_url": "https://api.github.com/users/groundwater/repos",
      "events_url": "https://api.github.com/users/groundwater/events{/privacy}",
      "received_events_url": "https://api.github.com/users/groundwater/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-03T01:22:19Z",
    "updated_at": "2017-02-03T01:22:19Z",
    "body": "👍 @kevinsawicki can you document how you mapped the symbols for reference?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/277216299",
    "html_url": "https://github.com/electron/electron/issues/8563#issuecomment-277216299",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8563",
    "id": 277216299,
    "user": {
      "login": "alexstrat",
      "id": 687961,
      "avatar_url": "https://avatars0.githubusercontent.com/u/687961?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexstrat",
      "html_url": "https://github.com/alexstrat",
      "followers_url": "https://api.github.com/users/alexstrat/followers",
      "following_url": "https://api.github.com/users/alexstrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexstrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexstrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexstrat/subscriptions",
      "organizations_url": "https://api.github.com/users/alexstrat/orgs",
      "repos_url": "https://api.github.com/users/alexstrat/repos",
      "events_url": "https://api.github.com/users/alexstrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexstrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-03T10:36:48Z",
    "updated_at": "2017-02-03T10:37:32Z",
    "body": "@groundwater as I explained, I can't constantly reproduce. But I'll ship a version of my app with 1.4.15 and ask my (modest) user-base to report improvements (or not). For 1.5.0, since it's still in beta, I won't risk it but will give a try if no results with 1.4.15 .\r\n\r\n> It appears the crashed tread is doing Geolocation: are you use that feature?\r\n\r\n_apriori_ I'm not using that feature, but, as I explained, I'm loading different websites in `webviews` (like a web browser). So, it may one of those websites use geolocation. Is there a quick way to check this? Do you have something in mind I could try to track down?\r\n\r\nNote also, that I'm doing something unusual on app-quit that can be a cause. Even if I've done that since long on my app and was not a problem apriori:\r\n\r\n```js\r\n// Delay app quiting to let some times for\r\n// analytics to flush its queue\r\nlet askedToQuit = false;\r\napp.on('will-quit', (e) => {\r\n  if (!askedToQuit) {\r\n    askedToQuit = true;\r\n\t\r\n    // prevents ap to quit\r\n    e.preventDefault();\r\n\t\r\n    // flush at next tick to let some time to other trackings\r\n    setImmediate(() =>\r\n      analytics.flush(() => app.quit())\r\n    );\r\n  }\r\n});\r\n```\r\n\r\n@kevinsawicki does the stack-trace you mapped give any more insights?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/277227964",
    "html_url": "https://github.com/electron/electron/issues/8563#issuecomment-277227964",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8563",
    "id": 277227964,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-03T11:40:30Z",
    "updated_at": "2017-02-03T11:40:30Z",
    "body": "You can reproduce by loading any site that uses service worker, our browser context should destroy cleanly by calling `content::BrowserContext::NotifyWillBeDestroyed` https://codereview.chromium.org/653633004 and `content::BrowserContext::ShutdownStoragePartitions` https://codereview.chromium.org/2159133002 to fix this."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/277252002",
    "html_url": "https://github.com/electron/electron/issues/8563#issuecomment-277252002",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8563",
    "id": 277252002,
    "user": {
      "login": "alexstrat",
      "id": 687961,
      "avatar_url": "https://avatars0.githubusercontent.com/u/687961?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexstrat",
      "html_url": "https://github.com/alexstrat",
      "followers_url": "https://api.github.com/users/alexstrat/followers",
      "following_url": "https://api.github.com/users/alexstrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexstrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexstrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexstrat/subscriptions",
      "organizations_url": "https://api.github.com/users/alexstrat/orgs",
      "repos_url": "https://api.github.com/users/alexstrat/repos",
      "events_url": "https://api.github.com/users/alexstrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexstrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-03T13:56:36Z",
    "updated_at": "2017-02-03T14:03:57Z",
    "body": "@deepak1556 I tried to isolate the problem you mention in a simple electron app using service-workers (https://github.com/alexstrat/electron-boilerplate/pull/1) but I was not able to reproduce the issue: the app runs and quits normally.\r\n\r\nNote: I tried with SWs in webview too (https://github.com/alexstrat/electron-boilerplate/pull/2): same result."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/278920276",
    "html_url": "https://github.com/electron/electron/issues/8563#issuecomment-278920276",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8563",
    "id": 278920276,
    "user": {
      "login": "alexstrat",
      "id": 687961,
      "avatar_url": "https://avatars0.githubusercontent.com/u/687961?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexstrat",
      "html_url": "https://github.com/alexstrat",
      "followers_url": "https://api.github.com/users/alexstrat/followers",
      "following_url": "https://api.github.com/users/alexstrat/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexstrat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexstrat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexstrat/subscriptions",
      "organizations_url": "https://api.github.com/users/alexstrat/orgs",
      "repos_url": "https://api.github.com/users/alexstrat/repos",
      "events_url": "https://api.github.com/users/alexstrat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexstrat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-10T11:22:35Z",
    "updated_at": "2017-02-10T11:22:35Z",
    "body": "1.4.15 does not seem to make things work better for my user-base (even if crashes during runtime seem to have disappeared) and apparently it's reproducible in 1.6.0 (#8644)"
  }
]