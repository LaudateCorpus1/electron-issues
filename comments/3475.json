[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/157425419",
    "html_url": "https://github.com/electron/electron/issues/3475#issuecomment-157425419",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3475",
    "id": 157425419,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T16:38:43Z",
    "updated_at": "2015-11-17T16:38:43Z",
    "body": "After running the registerHttpProtocol now for a while electron crashed with the following log:\n\n```\n  method: 'POST',\n  referrer: '' }\n{ url: 'http://localhost:3050/sockjs/info?cb=iml3pgeom9',\n  method: 'GET',\n  referrer: '' }\nElectron(3296,0x7fff79a42000) malloc: *** mach_vm_map(size=4189037517031501824) failed (error code=3)\n*** error: can't allocate region\n*** set a breakpoint in malloc_error_break to debug\n[3296:1117/173627:FATAL:memory.cc(18)] Out of memory. size=4189037517031498112\n```\n\nAny idea?\n\nI was losing all the requests. This is all the code used:\n\n``` js\n\nprotocol.registerHttpProtocol('eth', function(request, callback) {\n\n    var call = {\n        url: 'http://localhost:3050/' + request.url.replace('eth://',''),\n        method: request.method,\n        referrer: request.referrer\n    };\n\n    console.log(call);\n\n    callback(call);\n\n}, function (error) {\n  if (error)\n    console.error('Failed to register protocol')\n});\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/157425990",
    "html_url": "https://github.com/electron/electron/issues/3475#issuecomment-157425990",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3475",
    "id": 157425990,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-17T16:40:50Z",
    "updated_at": "2015-11-17T16:40:50Z",
    "body": "It seems that my browser was creating a recursive loop, where the server was reloading the website constantly, but this shouldn't create a memory leak i guess.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/157607612",
    "html_url": "https://github.com/electron/electron/issues/3475#issuecomment-157607612",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3475",
    "id": 157607612,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-11-18T05:17:44Z",
    "updated_at": "2015-11-18T05:17:44Z",
    "body": "The recursive loop is very likely to be caused by other parts of your code, like intercepting `http` protocol while sending `http` requests in it. Is it the only place that used `protocol`?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/157647584",
    "html_url": "https://github.com/electron/electron/issues/3475#issuecomment-157647584",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3475",
    "id": 157647584,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-18T08:53:23Z",
    "updated_at": "2015-11-18T08:53:23Z",
    "body": "Yes i know why the recursive loop. But it shouldn't leak memory in any case, right?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/157655114",
    "html_url": "https://github.com/electron/electron/issues/3475#issuecomment-157655114",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3475",
    "id": 157655114,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-11-18T09:29:16Z",
    "updated_at": "2015-11-18T09:29:16Z",
    "body": "Entering recursive loop also consumes memory, it is just usually stack overflow happens faster than out of memory.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/157657533",
    "html_url": "https://github.com/electron/electron/issues/3475#issuecomment-157657533",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3475",
    "id": 157657533,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-11-18T09:38:32Z",
    "updated_at": "2015-11-18T09:38:32Z",
    "body": "Ok thanks.\n\nBut please fix the docs:\nhttps://github.com/atom/electron/blob/master/docs/api/protocol.md\n\nThe docs talk of a `referer` in registerHttpProtocol, i guess this should be `referrer`?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/157661987",
    "html_url": "https://github.com/electron/electron/issues/3475#issuecomment-157661987",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3475",
    "id": 157661987,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-11-18T09:56:33Z",
    "updated_at": "2015-11-18T09:56:33Z",
    "body": "@frozeman Yeah it should be `referrer`, thanks for finding it out, I'll do the fix.\n"
  }
]