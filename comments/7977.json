[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/261149224",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-261149224",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 261149224,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-11-17T03:58:48Z",
    "updated_at": "2016-11-17T03:58:48Z",
    "body": "I'm unable to reproduce, can you print some logging in your code to see whether `event.returnValue` is actually executed?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/262528220",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-262528220",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 262528220,
    "user": {
      "login": "yishn",
      "id": 9217349,
      "avatar_url": "https://avatars0.githubusercontent.com/u/9217349?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yishn",
      "html_url": "https://github.com/yishn",
      "followers_url": "https://api.github.com/users/yishn/followers",
      "following_url": "https://api.github.com/users/yishn/following{/other_user}",
      "gists_url": "https://api.github.com/users/yishn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yishn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yishn/subscriptions",
      "organizations_url": "https://api.github.com/users/yishn/orgs",
      "repos_url": "https://api.github.com/users/yishn/repos",
      "events_url": "https://api.github.com/users/yishn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yishn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-23T14:33:45Z",
    "updated_at": "2016-11-23T14:33:45Z",
    "body": "Hi, I have the same problem on Windows 10 with v1.4.7, and I could reproduce it with the following code, appended in the default app:\r\n\r\n~~~html\r\n<script>\r\n    let {dialog} = require('electron').remote\r\n\r\n    window.addEventListener('beforeunload', evt => {\r\n        let result = dialog.showMessageBox({\r\n            message: 'Quit app?',\r\n            buttons: ['Yes', 'No']\r\n        })\r\n\r\n        if (result == 1) evt.returnValue = false\r\n    })\r\n</script>\r\n~~~\r\n\r\nWhat I found out is this: If you want to close the window and click on the 'No' button *right away*, the close operation is canceled. But if you *wait ~3 sec* and then click 'No', the window closes anyway."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/262589661",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-262589661",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 262589661,
    "user": {
      "login": "Kagami",
      "id": 533383,
      "avatar_url": "https://avatars2.githubusercontent.com/u/533383?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kagami",
      "html_url": "https://github.com/Kagami",
      "followers_url": "https://api.github.com/users/Kagami/followers",
      "following_url": "https://api.github.com/users/Kagami/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kagami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kagami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kagami/subscriptions",
      "organizations_url": "https://api.github.com/users/Kagami/orgs",
      "repos_url": "https://api.github.com/users/Kagami/repos",
      "events_url": "https://api.github.com/users/Kagami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kagami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-23T18:06:13Z",
    "updated_at": "2016-11-23T18:06:13Z",
    "body": "Exactly same issue on Linux with electron 1.4.8.\r\n\r\n>click on the 'No' button right away, the close operation is canceled. But if you wait ~3 sec and then click 'No', the window closes anyway\r\n\r\nSame here."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/262591576",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-262591576",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 262591576,
    "user": {
      "login": "YsenGrimm",
      "id": 882186,
      "avatar_url": "https://avatars0.githubusercontent.com/u/882186?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/YsenGrimm",
      "html_url": "https://github.com/YsenGrimm",
      "followers_url": "https://api.github.com/users/YsenGrimm/followers",
      "following_url": "https://api.github.com/users/YsenGrimm/following{/other_user}",
      "gists_url": "https://api.github.com/users/YsenGrimm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/YsenGrimm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/YsenGrimm/subscriptions",
      "organizations_url": "https://api.github.com/users/YsenGrimm/orgs",
      "repos_url": "https://api.github.com/users/YsenGrimm/repos",
      "events_url": "https://api.github.com/users/YsenGrimm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/YsenGrimm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-23T18:14:14Z",
    "updated_at": "2016-11-23T18:16:57Z",
    "body": "I can reproduce the ~3 sec mark after which the return  value is ignored, as described by @yishn.\r\n\r\nAlso artificially pausing the render process with a ```while (true)  {} ``` loop inside the ```onbeforeunload``` event handler doesn't change the behavior. "
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/266255154",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-266255154",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 266255154,
    "user": {
      "login": "Kagami",
      "id": 533383,
      "avatar_url": "https://avatars2.githubusercontent.com/u/533383?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kagami",
      "html_url": "https://github.com/Kagami",
      "followers_url": "https://api.github.com/users/Kagami/followers",
      "following_url": "https://api.github.com/users/Kagami/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kagami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kagami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kagami/subscriptions",
      "organizations_url": "https://api.github.com/users/Kagami/orgs",
      "repos_url": "https://api.github.com/users/Kagami/repos",
      "events_url": "https://api.github.com/users/Kagami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kagami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-11T01:50:08Z",
    "updated_at": "2016-12-11T01:50:08Z",
    "body": "Any progress on this? Seems pretty important. Have you been able to reproduce, @zcbenz?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/267430262",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-267430262",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 267430262,
    "user": {
      "login": "yishn",
      "id": 9217349,
      "avatar_url": "https://avatars0.githubusercontent.com/u/9217349?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yishn",
      "html_url": "https://github.com/yishn",
      "followers_url": "https://api.github.com/users/yishn/followers",
      "following_url": "https://api.github.com/users/yishn/following{/other_user}",
      "gists_url": "https://api.github.com/users/yishn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yishn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yishn/subscriptions",
      "organizations_url": "https://api.github.com/users/yishn/orgs",
      "repos_url": "https://api.github.com/users/yishn/repos",
      "events_url": "https://api.github.com/users/yishn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yishn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-15T20:07:42Z",
    "updated_at": "2017-01-07T13:39:02Z",
    "body": "I've found a workaround for this problem if someone is interested in that:\r\n\r\n~~~js\r\nconst {remote} = require('electron')\r\nconst {dialog} = remote\r\n\r\nlet closeWindow = false\r\n\r\nwindow.addEventListener('beforeunload', evt => {\r\n    if (closeWindow) return\r\n\r\n    evt.returnValue = false\r\n\r\n    setTimeout(() => {\r\n        let result = dialog.showMessageBox({\r\n            message: 'Quit app?',\r\n            buttons: ['Yes', 'No']\r\n        })\r\n\r\n        if (result == 0) {\r\n            closeWindow = true\r\n            remote.getCurrentWindow().close()\r\n        }\r\n    })\r\n})\r\n~~~"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/267432469",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-267432469",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 267432469,
    "user": {
      "login": "Kagami",
      "id": 533383,
      "avatar_url": "https://avatars2.githubusercontent.com/u/533383?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kagami",
      "html_url": "https://github.com/Kagami",
      "followers_url": "https://api.github.com/users/Kagami/followers",
      "following_url": "https://api.github.com/users/Kagami/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kagami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kagami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kagami/subscriptions",
      "organizations_url": "https://api.github.com/users/Kagami/orgs",
      "repos_url": "https://api.github.com/users/Kagami/repos",
      "events_url": "https://api.github.com/users/Kagami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kagami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-15T20:16:51Z",
    "updated_at": "2016-12-15T20:40:18Z",
    "body": "That's smart, thanks! Will try.\r\n**UPDATE:** Works like a charm, thanks a lot, @yishn!"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/271085512",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-271085512",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 271085512,
    "user": {
      "login": "yishn",
      "id": 9217349,
      "avatar_url": "https://avatars0.githubusercontent.com/u/9217349?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yishn",
      "html_url": "https://github.com/yishn",
      "followers_url": "https://api.github.com/users/yishn/followers",
      "following_url": "https://api.github.com/users/yishn/following{/other_user}",
      "gists_url": "https://api.github.com/users/yishn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yishn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yishn/subscriptions",
      "organizations_url": "https://api.github.com/users/yishn/orgs",
      "repos_url": "https://api.github.com/users/yishn/repos",
      "events_url": "https://api.github.com/users/yishn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yishn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-07T14:02:23Z",
    "updated_at": "2017-01-07T14:02:23Z",
    "body": "It seems that my hack has a drawback on macOS: Quitting an app doesn't behave as expected. Since we always signal that the window closing has been cancelled the first time, the OS always assumes that we don't want to quit the app after all."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/272140585",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-272140585",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 272140585,
    "user": {
      "login": "astoilkov",
      "id": 884810,
      "avatar_url": "https://avatars0.githubusercontent.com/u/884810?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/astoilkov",
      "html_url": "https://github.com/astoilkov",
      "followers_url": "https://api.github.com/users/astoilkov/followers",
      "following_url": "https://api.github.com/users/astoilkov/following{/other_user}",
      "gists_url": "https://api.github.com/users/astoilkov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/astoilkov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/astoilkov/subscriptions",
      "organizations_url": "https://api.github.com/users/astoilkov/orgs",
      "repos_url": "https://api.github.com/users/astoilkov/repos",
      "events_url": "https://api.github.com/users/astoilkov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/astoilkov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-12T11:29:43Z",
    "updated_at": "2017-01-12T11:29:43Z",
    "body": "I am also experiencing the exact same problem. The issue starts to appear when you use `dialog.showMessageBox()`. Using `event.returnValue = false;` works every time.\r\n\r\n@zcbenz Are you still unable to replicate this? Maybe I can put some time making a project that showcases the problem."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281169451",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-281169451",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 281169451,
    "user": {
      "login": "Kagami",
      "id": 533383,
      "avatar_url": "https://avatars2.githubusercontent.com/u/533383?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kagami",
      "html_url": "https://github.com/Kagami",
      "followers_url": "https://api.github.com/users/Kagami/followers",
      "following_url": "https://api.github.com/users/Kagami/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kagami/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kagami/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kagami/subscriptions",
      "organizations_url": "https://api.github.com/users/Kagami/orgs",
      "repos_url": "https://api.github.com/users/Kagami/repos",
      "events_url": "https://api.github.com/users/Kagami/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kagami/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-20T20:00:31Z",
    "updated_at": "2017-02-20T20:00:31Z",
    "body": "@yishn it works for me on Sierra."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/282926986",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-282926986",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 282926986,
    "user": {
      "login": "badams",
      "id": 340715,
      "avatar_url": "https://avatars0.githubusercontent.com/u/340715?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/badams",
      "html_url": "https://github.com/badams",
      "followers_url": "https://api.github.com/users/badams/followers",
      "following_url": "https://api.github.com/users/badams/following{/other_user}",
      "gists_url": "https://api.github.com/users/badams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/badams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/badams/subscriptions",
      "organizations_url": "https://api.github.com/users/badams/orgs",
      "repos_url": "https://api.github.com/users/badams/repos",
      "events_url": "https://api.github.com/users/badams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/badams/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-28T02:56:07Z",
    "updated_at": "2017-02-28T02:56:07Z",
    "body": "I'm having the same issue on MacOS with the following code \r\n```\r\n    window.addEventListener('beforeunload', function (event) {\r\n        event.returnValue = confirm('Do you want to quit ?');\r\n    });\r\n```\r\n\r\nClicking cancel the first time works (most of the time) clicking cancel subsequent time closed the app."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/285635965",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-285635965",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 285635965,
    "user": {
      "login": "brrd",
      "id": 7335302,
      "avatar_url": "https://avatars0.githubusercontent.com/u/7335302?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brrd",
      "html_url": "https://github.com/brrd",
      "followers_url": "https://api.github.com/users/brrd/followers",
      "following_url": "https://api.github.com/users/brrd/following{/other_user}",
      "gists_url": "https://api.github.com/users/brrd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brrd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brrd/subscriptions",
      "organizations_url": "https://api.github.com/users/brrd/orgs",
      "repos_url": "https://api.github.com/users/brrd/repos",
      "events_url": "https://api.github.com/users/brrd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brrd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-10T10:38:16Z",
    "updated_at": "2017-03-10T10:38:16Z",
    "body": "I'm experiencing a similar issue. In my case (electron 1.6.2, ubuntu 14.04), this occurs when the window is closed with the `win.close()` or `app.quit()` methods. Everything work as expected when clicking the window native close button or when using the `\"role\": \"close\"` attribute in menu."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/299609012",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-299609012",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 299609012,
    "user": {
      "login": "Scazzino",
      "id": 25129490,
      "avatar_url": "https://avatars2.githubusercontent.com/u/25129490?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Scazzino",
      "html_url": "https://github.com/Scazzino",
      "followers_url": "https://api.github.com/users/Scazzino/followers",
      "following_url": "https://api.github.com/users/Scazzino/following{/other_user}",
      "gists_url": "https://api.github.com/users/Scazzino/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Scazzino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Scazzino/subscriptions",
      "organizations_url": "https://api.github.com/users/Scazzino/orgs",
      "repos_url": "https://api.github.com/users/Scazzino/repos",
      "events_url": "https://api.github.com/users/Scazzino/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Scazzino/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-06T02:04:16Z",
    "updated_at": "2017-05-06T02:34:52Z",
    "body": "I'm having the same problem. It works fine if I have the devtools open. But if I close the devtools then the the window closes even if I click the no button in a confirmation dialog triggered by onbeforeunload. My dialog confirmation returns true or false for should close on not to the onbeforeunload handler. I then set e.returnValue to that returned result. With the devtools open it works fine. With the devtools closed the window always closes regardless of what I return from the dialog. What's even weirder is that if I just set e.returnValue = false; directly, without using a confirmation dialog then it does prevent the window from closing whether the devtools are open or closed. So it appears to be some conflict between the combination of the main window, the devtools and the dialog window... I'm currently testing on Mac OS X El Capitan. Electron 1.6.2. I'm doing this in a renderer process. (BTW: Using yishn's method with a setTimeout and a flag to allow the window to close on the second close works.)\r\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/305113344",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-305113344",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 305113344,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-05-31T07:50:49Z",
    "updated_at": "2017-05-31T07:50:49Z",
    "body": "I'm unable to reproduce with following steps, a minimal app to reproduce this would be appreciated:\r\n\r\n1. Open default app of Electron v1.7.1\r\n2. Open devtools and run:\r\n```js\r\n    window.addEventListener('beforeunload', function (event) {\r\n        event.returnValue = confirm('Do you want to quit ?');\r\n    });\r\n```\r\n3. Close devtools\r\n4. Close window and dialog shows\r\n5. Click cancel and window keeps open\r\n6. Repeat 4-5"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/305122828",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-305122828",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 305122828,
    "user": {
      "login": "yishn",
      "id": 9217349,
      "avatar_url": "https://avatars0.githubusercontent.com/u/9217349?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yishn",
      "html_url": "https://github.com/yishn",
      "followers_url": "https://api.github.com/users/yishn/followers",
      "following_url": "https://api.github.com/users/yishn/following{/other_user}",
      "gists_url": "https://api.github.com/users/yishn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yishn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yishn/subscriptions",
      "organizations_url": "https://api.github.com/users/yishn/orgs",
      "repos_url": "https://api.github.com/users/yishn/repos",
      "events_url": "https://api.github.com/users/yishn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yishn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-05-31T08:32:22Z",
    "updated_at": "2017-05-31T08:32:22Z",
    "body": "I can still reproduce the issue with [my code](https://github.com/electron/electron/issues/7977#issuecomment-262528220) on Windows 10 and Electron v1.7.2.\r\n\r\n~~~js\r\nlet {dialog} = require('electron').remote\r\n\r\nwindow.addEventListener('beforeunload', evt => {\r\n    let result = dialog.showMessageBox({\r\n        message: 'Quit app?',\r\n        buttons: ['Yes', 'No']\r\n    })\r\n\r\n    if (result == 1) evt.returnValue = false\r\n})\r\n~~~\r\n\r\n>  If you want to close the window and click on the 'No' button *right away*, the close operation is canceled. But if you *wait ~3 sec* and then click 'No', the window closes anyway."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/309304623",
    "html_url": "https://github.com/electron/electron/issues/7977#issuecomment-309304623",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/7977",
    "id": 309304623,
    "user": {
      "login": "CoDanny",
      "id": 542760,
      "avatar_url": "https://avatars2.githubusercontent.com/u/542760?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CoDanny",
      "html_url": "https://github.com/CoDanny",
      "followers_url": "https://api.github.com/users/CoDanny/followers",
      "following_url": "https://api.github.com/users/CoDanny/following{/other_user}",
      "gists_url": "https://api.github.com/users/CoDanny/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CoDanny/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CoDanny/subscriptions",
      "organizations_url": "https://api.github.com/users/CoDanny/orgs",
      "repos_url": "https://api.github.com/users/CoDanny/repos",
      "events_url": "https://api.github.com/users/CoDanny/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CoDanny/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-18T21:38:01Z",
    "updated_at": "2017-06-18T21:41:44Z",
    "body": "@zcbenz it looks like the combination of the ```onbeforeunload``` event and using a ```dialog.ShowMessageBox``` in the handler to confirm the close is what's causing this to fail. Could try to looking that specific combo? It's still happening for me on 1.6.11\r\n\r\nIt's also important (to reproduce) to not respond to the dialog immediately. Wait 5 secs or so to respond."
  }
]