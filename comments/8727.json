[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281328659",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281328659",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281328659,
    "user": {
      "login": "juliangruber",
      "id": 10247,
      "avatar_url": "https://avatars1.githubusercontent.com/u/10247?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/juliangruber",
      "html_url": "https://github.com/juliangruber",
      "followers_url": "https://api.github.com/users/juliangruber/followers",
      "following_url": "https://api.github.com/users/juliangruber/following{/other_user}",
      "gists_url": "https://api.github.com/users/juliangruber/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/juliangruber/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juliangruber/subscriptions",
      "organizations_url": "https://api.github.com/users/juliangruber/orgs",
      "repos_url": "https://api.github.com/users/juliangruber/repos",
      "events_url": "https://api.github.com/users/juliangruber/events{/privacy}",
      "received_events_url": "https://api.github.com/users/juliangruber/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-21T12:16:15Z",
    "updated_at": "2017-02-21T12:16:15Z",
    "body": "BTW, the application in question depending on this is https://github.com/datproject/dat-desktop"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281352899",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281352899",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281352899,
    "user": {
      "login": "sindresorhus",
      "id": 170270,
      "avatar_url": "https://avatars2.githubusercontent.com/u/170270?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sindresorhus",
      "html_url": "https://github.com/sindresorhus",
      "followers_url": "https://api.github.com/users/sindresorhus/followers",
      "following_url": "https://api.github.com/users/sindresorhus/following{/other_user}",
      "gists_url": "https://api.github.com/users/sindresorhus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sindresorhus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sindresorhus/subscriptions",
      "organizations_url": "https://api.github.com/users/sindresorhus/orgs",
      "repos_url": "https://api.github.com/users/sindresorhus/repos",
      "events_url": "https://api.github.com/users/sindresorhus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sindresorhus/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-21T14:04:54Z",
    "updated_at": "2017-02-21T14:04:54Z",
    "body": "> Allow to unset the runtime override with an option to child_process.fork. I think @sindresorhus has requested this before too.\r\n\r\nYes, in https://github.com/electron/electron/issues/6656."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281531870",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281531870",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281531870,
    "user": {
      "login": "groundwater",
      "id": 538488,
      "avatar_url": "https://avatars3.githubusercontent.com/u/538488?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/groundwater",
      "html_url": "https://github.com/groundwater",
      "followers_url": "https://api.github.com/users/groundwater/followers",
      "following_url": "https://api.github.com/users/groundwater/following{/other_user}",
      "gists_url": "https://api.github.com/users/groundwater/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/groundwater/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/groundwater/subscriptions",
      "organizations_url": "https://api.github.com/users/groundwater/orgs",
      "repos_url": "https://api.github.com/users/groundwater/repos",
      "events_url": "https://api.github.com/users/groundwater/events{/privacy}",
      "received_events_url": "https://api.github.com/users/groundwater/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-22T00:50:30Z",
    "updated_at": "2017-02-22T00:50:30Z",
    "body": "Hi @juliangruber!\r\n\r\nSounds like there are a few things going on here. I wanted to weigh in before our team reviews it in more detail.\r\n\r\n1. Sounds like `node-gyp-build` is just looking in the wrong place because `runtime` is wrong, but this doesn't mean electron can't help.\r\n2. Judging by @sindresorhus's link to #6656, this sounds like a feature add. It looks like the issue was previously closed, but I wouldn't mind re-evaluating the needs.\r\n\r\nHaving said that, I wonder if you can back up a bit and outline what you're trying to solve with `child_process.fork`. Thanks!"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281532753",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281532753",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281532753,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-22T00:55:45Z",
    "updated_at": "2017-02-22T00:55:45Z",
    "body": "@juliangruber just to confirm, if you require the `.node` file directly from the forked process it does load correctly?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281644403",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281644403",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281644403,
    "user": {
      "login": "juliangruber",
      "id": 10247,
      "avatar_url": "https://avatars1.githubusercontent.com/u/10247?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/juliangruber",
      "html_url": "https://github.com/juliangruber",
      "followers_url": "https://api.github.com/users/juliangruber/followers",
      "following_url": "https://api.github.com/users/juliangruber/following{/other_user}",
      "gists_url": "https://api.github.com/users/juliangruber/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/juliangruber/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juliangruber/subscriptions",
      "organizations_url": "https://api.github.com/users/juliangruber/orgs",
      "repos_url": "https://api.github.com/users/juliangruber/repos",
      "events_url": "https://api.github.com/users/juliangruber/events{/privacy}",
      "received_events_url": "https://api.github.com/users/juliangruber/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-22T11:31:59Z",
    "updated_at": "2017-02-22T11:31:59Z",
    "body": "> Sounds like node-gyp-build is just looking in the wrong place because runtime is wrong, but this doesn't mean electron can't help.\r\n\r\ncorrect, some other native module libraries do work with fork as they don't care about the process runtime variable.\r\n\r\n> Having said that, I wonder if you can back up a bit and outline what you're trying to solve with child_process.fork. Thanks!\r\n\r\nI need those for cpu heavy background tasks that need to run in containers. In our app, you might replicate a 80gb archive and a few others at the same time, and handling that much data in JavaScript takes its toll on the CPU. We want it to run in a container so\r\n\r\n1) the UI stays responsive\r\n2) a native code error in the background task can't crash the app (this is really ours to fix, but extra decoupling helps anyway)\r\n3) we can shut down the background task cleanly (this also is ours to fix, but this works for now)\r\n\r\nWriting this I'm thinking \"duh, why not just use web workers\" but looking at https://github.com/electron/electron/issues/797 it looks like that's not an option (yet). We could also use Web Workers inside our libraries, so we only need to background pure JS code without native modules, but that's a lot more work and I'm not sure if that would even help.\r\n\r\n> @juliangruber just to confirm, if you require the .node file directly from the forked process it does load correctly?\r\n\r\nYes, that works.\r\n\r\nI wonder, is there another way to handle background tasks that I haven't considered yet, like creating one hidden window per task? (see https://github.com/johnhaley81/electron-background-task-app/blob/master/index.js for prior work)\r\n\r\nI'll see if I can use that to come up with a cleaner solution for now, and maybe that's even the preferred solution anyway?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281644841",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281644841",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281644841,
    "user": {
      "login": "juliangruber",
      "id": 10247,
      "avatar_url": "https://avatars1.githubusercontent.com/u/10247?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/juliangruber",
      "html_url": "https://github.com/juliangruber",
      "followers_url": "https://api.github.com/users/juliangruber/followers",
      "following_url": "https://api.github.com/users/juliangruber/following{/other_user}",
      "gists_url": "https://api.github.com/users/juliangruber/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/juliangruber/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juliangruber/subscriptions",
      "organizations_url": "https://api.github.com/users/juliangruber/orgs",
      "repos_url": "https://api.github.com/users/juliangruber/repos",
      "events_url": "https://api.github.com/users/juliangruber/events{/privacy}",
      "received_events_url": "https://api.github.com/users/juliangruber/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-22T11:33:53Z",
    "updated_at": "2017-02-22T11:33:53Z",
    "body": "Still, it would be great to be able to use fork for this, as there's a lot less orchestration to fork a process and it might be more resource efficient than creating a new hidden window."
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281717064",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281717064",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281717064,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-02-22T16:14:56Z",
    "updated_at": "2017-02-22T16:14:56Z",
    "body": "> Still, it would be great to be able to use fork for this, as there's a lot less orchestration to fork a process and it might be more resource efficient than creating a new hidden window.\r\n\r\nYou should be able to use `fork` for this if the check here: https://github.com/mafintosh/node-gyp-build/blob/282b044d2ae115b5f094c3a6417f4425da804442/index.js#L49-L52 accommodated the `ELECTRON_RUN_AS_NODE` env var, or supported some other explicit configuration that you could set in `child.js` before requiring anything.\r\n\r\nWould that solution work for you?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/281907789",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-281907789",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 281907789,
    "user": {
      "login": "juliangruber",
      "id": 10247,
      "avatar_url": "https://avatars1.githubusercontent.com/u/10247?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/juliangruber",
      "html_url": "https://github.com/juliangruber",
      "followers_url": "https://api.github.com/users/juliangruber/followers",
      "following_url": "https://api.github.com/users/juliangruber/following{/other_user}",
      "gists_url": "https://api.github.com/users/juliangruber/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/juliangruber/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juliangruber/subscriptions",
      "organizations_url": "https://api.github.com/users/juliangruber/orgs",
      "repos_url": "https://api.github.com/users/juliangruber/repos",
      "events_url": "https://api.github.com/users/juliangruber/events{/privacy}",
      "received_events_url": "https://api.github.com/users/juliangruber/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-23T06:33:24Z",
    "updated_at": "2017-02-23T06:33:24Z",
    "body": "@kevinsawicki thanks for digging in, yeah that works for me!"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/289939801",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-289939801",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 289939801,
    "user": {
      "login": "bcomnes",
      "id": 166301,
      "avatar_url": "https://avatars2.githubusercontent.com/u/166301?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bcomnes",
      "html_url": "https://github.com/bcomnes",
      "followers_url": "https://api.github.com/users/bcomnes/followers",
      "following_url": "https://api.github.com/users/bcomnes/following{/other_user}",
      "gists_url": "https://api.github.com/users/bcomnes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bcomnes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bcomnes/subscriptions",
      "organizations_url": "https://api.github.com/users/bcomnes/orgs",
      "repos_url": "https://api.github.com/users/bcomnes/repos",
      "events_url": "https://api.github.com/users/bcomnes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bcomnes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-28T23:51:37Z",
    "updated_at": "2017-03-28T23:51:37Z",
    "body": "I ran into this today trying to fork to a process that used sqlite3 which is based on node-pre-gyp.  Opened an issue there to see if they can do something similar to node-gyp-build's solution: https://github.com/mapbox/node-pre-gyp/issues/278"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/289953622",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-289953622",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 289953622,
    "user": {
      "login": "bcomnes",
      "id": 166301,
      "avatar_url": "https://avatars2.githubusercontent.com/u/166301?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bcomnes",
      "html_url": "https://github.com/bcomnes",
      "followers_url": "https://api.github.com/users/bcomnes/followers",
      "following_url": "https://api.github.com/users/bcomnes/following{/other_user}",
      "gists_url": "https://api.github.com/users/bcomnes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bcomnes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bcomnes/subscriptions",
      "organizations_url": "https://api.github.com/users/bcomnes/orgs",
      "repos_url": "https://api.github.com/users/bcomnes/repos",
      "events_url": "https://api.github.com/users/bcomnes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bcomnes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-29T01:21:52Z",
    "updated_at": "2017-03-29T01:21:52Z",
    "body": "I made a naive fix for node-pre-gyp: https://github.com/mapbox/node-pre-gyp/pull/279/files Does that look like the right solution to everyone else?"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/307718013",
    "html_url": "https://github.com/electron/electron/issues/8727#issuecomment-307718013",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/8727",
    "id": 307718013,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2017-06-12T08:03:57Z",
    "updated_at": "2017-06-12T08:03:57Z",
    "body": "I'm closing this since the behavior is expected that `fork` provides an exact environment with Node, and there is a workaround to this issue."
  }
]