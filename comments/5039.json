[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/205963053",
    "html_url": "https://github.com/electron/electron/issues/5039#issuecomment-205963053",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5039",
    "id": 205963053,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-05T19:42:30Z",
    "updated_at": "2016-04-05T19:42:30Z",
    "body": "By looking at the source code, I see that Electron internally calls `xdg-open`. Running `xdg-open` as `root` is probably not a good idea (I'm not surprised that it doesn't work), however I wonder if we could still workaround this, at least for consistency with the other platforms.\n\nWe can find the original username with `who am i`, in case he used `sudo` to run the Electron app, and prepend `sudo -u <user>` to the command in `platform_util_linux.cc`.\n\nThere also exists the possibility of a user running a desktop environment as `root`, in which case running `xdg-open` as another user wouldn't be the expected result, although in that case `who am i` would return `root`, and `sudo -u root xdg-open` should lead to the expected results in any case.\n\nPotentially, we can check the result of `who am i`, and if it equals the current user, don't prepend the `sudo` part at all.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/205963752",
    "html_url": "https://github.com/electron/electron/issues/5039#issuecomment-205963752",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5039",
    "id": 205963752,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-05T19:45:06Z",
    "updated_at": "2016-04-05T19:45:06Z",
    "body": "[node-open](https://github.com/pwnall/node-open) covers this edge case very nicely by checking the `SUDO_USER` environment variable:\n\n``` js\n// See https://github.com/pwnall/node-open/blob/master/lib/open.js#L55\n\nif (process.env.SUDO_USER) {\n    opener = 'sudo -u ' + process.env.SUDO_USER + ' ' + opener;\n}\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/206622107",
    "html_url": "https://github.com/electron/electron/issues/5039#issuecomment-206622107",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5039",
    "id": 206622107,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-04-06T23:39:05Z",
    "updated_at": "2016-04-06T23:39:05Z",
    "body": "I believe this is a duplicate of #4916, closing this out here.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/206625936",
    "html_url": "https://github.com/electron/electron/issues/5039#issuecomment-206625936",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5039",
    "id": 206625936,
    "user": {
      "login": "jviotti",
      "id": 2192773,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2192773?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jviotti",
      "html_url": "https://github.com/jviotti",
      "followers_url": "https://api.github.com/users/jviotti/followers",
      "following_url": "https://api.github.com/users/jviotti/following{/other_user}",
      "gists_url": "https://api.github.com/users/jviotti/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jviotti/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jviotti/subscriptions",
      "organizations_url": "https://api.github.com/users/jviotti/orgs",
      "repos_url": "https://api.github.com/users/jviotti/repos",
      "events_url": "https://api.github.com/users/jviotti/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jviotti/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-06T23:58:51Z",
    "updated_at": "2016-04-06T23:58:51Z",
    "body": "@kevinsawicki The issue that you linked to talks about `xdg-open` freezing the app because it doesn't return right away (notice it does open the resource). What I'm reporting here is that `xdg-open` freezes the app because its not running as the correct user (without opening the resource at all).\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/206626611",
    "html_url": "https://github.com/electron/electron/issues/5039#issuecomment-206626611",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5039",
    "id": 206626611,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-04-07T00:01:42Z",
    "updated_at": "2016-04-07T00:01:42Z",
    "body": "Ah okay, sorry about that, they seemed very similar at first.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/207223566",
    "html_url": "https://github.com/electron/electron/issues/5039#issuecomment-207223566",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5039",
    "id": 207223566,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-04-08T05:36:43Z",
    "updated_at": "2016-04-08T05:36:43Z",
    "body": "The problem is not with Electron or root, it is Chrome. When your browser is Chrome, `sudo xdg-open` would block forever, because `sudo chromium-browser` blocks, I didn't try other browsers but they probably have the same problem.\n\nThe same thing will happen when you use other users with `sudo`, so unless you can know the user of current shell, you can never really fix this. The only workaround we can do, I think is to make `openExternal` not blocking, which makes this issue a duplicate of #4916.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/207546900",
    "html_url": "https://github.com/electron/electron/issues/5039#issuecomment-207546900",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5039",
    "id": 207546900,
    "user": {
      "login": "Tyriar",
      "id": 2193314,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2193314?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Tyriar",
      "html_url": "https://github.com/Tyriar",
      "followers_url": "https://api.github.com/users/Tyriar/followers",
      "following_url": "https://api.github.com/users/Tyriar/following{/other_user}",
      "gists_url": "https://api.github.com/users/Tyriar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Tyriar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Tyriar/subscriptions",
      "organizations_url": "https://api.github.com/users/Tyriar/orgs",
      "repos_url": "https://api.github.com/users/Tyriar/repos",
      "events_url": "https://api.github.com/users/Tyriar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Tyriar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-04-08T18:25:13Z",
    "updated_at": "2016-04-08T18:25:13Z",
    "body": "@zcbenz so the new API would be `shell.openExternal(string[, options], callback)` then?\n"
  }
]