[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/53371911",
    "html_url": "https://github.com/electron/electron/issues/527#issuecomment-53371911",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/527",
    "id": 53371911,
    "user": {
      "login": "ConnorKrammer",
      "id": 1044441,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1044441?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ConnorKrammer",
      "html_url": "https://github.com/ConnorKrammer",
      "followers_url": "https://api.github.com/users/ConnorKrammer/followers",
      "following_url": "https://api.github.com/users/ConnorKrammer/following{/other_user}",
      "gists_url": "https://api.github.com/users/ConnorKrammer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ConnorKrammer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ConnorKrammer/subscriptions",
      "organizations_url": "https://api.github.com/users/ConnorKrammer/orgs",
      "repos_url": "https://api.github.com/users/ConnorKrammer/repos",
      "events_url": "https://api.github.com/users/ConnorKrammer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ConnorKrammer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-26T03:42:12Z",
    "updated_at": "2014-08-26T03:42:12Z",
    "body": "I find myself in need of Menu.remove() as well. @zcbenz any thoughts? I'd be willing to hack on this, if you tell me what's needed.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/54244599",
    "html_url": "https://github.com/electron/electron/issues/527#issuecomment-54244599",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/527",
    "id": 54244599,
    "user": {
      "login": "ConnorKrammer",
      "id": 1044441,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1044441?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ConnorKrammer",
      "html_url": "https://github.com/ConnorKrammer",
      "followers_url": "https://api.github.com/users/ConnorKrammer/followers",
      "following_url": "https://api.github.com/users/ConnorKrammer/following{/other_user}",
      "gists_url": "https://api.github.com/users/ConnorKrammer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ConnorKrammer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ConnorKrammer/subscriptions",
      "organizations_url": "https://api.github.com/users/ConnorKrammer/orgs",
      "repos_url": "https://api.github.com/users/ConnorKrammer/repos",
      "events_url": "https://api.github.com/users/ConnorKrammer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ConnorKrammer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-09-03T02:27:00Z",
    "updated_at": "2014-09-03T02:27:00Z",
    "body": "@zcbenz what do you think? Or is this another limitation of Chromium?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/54702435",
    "html_url": "https://github.com/electron/electron/issues/527#issuecomment-54702435",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/527",
    "id": 54702435,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2014-09-06T04:43:49Z",
    "updated_at": "2014-09-06T04:43:49Z",
    "body": "Yeah this is also a limitation of Chromium.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/95021255",
    "html_url": "https://github.com/electron/electron/issues/527#issuecomment-95021255",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/527",
    "id": 95021255,
    "user": {
      "login": "jwu",
      "id": 174891,
      "avatar_url": "https://avatars2.githubusercontent.com/u/174891?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jwu",
      "html_url": "https://github.com/jwu",
      "followers_url": "https://api.github.com/users/jwu/followers",
      "following_url": "https://api.github.com/users/jwu/following{/other_user}",
      "gists_url": "https://api.github.com/users/jwu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jwu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jwu/subscriptions",
      "organizations_url": "https://api.github.com/users/jwu/orgs",
      "repos_url": "https://api.github.com/users/jwu/repos",
      "events_url": "https://api.github.com/users/jwu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jwu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-04-22T04:00:36Z",
    "updated_at": "2015-04-22T04:05:16Z",
    "body": "Well since we all known Chromium have this limitation, I found a way to work around with this. I paste my code here so that people can follow the way to get around it. \n\nMy solution is to rebuild the menu except the item you specified by path. Let's say, you have a menu item  in the menu path: foo/bar/foobar, and when you run `Editor.MainMenu.remove('foo/bar/foobar')`, it will clone the exists Menu, except the one you wish to get rid of.\n\nThe code to do this:\n\n``` javascript\nvar Path = require('fire-path');\nvar Editor = require('fire-editor')\nvar Editor.JS = require('js-utils');\n\nfunction _cloneMenuItemLevel1 ( menuItem ) {\n    var options = Editor.JS.extract( menuItem, [\n        'click',\n        'selector',\n        'type',\n        'label',\n        'sublabel',\n        'accelerator',\n        'icon',\n        'enabled',\n        'visible',\n        'checked',\n        // 'submenu', // NOTE: never clone submenu, other wise we can't change item inside it\n        'id',\n        'position',\n    ]);\n    if ( options.type === 'submenu' ) {\n        options.submenu = new Menu();\n    }\n    return new MenuItem(options);\n}\n\nfunction _cloneMenuExcept ( newMenu, nativeMenu, exceptPath, curPath ) {\n    var result = false;\n\n    for ( var i = 0; i < nativeMenu.items.length; ++i ) {\n        var menuItem = nativeMenu.items[i];\n        var path = Path.join( curPath, menuItem.label );\n\n        if ( Path.contains( path, exceptPath ) ) {\n            if ( path === exceptPath ) {\n                result = true;\n                continue;\n            }\n\n            var newMenuItem = _cloneMenuItemLevel1(menuItem);\n            if ( newMenuItem.type === 'submenu' ) {\n                var removed = _cloneMenuExcept( newMenuItem.submenu,\n                                                menuItem.submenu,\n                                                exceptPath,\n                                                path );\n                if ( removed ) result = removed;\n            }\n            newMenu.append(newMenuItem);\n        }\n        else {\n            newMenu.append(menuItem);\n        }\n    }\n\n    return result;\n}\n\n// base on electron#527 said, there is no simple way to remove menu item\n// https://github.com/atom/electron/issues/527\nMainMenu.remove = function ( path ) {\n    var newMenu = new Menu();\n    var removed = _cloneMenuExcept( newMenu, this.nativeMenu, path, '' );\n\n    if ( !removed ) {\n        Editor.error('Failed to remove menu in path: %s, can not find it', path );\n        return false;\n    }\n\n    // apply to main menu\n    Menu.setApplicationMenu(newMenu);\n\n    return true;\n};\n```\n\nThe 'fire-path' is just a io.js path module with Path.contains( pathA, pathB ) support, which used in above code, I put the implementation below. And the Editor.JS.extract is just a easy function to copy the properties you want from the oldMenuItem, so I guess you can modify it to your own.\n\n``` javascript\n// pathA = foo/bar,         pathB = foo/bar/foobar, return true\n// pathA = foo/bar,         pathB = foo/bar,        return true\n// pathA = foo/bar/foobar,  pathB = foo/bar,        return false\n// pathA = foo/bar/foobar,  pathB = foobar/bar/foo, return false\nFirePath.contains = function ( pathA, pathB ) {\n    pathA = FirePath.stripSep(pathA);\n    pathB = FirePath.stripSep(pathB);\n\n    //\n    if ( pathA === pathB ) {\n        return true;\n    }\n\n    // never compare files\n    if ( Path.dirname(pathA) === Path.dirname(pathB) ) {\n        return false;\n    }\n\n    if ( pathA.length < pathB.length &&\n         pathB.indexOf (pathA) === 0 )\n    {\n        return true;\n    }\n\n    return false;\n};\n```\n\nI test these in my editor-framework for a couple of days, and it works well, hope this can help you.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/240503485",
    "html_url": "https://github.com/electron/electron/issues/527#issuecomment-240503485",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/527",
    "id": 240503485,
    "user": {
      "login": "bsclifton",
      "id": 4733304,
      "avatar_url": "https://avatars0.githubusercontent.com/u/4733304?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bsclifton",
      "html_url": "https://github.com/bsclifton",
      "followers_url": "https://api.github.com/users/bsclifton/followers",
      "following_url": "https://api.github.com/users/bsclifton/following{/other_user}",
      "gists_url": "https://api.github.com/users/bsclifton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bsclifton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bsclifton/subscriptions",
      "organizations_url": "https://api.github.com/users/bsclifton/orgs",
      "repos_url": "https://api.github.com/users/bsclifton/repos",
      "events_url": "https://api.github.com/users/bsclifton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bsclifton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-17T18:28:51Z",
    "updated_at": "2016-08-17T18:30:27Z",
    "body": "I recently spent a lot of time investigating this and found a solution that worked for me.  For [our project](https://github.com/brave/browser-laptop), we have static menus like:\n- File\n- Edit\n\nand menus which are dynamic and change:\n- History\n- Bookmarks\n\nHere's how I solved it for us:\n\n1) Use the current menu handle and find the MenuItem object for the parent menu (ex: History)\n2) Note that MenuItem has a submenu object, which is also of type menu\n3) Call clear() on that submenu\n4) Re-add the child menu items using submenu.append()\n5) Call Menu.setApplicationMenu with your modified top-level menu handle\n\nThis seems to work great (you can [check the change out here](https://github.com/brave/browser-laptop/blob/8a044fc91707bbb5dd3835ce31a7c37b2d709314/app/menu.js#L593); note that we're using a fork of electron).\n\nMy only concern is that it may leak memory.  I did some basic profiling by attaching to the process (with a version of Electron w/ symbols) and object counts seemed to be OK. Comments or concerns appreciated :smile: \n\nOne route I tried, which did _not_ work, was exposing the `RemoveItemAt` method of the underlying model. When you call this, it does remove the item from the menu that's visible to the user... but not from the menu object itself. On top of that, even if you call destroy on the MenuItem's submenu, it visibly leaks memory.  I can see why @zcbenz said this is a limitation of Chromium\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/253677155",
    "html_url": "https://github.com/electron/electron/issues/527#issuecomment-253677155",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/527",
    "id": 253677155,
    "user": {
      "login": "yunjia",
      "id": 1003253,
      "avatar_url": "https://avatars1.githubusercontent.com/u/1003253?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yunjia",
      "html_url": "https://github.com/yunjia",
      "followers_url": "https://api.github.com/users/yunjia/followers",
      "following_url": "https://api.github.com/users/yunjia/following{/other_user}",
      "gists_url": "https://api.github.com/users/yunjia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yunjia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yunjia/subscriptions",
      "organizations_url": "https://api.github.com/users/yunjia/orgs",
      "repos_url": "https://api.github.com/users/yunjia/repos",
      "events_url": "https://api.github.com/users/yunjia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yunjia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-14T00:23:40Z",
    "updated_at": "2016-10-14T00:23:40Z",
    "body": "@bsclifton I think the work around works pretty well, except for one thing.\n\nI'm not sure if you noticed, the `menu.items` gets accumulated, even `menu.clear()` has been called.\n"
  }
]