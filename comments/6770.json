[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238207360",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238207360",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238207360,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-08-08T11:15:18Z",
    "updated_at": "2016-08-08T11:15:18Z",
    "body": "Can you provide the code that used for handling the click and showing menu?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238211180",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238211180",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238211180,
    "user": {
      "login": "steverandy",
      "id": 525332,
      "avatar_url": "https://avatars1.githubusercontent.com/u/525332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steverandy",
      "html_url": "https://github.com/steverandy",
      "followers_url": "https://api.github.com/users/steverandy/followers",
      "following_url": "https://api.github.com/users/steverandy/following{/other_user}",
      "gists_url": "https://api.github.com/users/steverandy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steverandy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steverandy/subscriptions",
      "organizations_url": "https://api.github.com/users/steverandy/orgs",
      "repos_url": "https://api.github.com/users/steverandy/repos",
      "events_url": "https://api.github.com/users/steverandy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steverandy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-08T11:37:24Z",
    "updated_at": "2016-08-08T12:11:56Z",
    "body": "Here's the snippet.\nBoth onClick and onContextMenu are attached to the same element.\nIf I right-click on link-item, context menu will show up and if I click inside link-item to dismiss the menu, onClick function will be triggered.\nBut in order for this to always happens, I observed, you need to click at least once anywhere in the browser window.\n\n``` javascript\nclass LinkItem extends React.PureComponent {\n  constructor(...args) {\n    super(...args)\n    autoBind(this)\n    this.state = {}\n  }\n\n  render() {\n    return (\n      <div className=\"link-item\"\n        onClick={this.onClick}\n        onContextMenu={this.onContextMenu}>\n      </div>\n    )\n  }\n\n  onClick(event) {\n    console.log(\"click\")\n  }\n\n  onContextMenu(event) {\n    let {contextMenuTemplate} = this.props\n    if (contextMenuTemplate == null) return false\n    let menu = remote.Menu.buildFromTemplate(contextMenuTemplate)\n    menu.popup()\n  }\n}\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238524336",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238524336",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238524336,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-08-09T11:19:50Z",
    "updated_at": "2016-08-09T11:19:50Z",
    "body": "I can reproduce this, but it is unfortunately a problem with Chromium, by showing the menu in renderer process, Chromium somehow assumes it is part of a DOM operation, this is probably because Chromium never supports showing menu in renderer process and doing so would confuse its event system.\n\nYou have to work around it by showing the menu in the main process by either sending IPC messages or using the `context-menu` event of `WebContents`. I'm closing this as won't fix since it is a problem with Chromium's event system, and we are not able to fix it on Electron's side.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238541086",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238541086",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238541086,
    "user": {
      "login": "steverandy",
      "id": 525332,
      "avatar_url": "https://avatars1.githubusercontent.com/u/525332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steverandy",
      "html_url": "https://github.com/steverandy",
      "followers_url": "https://api.github.com/users/steverandy/followers",
      "following_url": "https://api.github.com/users/steverandy/following{/other_user}",
      "gists_url": "https://api.github.com/users/steverandy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steverandy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steverandy/subscriptions",
      "organizations_url": "https://api.github.com/users/steverandy/orgs",
      "repos_url": "https://api.github.com/users/steverandy/repos",
      "events_url": "https://api.github.com/users/steverandy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steverandy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-09T12:43:55Z",
    "updated_at": "2016-08-09T12:47:23Z",
    "body": "@zcbenz I just tried using `menu.popup()` from the main process, it still behaves the same, where clicking outside the context menu would trigger a click event on the DOM element.\n\nBelow is a sample code:\n\nFrom renderer:\n\n``` javascript\nonContextMenu(event) {\n    event.stopPropagation()\n    event.preventDefault()\n    ipcRenderer.send(\"popup-context-menu\", {\n      template: [\n        {label: \"Test\", command: \"test\"}\n      ]\n    })\n}\n```\n\nFrom main:\n\n``` javascript\nipcMain.on(\"popup-context-menu\", (event, options = {}) => {\n  let window = BrowserWindow.getFocusedWindow()\n  let {template} = options\n  if (template != null) {\n    template.forEach(item => {\n      let {command} = item\n      if (command != null) {\n        item.click = () => window.webContents.send(`context-menu:${command}`)\n      }\n    })\n    let menu = Menu.buildFromTemplate(options.template)\n    menu.popup(window)\n  }\n})\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238543341",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238543341",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238543341,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-08-09T12:53:46Z",
    "updated_at": "2016-08-09T12:53:46Z",
    "body": "It seems that Chromium can only handle this correctly when using its own Menu system.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238553900",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238553900",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238553900,
    "user": {
      "login": "steverandy",
      "id": 525332,
      "avatar_url": "https://avatars1.githubusercontent.com/u/525332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steverandy",
      "html_url": "https://github.com/steverandy",
      "followers_url": "https://api.github.com/users/steverandy/followers",
      "following_url": "https://api.github.com/users/steverandy/following{/other_user}",
      "gists_url": "https://api.github.com/users/steverandy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steverandy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steverandy/subscriptions",
      "organizations_url": "https://api.github.com/users/steverandy/orgs",
      "repos_url": "https://api.github.com/users/steverandy/repos",
      "events_url": "https://api.github.com/users/steverandy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steverandy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-09T13:33:22Z",
    "updated_at": "2016-08-09T13:33:22Z",
    "body": "I noticed atom app doesn't have this issue at all.\nDo you know if there is any specific implementation for the context menu in the atom app?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238778278",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238778278",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238778278,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-08-10T06:36:20Z",
    "updated_at": "2016-08-10T06:36:20Z",
    "body": "Atom is sending IPC messages to the main process to popup menu there, it is using an old version of Electron though.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/238782744",
    "html_url": "https://github.com/electron/electron/issues/6770#issuecomment-238782744",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6770",
    "id": 238782744,
    "user": {
      "login": "steverandy",
      "id": 525332,
      "avatar_url": "https://avatars1.githubusercontent.com/u/525332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/steverandy",
      "html_url": "https://github.com/steverandy",
      "followers_url": "https://api.github.com/users/steverandy/followers",
      "following_url": "https://api.github.com/users/steverandy/following{/other_user}",
      "gists_url": "https://api.github.com/users/steverandy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/steverandy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/steverandy/subscriptions",
      "organizations_url": "https://api.github.com/users/steverandy/orgs",
      "repos_url": "https://api.github.com/users/steverandy/repos",
      "events_url": "https://api.github.com/users/steverandy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/steverandy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-10T07:02:45Z",
    "updated_at": "2016-08-10T07:02:45Z",
    "body": "I was able to replicate the issue on the latest version of Atom. \n\nI do hope the core team can fix this issue in the future. I will help test or provide more info. \n"
  }
]