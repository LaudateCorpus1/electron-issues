[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20658445",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20658445",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20658445,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-09T07:48:03Z",
    "updated_at": "2013-07-09T07:48:03Z",
    "body": "I am sure that the underlying native code works fine, since piping the file stream to `process.stdout` works as expected, so the bug must hides in the unzip module's code, I guess it's related to how `process.nextTick` is implemented in atom-shell.\n\nIt would take me some time to find it out since `unzip` has used many third party modules.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20662635",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20662635",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20662635,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-09T09:26:39Z",
    "updated_at": "2013-07-09T09:26:39Z",
    "body": "This bug is again caused by the `setImmediate` function.\n\nThe `unzip` module uses `setImmediate` in `Parse.prototype._flush` to wait for more data when the file was read but the data was not completely parsed. This trick relies on this behavior: the `setImmediate` should run the callback after other uv operations, however since the `setImmediate` is implemented via WebKit's `setTimeout`, the callback passed would be scheduled to run in WebKit's message loop, which is independent with uv loop, so it happens that the callback passed in `setImmediate` just keeps running but the other operations pending in uv loop just do not get a chance to run, until something accidentally activates the uv loop.\n\nImplementing the `setImmediate` with node's `timers` module would fix this.\n\nThe `process.nextTick` implementation in atom-shel does have the same problem with `setImmediate`, and I doubt https://github.com/github/atom/commit/70e414b27988988b3059709c1d2a98b62dc4b03c is caused by this. I'll switch both functions to use their original implementations.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20674258",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20674258",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20674258,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-09T13:40:45Z",
    "updated_at": "2013-07-09T13:40:45Z",
    "body": "Fixed with https://github.com/atom/atom-shell/commit/25d9c1a14d098d87d17dfb286a921d2148fc95a1 and https://github.com/atom/cefode-node/commit/4b4c40a51dfc3033f904756797d18b11b75e045c.\n\nInstead of using node's original implementation of `setImmediate`, I just make sure when `setImmediate` is called the uv loop would also be activated (or interrupted), so it can have the behavior expected by `unzip` module. Using node's `setImmediate` would cause interleaves of two message loops and two V8 contexts, which is the thing I want to avoid most.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20683820",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20683820",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20683820,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-09T15:49:24Z",
    "updated_at": "2013-07-09T15:49:24Z",
    "body": ":+1: awesome, thanks for the quick fix!\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20708110",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20708110",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20708110,
    "user": {
      "login": "nathansobo",
      "id": 1789,
      "avatar_url": "https://avatars2.githubusercontent.com/u/1789?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nathansobo",
      "html_url": "https://github.com/nathansobo",
      "followers_url": "https://api.github.com/users/nathansobo/followers",
      "following_url": "https://api.github.com/users/nathansobo/following{/other_user}",
      "gists_url": "https://api.github.com/users/nathansobo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nathansobo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nathansobo/subscriptions",
      "organizations_url": "https://api.github.com/users/nathansobo/orgs",
      "repos_url": "https://api.github.com/users/nathansobo/repos",
      "events_url": "https://api.github.com/users/nathansobo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nathansobo/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-09T21:49:34Z",
    "updated_at": "2013-07-09T21:49:34Z",
    "body": "Is this something that Ben Noordhuis' changes to node to support multiple\ncontexts would fix?\n\nOn Tue, Jul 9, 2013 at 9:49 AM, Kevin Sawicki notifications@github.comwrote:\n\n> [image: :+1:] awesome, thanks for the quick fix!\n> \n> â€”\n> Reply to this email directly or view it on GitHubhttps://github.com/atom/atom-shell/issues/35#issuecomment-20683820\n> .\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20713892",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20713892",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20713892,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-10T00:01:41Z",
    "updated_at": "2013-07-10T00:01:41Z",
    "body": "@nathansobo no, this is caused by our message loop integration, we have to use this solution unless node supports multiple message loops (which I don't think node would ever do, they gave up once when trying to adding isolates to node).\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20905069",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20905069",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20905069,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-12T21:23:42Z",
    "updated_at": "2013-07-12T21:23:42Z",
    "body": "Has this been released?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20936096",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20936096",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20936096,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-14T13:01:26Z",
    "updated_at": "2013-07-14T13:01:26Z",
    "body": "Yes it has been released, but I found it only fixed zip files of smaller sizes, there must have been some other bugs.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/20955974",
    "html_url": "https://github.com/electron/electron/issues/35#issuecomment-20955974",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/35",
    "id": 20955974,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2013-07-15T07:57:59Z",
    "updated_at": "2013-07-15T07:57:59Z",
    "body": "Fixed with https://github.com/atom/cefode-node/commit/d0ccec39c367b00334d76cac10cfc8543143cb1c.\n\nNow atom-shell just uses node's implementation of `setImmediate`, otherwise it's quite hard to make `unzip` work as expected.\n"
  }
]