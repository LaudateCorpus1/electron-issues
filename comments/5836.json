[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/224379251",
    "html_url": "https://github.com/electron/electron/issues/5836#issuecomment-224379251",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5836",
    "id": 224379251,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-06-07T18:55:13Z",
    "updated_at": "2016-06-07T18:55:13Z",
    "body": "It looks like `hostOnly` isn't persisted, but inferred when you read the cookie, https://github.com/electron/electron/blob/4948bcc80666ba51b411643eb1b380f5bb390f93/atom/browser/api/atom_api_cookies.cc#L45\n\nSo I'm unsure whether `hostOnly` should be available when setting a cookie.\n\n> Saving and restoring cookies works in phantom.js\n\nCould you provide a snippet that shows this? I'm not seeing the `hostOnly` option listed on http://phantomjs.org/api/webpage/method/add-cookie.html\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/224525595",
    "html_url": "https://github.com/electron/electron/issues/5836#issuecomment-224525595",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5836",
    "id": 224525595,
    "user": {
      "login": "LinusU",
      "id": 189580,
      "avatar_url": "https://avatars3.githubusercontent.com/u/189580?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LinusU",
      "html_url": "https://github.com/LinusU",
      "followers_url": "https://api.github.com/users/LinusU/followers",
      "following_url": "https://api.github.com/users/LinusU/following{/other_user}",
      "gists_url": "https://api.github.com/users/LinusU/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LinusU/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LinusU/subscriptions",
      "organizations_url": "https://api.github.com/users/LinusU/orgs",
      "repos_url": "https://api.github.com/users/LinusU/repos",
      "events_url": "https://api.github.com/users/LinusU/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LinusU/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-08T08:39:30Z",
    "updated_at": "2016-06-08T08:39:30Z",
    "body": "Hmm, I've been trying to do this as well and for some reason I'm having trouble with dumping all cookies and then restoring them.\n\nBasically, I'm doing `win.webContents.session.cookies.get({}, (err, cookies) => {/* Save them */})` to save all cookies to redis, and then the following code to load them back in.\n\n``` js\nfor (let cookie of cookies) {\n  const scheme = cookie.secure ? 'https' : 'http'\n  const host = cookie.domain.startsWith('.') ? cookie.domain.substr(1) : cookie.domain\n\n  cookie.url = `${scheme}://${host}`\n\n  win.webContents.session.cookies.set(cookie, (err) => {/* ... */})\n}\n```\n\nFor some reason something is not loading quite right with regards to `hostOnly` and the domain. It seems like the leading `.` is being striped from the domain and thus `hostOnly` always evaluates to `true`...\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/224527008",
    "html_url": "https://github.com/electron/electron/issues/5836#issuecomment-224527008",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5836",
    "id": 224527008,
    "user": {
      "login": "albinekb",
      "id": 5027156,
      "avatar_url": "https://avatars2.githubusercontent.com/u/5027156?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/albinekb",
      "html_url": "https://github.com/albinekb",
      "followers_url": "https://api.github.com/users/albinekb/followers",
      "following_url": "https://api.github.com/users/albinekb/following{/other_user}",
      "gists_url": "https://api.github.com/users/albinekb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/albinekb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/albinekb/subscriptions",
      "organizations_url": "https://api.github.com/users/albinekb/orgs",
      "repos_url": "https://api.github.com/users/albinekb/repos",
      "events_url": "https://api.github.com/users/albinekb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/albinekb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-08T08:45:17Z",
    "updated_at": "2016-06-08T08:50:11Z",
    "body": "As @LinusU are describing, I'm also trying to dump cookies with `win.webContents.session.cookies.get` and save them in redis, then loading them back using `win.webContents.session.cookies.set`. \n\nThis is not working as expected, as the cookies saved with`win.webContents.session.cookies.get` aren't the same as `win.webContents.session.cookies.set` wants.\n\nMore specifically I'm using https://github.com/segmentio/nightmare, but that shouldn't matter because we're writing against the electron API.\n\nWith phantom i can save the cookies stored at `phantom.cookies` and then add them back using `phantom.addCookie(cookie)` and it works as expected. Do you need an example for this, let me know.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/224715039",
    "html_url": "https://github.com/electron/electron/issues/5836#issuecomment-224715039",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5836",
    "id": 224715039,
    "user": {
      "login": "kevinsawicki",
      "id": 671378,
      "avatar_url": "https://avatars0.githubusercontent.com/u/671378?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinsawicki",
      "html_url": "https://github.com/kevinsawicki",
      "followers_url": "https://api.github.com/users/kevinsawicki/followers",
      "following_url": "https://api.github.com/users/kevinsawicki/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinsawicki/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinsawicki/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinsawicki/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinsawicki/orgs",
      "repos_url": "https://api.github.com/users/kevinsawicki/repos",
      "events_url": "https://api.github.com/users/kevinsawicki/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinsawicki/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-06-08T20:20:03Z",
    "updated_at": "2016-06-08T20:20:03Z",
    "body": "@LinusU @albinekb would you be able to provide a cookie value obtained from `cookies.get` that is failing to restore back via `cookies.set`? I'll use that to write a failing spec and then look into this further, thanks.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/228999140",
    "html_url": "https://github.com/electron/electron/issues/5836#issuecomment-228999140",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5836",
    "id": 228999140,
    "user": {
      "login": "albinekb",
      "id": 5027156,
      "avatar_url": "https://avatars2.githubusercontent.com/u/5027156?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/albinekb",
      "html_url": "https://github.com/albinekb",
      "followers_url": "https://api.github.com/users/albinekb/followers",
      "following_url": "https://api.github.com/users/albinekb/following{/other_user}",
      "gists_url": "https://api.github.com/users/albinekb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/albinekb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/albinekb/subscriptions",
      "organizations_url": "https://api.github.com/users/albinekb/orgs",
      "repos_url": "https://api.github.com/users/albinekb/repos",
      "events_url": "https://api.github.com/users/albinekb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/albinekb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-28T09:30:07Z",
    "updated_at": "2016-06-29T07:07:33Z",
    "body": "@kevinsawicki @zcbenz sorry for the delay,\nhere is an example cookie that does not set correctly\n`{\n  name: 'TestCookie',\n  value: '1234',\n  domain: 'info.cern.ch',\n  hostOnly: true,\n  path: '/',\n  secure: false,\n  httpOnly: false,\n  session: true\n}`\n\nBoth `session` and `hostOnly` is not being set to the same value as i loaded them as.\n`hostOnly` will be set as `false` and `session` will be set as `false` when reading the cookie after setting it.\n\n_I expect to be able to dump all cookies, then load them back in another electron instance and they should all be set as i loaded them_\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/229865556",
    "html_url": "https://github.com/electron/electron/issues/5836#issuecomment-229865556",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5836",
    "id": 229865556,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-07-01T06:33:12Z",
    "updated_at": "2016-07-01T06:33:12Z",
    "body": "`session` and `hostOnly` are not meaningful when setting cookie, if you don't set `expirationDate`, the cookie will have `session: true`, and if you the `domain` doesn't start with a leading `.`, `hostOnly` will be `true`.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/233919646",
    "html_url": "https://github.com/electron/electron/issues/5836#issuecomment-233919646",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/5836",
    "id": 233919646,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-07-20T11:07:16Z",
    "updated_at": "2016-07-20T11:07:16Z",
    "body": "I'm closing this since this seems to be a misunderstanding of cookies API.\n"
  }
]