[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/235579530",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-235579530",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 235579530,
    "user": {
      "login": "vsemozhetbyt",
      "id": 10393198,
      "avatar_url": "https://avatars2.githubusercontent.com/u/10393198?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsemozhetbyt",
      "html_url": "https://github.com/vsemozhetbyt",
      "followers_url": "https://api.github.com/users/vsemozhetbyt/followers",
      "following_url": "https://api.github.com/users/vsemozhetbyt/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsemozhetbyt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsemozhetbyt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsemozhetbyt/subscriptions",
      "organizations_url": "https://api.github.com/users/vsemozhetbyt/orgs",
      "repos_url": "https://api.github.com/users/vsemozhetbyt/repos",
      "events_url": "https://api.github.com/users/vsemozhetbyt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsemozhetbyt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-27T13:09:32Z",
    "updated_at": "2016-07-27T13:11:12Z",
    "body": "It seems `view-painted` listener should be added after `did-finish-load` fired. However, the result is still unsatisfactory.\n\nThis code pruduces a more reliable flow:\n\n``` js\n/******************************************************************************/\n'use strict';\n/******************************************************************************/\nconst fs = require('fs');\nconst { app, BrowserWindow } = require('electron');\n/******************************************************************************/\nconst urls = [\n  'http://json.org/json-de.html',\n  'http://json.org/json-en.html',\n  'http://json.org/json-fr.html',\n];\n\nlet   mainWindow;\nlet   i = 0;\n/******************************************************************************/\napp.once('ready', createWindow);\n/******************************************************************************/\nfunction createWindow() {\n  mainWindow = new BrowserWindow({ webPreferences: { nodeIntegration: false } });\n  mainWindow.webContents.on('did-finish-load', saveDoc);\n  getDoc();\n}\n/******************************************************************************/\nfunction getDoc() {\n  if (urls.length) mainWindow.loadURL(urls.shift());\n  else console.log('All done');\n}\n/******************************************************************************/\nfunction saveDoc() {\n  mainWindow.webContents.once('view-painted', () => {\n    mainWindow.capturePage(img => {\n      fs.writeFileSync(`${++i}.png`, img.toPNG());\n      console.log(`${mainWindow.webContents.getURL()} saved.`);\n      getDoc();\n    });\n  });\n}\n/******************************************************************************/\n```\n\nOutput is OK:\n\n```\nhttp://json.org/json-de.html saved.\nhttp://json.org/json-en.html saved.\nhttp://json.org/json-fr.html saved.\nAll done\n```\n\nAll the images contain expected data, but lacunas still exist. Compare with pages in the browser (sometimes the image logo and text blocks are not present):\n\n![2](https://cloud.githubusercontent.com/assets/10393198/17176155/09da7060-5414-11e6-9447-84b68034149c.png)\n\n![3](https://cloud.githubusercontent.com/assets/10393198/17176156/09df3aa0-5414-11e6-8724-a0aa85dcccb2.png)\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/235805774",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-235805774",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 235805774,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-07-28T05:57:05Z",
    "updated_at": "2016-07-28T05:57:05Z",
    "body": "It seems that `view-painted` only emits when first painting command is committed, instead of after the whole page gets painted.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/235879348",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-235879348",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 235879348,
    "user": {
      "login": "liusy182",
      "id": 3293332,
      "avatar_url": "https://avatars3.githubusercontent.com/u/3293332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liusy182",
      "html_url": "https://github.com/liusy182",
      "followers_url": "https://api.github.com/users/liusy182/followers",
      "following_url": "https://api.github.com/users/liusy182/following{/other_user}",
      "gists_url": "https://api.github.com/users/liusy182/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liusy182/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liusy182/subscriptions",
      "organizations_url": "https://api.github.com/users/liusy182/orgs",
      "repos_url": "https://api.github.com/users/liusy182/repos",
      "events_url": "https://api.github.com/users/liusy182/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liusy182/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T12:25:00Z",
    "updated_at": "2016-07-28T12:25:00Z",
    "body": "@vsemozhetbyt As far as I have tested, `view-painted` is emitted multiple times when a page is loaded. UI is \"fully\" painted after the last `view-painted` event. Have you tried to capture the image after the last `view-painted` event? \n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/235880820",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-235880820",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 235880820,
    "user": {
      "login": "vsemozhetbyt",
      "id": 10393198,
      "avatar_url": "https://avatars2.githubusercontent.com/u/10393198?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsemozhetbyt",
      "html_url": "https://github.com/vsemozhetbyt",
      "followers_url": "https://api.github.com/users/vsemozhetbyt/followers",
      "following_url": "https://api.github.com/users/vsemozhetbyt/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsemozhetbyt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsemozhetbyt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsemozhetbyt/subscriptions",
      "organizations_url": "https://api.github.com/users/vsemozhetbyt/orgs",
      "repos_url": "https://api.github.com/users/vsemozhetbyt/repos",
      "events_url": "https://api.github.com/users/vsemozhetbyt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsemozhetbyt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T12:32:03Z",
    "updated_at": "2016-07-28T12:32:03Z",
    "body": "@liusy182 How can I detect that a current `view-painted` emitting is the last, final one for the current page?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/235894619",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-235894619",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 235894619,
    "user": {
      "login": "liusy182",
      "id": 3293332,
      "avatar_url": "https://avatars3.githubusercontent.com/u/3293332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liusy182",
      "html_url": "https://github.com/liusy182",
      "followers_url": "https://api.github.com/users/liusy182/followers",
      "following_url": "https://api.github.com/users/liusy182/following{/other_user}",
      "gists_url": "https://api.github.com/users/liusy182/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liusy182/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liusy182/subscriptions",
      "organizations_url": "https://api.github.com/users/liusy182/orgs",
      "repos_url": "https://api.github.com/users/liusy182/repos",
      "events_url": "https://api.github.com/users/liusy182/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liusy182/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T13:30:22Z",
    "updated_at": "2016-07-28T13:30:22Z",
    "body": "@vsemozhetbyt Sorry I couldn't think of a 100% reliable solution. One possible way is to have a short timeout after `view-painted`. If there is not subsequent `view-painted`, it means there is not more view update.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/235900196",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-235900196",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 235900196,
    "user": {
      "login": "vsemozhetbyt",
      "id": 10393198,
      "avatar_url": "https://avatars2.githubusercontent.com/u/10393198?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsemozhetbyt",
      "html_url": "https://github.com/vsemozhetbyt",
      "followers_url": "https://api.github.com/users/vsemozhetbyt/followers",
      "following_url": "https://api.github.com/users/vsemozhetbyt/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsemozhetbyt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsemozhetbyt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsemozhetbyt/subscriptions",
      "organizations_url": "https://api.github.com/users/vsemozhetbyt/orgs",
      "repos_url": "https://api.github.com/users/vsemozhetbyt/repos",
      "events_url": "https://api.github.com/users/vsemozhetbyt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsemozhetbyt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-28T13:51:08Z",
    "updated_at": "2016-07-28T13:53:09Z",
    "body": "@liusy182 Well, it seems the `view-painted` is supposed to be a mean to manage without timeouts. If we still need timeouts, why use `view-painted` at all? We can manage just with timeouts ([see a working, but complicated code sample](https://github.com/electron/electron/issues/6426)).\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/236129543",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-236129543",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 236129543,
    "user": {
      "login": "liusy182",
      "id": 3293332,
      "avatar_url": "https://avatars3.githubusercontent.com/u/3293332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liusy182",
      "html_url": "https://github.com/liusy182",
      "followers_url": "https://api.github.com/users/liusy182/followers",
      "following_url": "https://api.github.com/users/liusy182/following{/other_user}",
      "gists_url": "https://api.github.com/users/liusy182/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liusy182/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liusy182/subscriptions",
      "organizations_url": "https://api.github.com/users/liusy182/orgs",
      "repos_url": "https://api.github.com/users/liusy182/repos",
      "events_url": "https://api.github.com/users/liusy182/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liusy182/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-29T08:56:41Z",
    "updated_at": "2016-07-29T08:56:41Z",
    "body": "you are right. Graphical commits looks more like an intrinsic behavior of chrome. Maybe we should not expose this at all.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/236132074",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-236132074",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 236132074,
    "user": {
      "login": "vsemozhetbyt",
      "id": 10393198,
      "avatar_url": "https://avatars2.githubusercontent.com/u/10393198?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsemozhetbyt",
      "html_url": "https://github.com/vsemozhetbyt",
      "followers_url": "https://api.github.com/users/vsemozhetbyt/followers",
      "following_url": "https://api.github.com/users/vsemozhetbyt/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsemozhetbyt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsemozhetbyt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsemozhetbyt/subscriptions",
      "organizations_url": "https://api.github.com/users/vsemozhetbyt/orgs",
      "repos_url": "https://api.github.com/users/vsemozhetbyt/repos",
      "events_url": "https://api.github.com/users/vsemozhetbyt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsemozhetbyt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-29T09:09:33Z",
    "updated_at": "2016-07-29T09:09:33Z",
    "body": "It would be useful, if it fired once after a final paint / repaint stage or if we had something like `XMLHttpRequest.onreadystatechange` + `XMLHttpRequest.readyState` to check a paint / repaint stage.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/236136070",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-236136070",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 236136070,
    "user": {
      "login": "liusy182",
      "id": 3293332,
      "avatar_url": "https://avatars3.githubusercontent.com/u/3293332?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/liusy182",
      "html_url": "https://github.com/liusy182",
      "followers_url": "https://api.github.com/users/liusy182/followers",
      "following_url": "https://api.github.com/users/liusy182/following{/other_user}",
      "gists_url": "https://api.github.com/users/liusy182/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/liusy182/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/liusy182/subscriptions",
      "organizations_url": "https://api.github.com/users/liusy182/orgs",
      "repos_url": "https://api.github.com/users/liusy182/repos",
      "events_url": "https://api.github.com/users/liusy182/events{/privacy}",
      "received_events_url": "https://api.github.com/users/liusy182/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-29T09:29:05Z",
    "updated_at": "2016-07-29T09:29:05Z",
    "body": "Hmm. The difficulty I can see here is that, we can never know when a page is \"graphically\" ready. For example, if a page has a continuos loop running animations, browser would never know when is the \"final\" paint.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/236138031",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-236138031",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 236138031,
    "user": {
      "login": "vsemozhetbyt",
      "id": 10393198,
      "avatar_url": "https://avatars2.githubusercontent.com/u/10393198?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vsemozhetbyt",
      "html_url": "https://github.com/vsemozhetbyt",
      "followers_url": "https://api.github.com/users/vsemozhetbyt/followers",
      "following_url": "https://api.github.com/users/vsemozhetbyt/following{/other_user}",
      "gists_url": "https://api.github.com/users/vsemozhetbyt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vsemozhetbyt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vsemozhetbyt/subscriptions",
      "organizations_url": "https://api.github.com/users/vsemozhetbyt/orgs",
      "repos_url": "https://api.github.com/users/vsemozhetbyt/repos",
      "events_url": "https://api.github.com/users/vsemozhetbyt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vsemozhetbyt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-29T09:38:34Z",
    "updated_at": "2016-07-29T09:38:34Z",
    "body": "It's a pity.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/237162945",
    "html_url": "https://github.com/electron/electron/issues/6622#issuecomment-237162945",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/6622",
    "id": 237162945,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-08-03T07:25:08Z",
    "updated_at": "2016-08-03T07:25:08Z",
    "body": "I'm closing this issue and reopening #6426 since `view-painted` is going to be removed.\n"
  }
]