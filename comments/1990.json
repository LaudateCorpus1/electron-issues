[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/112710068",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-112710068",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 112710068,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-06-17T08:10:37Z",
    "updated_at": "2015-06-17T08:10:37Z",
    "body": "You can use `fetch` with “no-cors” mode, see also:\nhttps://developers.google.com/web/updates/2015/03/introduction-to-fetch?hl=en\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/119493183",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-119493183",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 119493183,
    "user": {
      "login": "kidwm",
      "id": 822446,
      "avatar_url": "https://avatars2.githubusercontent.com/u/822446?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kidwm",
      "html_url": "https://github.com/kidwm",
      "followers_url": "https://api.github.com/users/kidwm/followers",
      "following_url": "https://api.github.com/users/kidwm/following{/other_user}",
      "gists_url": "https://api.github.com/users/kidwm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kidwm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kidwm/subscriptions",
      "organizations_url": "https://api.github.com/users/kidwm/orgs",
      "repos_url": "https://api.github.com/users/kidwm/repos",
      "events_url": "https://api.github.com/users/kidwm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kidwm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-08T08:31:41Z",
    "updated_at": "2015-07-08T08:32:10Z",
    "body": "@zcbenz this is my fetch code\n\n``` js\nfetch(api + 'oauth/token', {\n    mode: 'no-cors',\n    method: 'post',\n    body: form\n}).then((response) => response.json()).then(function(data) {\n        console.log(data.access_token);\n});\n```\n\nafter use 'no-cors' mode, it will cause an error in response.json():\n\n```\nUncaught (in promise) SyntaxError: Unexpected end of input\n```\n\nalthough I can see the json response in Devtools Network Panel, response.text() will be empty in this case.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/119800783",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-119800783",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 119800783,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-07-09T03:05:12Z",
    "updated_at": "2015-07-09T03:05:12Z",
    "body": "This error means `response` is not a valid JSON string.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/119811195",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-119811195",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 119811195,
    "user": {
      "login": "kidwm",
      "id": 822446,
      "avatar_url": "https://avatars2.githubusercontent.com/u/822446?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kidwm",
      "html_url": "https://github.com/kidwm",
      "followers_url": "https://api.github.com/users/kidwm/followers",
      "following_url": "https://api.github.com/users/kidwm/following{/other_user}",
      "gists_url": "https://api.github.com/users/kidwm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kidwm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kidwm/subscriptions",
      "organizations_url": "https://api.github.com/users/kidwm/orgs",
      "repos_url": "https://api.github.com/users/kidwm/repos",
      "events_url": "https://api.github.com/users/kidwm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kidwm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-09T04:17:20Z",
    "updated_at": "2015-07-09T04:17:20Z",
    "body": "@zcbenz yes, but it is a valid json instead of empty string when I ran this app without `no-cors` in localhost:3000 which is allowed in 'Access-Control-Allow-Origin' header of my api server.\n\nSince I set\n\n```\n'web-preferences': {\n        'web-security': false\n    }\n```\n\nin main.js, I expect that fetch should work with `file://` protocol, or did I get something wrong?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/120207607",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-120207607",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 120207607,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-07-10T02:44:58Z",
    "updated_at": "2015-07-10T02:44:58Z",
    "body": "@kidwm The response headers have to explicit set the file's type to JSON to allow the `.json()`, and apparently the url with `file://` doesn't have any header so the call is not allowed. You have to manually call `JSON.parse`, or you can create an issue in Chromium project on this.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/120860477",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-120860477",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 120860477,
    "user": {
      "login": "kidwm",
      "id": 822446,
      "avatar_url": "https://avatars2.githubusercontent.com/u/822446?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kidwm",
      "html_url": "https://github.com/kidwm",
      "followers_url": "https://api.github.com/users/kidwm/followers",
      "following_url": "https://api.github.com/users/kidwm/following{/other_user}",
      "gists_url": "https://api.github.com/users/kidwm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kidwm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kidwm/subscriptions",
      "organizations_url": "https://api.github.com/users/kidwm/orgs",
      "repos_url": "https://api.github.com/users/kidwm/repos",
      "events_url": "https://api.github.com/users/kidwm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kidwm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-07-13T09:10:38Z",
    "updated_at": "2015-07-13T09:10:38Z",
    "body": "@zcbenz There is no content in Response with `no-cors`. So `JSON.parse` will fail.\nI just wonder why `'web-security': false` does not work with window.fetch.\n\nNow I turn into using superagent instead of native window.fetch.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/251442643",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-251442643",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 251442643,
    "user": {
      "login": "hbrls",
      "id": 1220476,
      "avatar_url": "https://avatars0.githubusercontent.com/u/1220476?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hbrls",
      "html_url": "https://github.com/hbrls",
      "followers_url": "https://api.github.com/users/hbrls/followers",
      "following_url": "https://api.github.com/users/hbrls/following{/other_user}",
      "gists_url": "https://api.github.com/users/hbrls/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hbrls/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hbrls/subscriptions",
      "organizations_url": "https://api.github.com/users/hbrls/orgs",
      "repos_url": "https://api.github.com/users/hbrls/repos",
      "events_url": "https://api.github.com/users/hbrls/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hbrls/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-04T16:39:32Z",
    "updated_at": "2016-10-04T16:39:32Z",
    "body": "@kidwm Can you share your superagent code for it?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/251445805",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-251445805",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 251445805,
    "user": {
      "login": "hbrls",
      "id": 1220476,
      "avatar_url": "https://avatars0.githubusercontent.com/u/1220476?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hbrls",
      "html_url": "https://github.com/hbrls",
      "followers_url": "https://api.github.com/users/hbrls/followers",
      "following_url": "https://api.github.com/users/hbrls/following{/other_user}",
      "gists_url": "https://api.github.com/users/hbrls/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hbrls/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hbrls/subscriptions",
      "organizations_url": "https://api.github.com/users/hbrls/orgs",
      "repos_url": "https://api.github.com/users/hbrls/repos",
      "events_url": "https://api.github.com/users/hbrls/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hbrls/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-04T16:51:41Z",
    "updated_at": "2016-10-04T16:52:45Z",
    "body": "As long as I've tried, the config should be:\n\n```\nwebPreferences: {\n    webSecurity: false\n}\n```\n\nAnd then you don't have to use `fetch (url, { mode: 'no-cors' })`.\n\nIt works as if a native app.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/252428760",
    "html_url": "https://github.com/electron/electron/issues/1990#issuecomment-252428760",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/1990",
    "id": 252428760,
    "user": {
      "login": "NdYAG",
      "id": 1396511,
      "avatar_url": "https://avatars1.githubusercontent.com/u/1396511?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NdYAG",
      "html_url": "https://github.com/NdYAG",
      "followers_url": "https://api.github.com/users/NdYAG/followers",
      "following_url": "https://api.github.com/users/NdYAG/following{/other_user}",
      "gists_url": "https://api.github.com/users/NdYAG/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NdYAG/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NdYAG/subscriptions",
      "organizations_url": "https://api.github.com/users/NdYAG/orgs",
      "repos_url": "https://api.github.com/users/NdYAG/repos",
      "events_url": "https://api.github.com/users/NdYAG/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NdYAG/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-08T14:53:35Z",
    "updated_at": "2016-10-08T14:57:55Z",
    "body": "The problem here, is that, in cases like OAuth2, you don't have rights to add `Access-Control-Allow-Origin` header onto the response.\n\nAnd even with `loadURL('file://${__dirname}/index.html')`,  `{webSecurity: false}` and `fetch(url, {mode: 'no-cors'})`, the response is still **opaque response** in renderer process and could not be accessed (while the request display the full **valid** json response in devtools).\n\nThis is really counterintuitive as electron is a native application, but it's right now difficult to make no-cors requests.\n"
  }
]