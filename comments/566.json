[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/83870841",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-83870841",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 83870841,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-20T03:26:52Z",
    "updated_at": "2015-03-20T03:26:52Z",
    "body": "added with https://github.com/atom/atom-shell/pull/1208 :)\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/83941495",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-83941495",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 83941495,
    "user": {
      "login": "YurySolovyov",
      "id": 2168518,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2168518?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/YurySolovyov",
      "html_url": "https://github.com/YurySolovyov",
      "followers_url": "https://api.github.com/users/YurySolovyov/followers",
      "following_url": "https://api.github.com/users/YurySolovyov/following{/other_user}",
      "gists_url": "https://api.github.com/users/YurySolovyov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/YurySolovyov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/YurySolovyov/subscriptions",
      "organizations_url": "https://api.github.com/users/YurySolovyov/orgs",
      "repos_url": "https://api.github.com/users/YurySolovyov/repos",
      "events_url": "https://api.github.com/users/YurySolovyov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/YurySolovyov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-20T07:11:06Z",
    "updated_at": "2015-03-20T07:11:06Z",
    "body": "Thanks!\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/83944735",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-83944735",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 83944735,
    "user": {
      "login": "YurySolovyov",
      "id": 2168518,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2168518?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/YurySolovyov",
      "html_url": "https://github.com/YurySolovyov",
      "followers_url": "https://api.github.com/users/YurySolovyov/followers",
      "following_url": "https://api.github.com/users/YurySolovyov/following{/other_user}",
      "gists_url": "https://api.github.com/users/YurySolovyov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/YurySolovyov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/YurySolovyov/subscriptions",
      "organizations_url": "https://api.github.com/users/YurySolovyov/orgs",
      "repos_url": "https://api.github.com/users/YurySolovyov/repos",
      "events_url": "https://api.github.com/users/YurySolovyov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/YurySolovyov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-20T07:50:41Z",
    "updated_at": "2015-03-20T07:50:41Z",
    "body": "@deepak1556 what if I want to send and image with using this interceptor?\ndocs say: `Create a request job which accepts a buffer and sends a string as response.` but image is not a string, and it does not have encoding, should I use `binary` encoding for this case?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/83989908",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-83989908",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 83989908,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-20T11:26:56Z",
    "updated_at": "2015-03-20T11:26:56Z",
    "body": "it wont work with the current setup as the response wouldnt be encoded to that type, i have started to fix it here https://github.com/deepak1556/atom-shell/commit/a4a9fb544a48c982011894bebdbcfbd371cb20f1 does that test case cover your purpose ? \n\n/cc @zcbenz \n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/83990579",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-83990579",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 83990579,
    "user": {
      "login": "YurySolovyov",
      "id": 2168518,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2168518?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/YurySolovyov",
      "html_url": "https://github.com/YurySolovyov",
      "followers_url": "https://api.github.com/users/YurySolovyov/followers",
      "following_url": "https://api.github.com/users/YurySolovyov/following{/other_user}",
      "gists_url": "https://api.github.com/users/YurySolovyov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/YurySolovyov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/YurySolovyov/subscriptions",
      "organizations_url": "https://api.github.com/users/YurySolovyov/orgs",
      "repos_url": "https://api.github.com/users/YurySolovyov/repos",
      "events_url": "https://api.github.com/users/YurySolovyov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/YurySolovyov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-20T11:33:12Z",
    "updated_at": "2015-03-20T11:33:49Z",
    "body": "@deepak1556 my purpose is to be able to send any file type as response.\nWhat is the point of `mimeType` then ?\nThanks for your work.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/84006937",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-84006937",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 84006937,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-03-20T13:01:28Z",
    "updated_at": "2015-03-20T13:01:28Z",
    "body": "@YuriSolovyov @deepak1556 RequestBufferJob can send binary data as response since it is taking a `Buffer`, we only need to fix the document.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/84008042",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-84008042",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 84008042,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-20T13:09:19Z",
    "updated_at": "2015-03-20T13:09:19Z",
    "body": "But somehow the image data is corrupted when trying to write to a file from the response. Will inspect further\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/84008584",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-84008584",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 84008584,
    "user": {
      "login": "YurySolovyov",
      "id": 2168518,
      "avatar_url": "https://avatars3.githubusercontent.com/u/2168518?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/YurySolovyov",
      "html_url": "https://github.com/YurySolovyov",
      "followers_url": "https://api.github.com/users/YurySolovyov/followers",
      "following_url": "https://api.github.com/users/YurySolovyov/following{/other_user}",
      "gists_url": "https://api.github.com/users/YurySolovyov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/YurySolovyov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/YurySolovyov/subscriptions",
      "organizations_url": "https://api.github.com/users/YurySolovyov/orgs",
      "repos_url": "https://api.github.com/users/YurySolovyov/repos",
      "events_url": "https://api.github.com/users/YurySolovyov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/YurySolovyov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-20T13:13:30Z",
    "updated_at": "2015-03-20T13:14:37Z",
    "body": "@deepak1556 it is becasue it is trying to encode it as text when `encoding` is provided ?\nMaybe it is better to not assume `utf8` encoding by default and require it explicitly?\nAnd if there is no encoding, just send plain `buffer` with `mime-type`...\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/84016645",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-84016645",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 84016645,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-03-20T13:22:55Z",
    "updated_at": "2015-03-20T13:22:55Z",
    "body": "@deepak1556 Are you using `$.ajax` to test image data? [It is quite tricky to handle binary data correctly in Web](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data).\n\n@YuriSolovyov The `encoding` doesn't have any effect if the `mimeType` is a binary type (and it is by default).\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/84288854",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-84288854",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 84288854,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-21T09:33:05Z",
    "updated_at": "2015-03-21T09:33:05Z",
    "body": "thanks for the link, so i tried with blob type just to see what kind of error it throws\n\n```\n    it 'returns RequestBufferJob should send encoded image data', (done) ->\n      p = path.join __dirname, 'fixtures', 'asar', 'logo.asar', 'logo.png'\n      data = require('native-image').createFromPath(p).toPng()\n      job = new protocol.RequestBufferJob(mimeType: 'image/png', data: data)\n      handler = remote.createFunctionWithReturnValue job\n      protocol.registerProtocol 'atom-buffer-job', handler\n\n      $.ajax\n        url: 'atom-buffer-job://fake-host'\n        dataType: 'arraybuffer'\n        processData: false\n        success: (response) ->\n          assert.equal response.length, data.length\n          require('fs').writeFile 'l.png', response\n          protocol.unregisterProtocol 'atom-buffer-job'\n          done()\n        error: (xhr, errorType, error) ->\n          assert false, 'Got error: ' + errorType + ' ' + error\n          protocol.unregisterProtocol 'atom-buffer-job'\n```\n\nit throws \n\n```\nnot ok 58 protocol module registered protocol callback returns RequestBufferJob should send encoded image data\n  Error: the string \"Uncaught AssertionError: Got error: parsererror No conversion from text to arraybuffer\" was thrown, throw an Error :)\n```\n\nlooks like the response isnt a binary type even thought the mimetype is, any thoughts ?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/84746680",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-84746680",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 84746680,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2015-03-23T01:45:57Z",
    "updated_at": "2015-03-23T01:45:57Z",
    "body": "I guess jQuery is not working well with binary data, using XMLHttpRequest works well:\n\n``` html\n<script type=\"text/javascript\" charset=\"utf-8\">\nvar oReq = new XMLHttpRequest();\noReq.open(\"GET\", \"my-protocol://myfile.png\", true);\noReq.responseType = \"arraybuffer\";\n\noReq.onload = function(oEvent) {\n  var blob = new Blob([oReq.response], {type: \"image/png\"});\n  console.log(blob);\n};\n\noReq.send();\n</script>\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/85428419",
    "html_url": "https://github.com/electron/electron/issues/566#issuecomment-85428419",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/566",
    "id": 85428419,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-24T09:57:24Z",
    "updated_at": "2015-03-24T09:57:24Z",
    "body": "Sweet, works !! :)\n\n``` html\n  <script>\n    var oReq = new XMLHttpRequest();\n    oReq.open(\"GET\", \"my-protocol://myfile.png\", true);\n    oReq.responseType = \"blob\";\n\n    oReq.onload = function(oEvent) {\n      var blob = this.response;\n      var img = document.createElement('img');\n      img.src = window.URL.createObjectURL(blob);\n      document.body.appendChild(img)\n    }\n\n    oReq.send();\n  </script>\n```\n\n![screen shot 2015-03-24 at 3 25 46 pm](https://cloud.githubusercontent.com/assets/964386/6799248/2e0d9b72-d23a-11e4-9e6d-93344fb2a16b.png)\n"
  }
]