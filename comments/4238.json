[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175567919",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175567919",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175567919,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-01-27T11:19:47Z",
    "updated_at": "2016-01-27T11:19:47Z",
    "body": "By turning off node integration (which you should otherwise meteor is not supposed to work correctly), I can see following error:\n\n```\nWebSocket connection to 'ws://interface/sockjs/674/gjoxbu7w/websocket' failed: Error in connection establishment: net::ERR_NAME_NOT_RESOLVED\n```\n\nSo it seems that you also need to interpret `ws://`.\n\nAlso if you only want to redirect the URL, the `session.webRequest` API is a much better choice.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175591742",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175591742",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175591742,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T12:25:38Z",
    "updated_at": "2016-01-27T12:32:30Z",
    "body": "I turned of node-integration, and it didn't make a difference. The web socket error is not important for Meteors frontend to work (I also made it work, by adding ws support, but i kept it out of the repro, to keep it simple), its just tries to connect to a server, and as the example with the `production` flag shows, meteor apps work. (And as i wrote, i also tried other frameworks form the MVC example page)\n\nThis issue still seems to be valid to me.\n\nThanks for the hint with the session, but i only used a \"rewrite mode\" here to showcase the issue. We need actual a real custom protocol, which should work the same as the HTTP one.\n\nThe importance here is to have a real `location` change and a protocol, which is visible to the js applications, while serving HTTP files.\n\nDid you try the repro?\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175594291",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175594291",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175594291,
    "user": {
      "login": "zcbenz",
      "id": 639601,
      "avatar_url": "https://avatars3.githubusercontent.com/u/639601?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zcbenz",
      "html_url": "https://github.com/zcbenz",
      "followers_url": "https://api.github.com/users/zcbenz/followers",
      "following_url": "https://api.github.com/users/zcbenz/following{/other_user}",
      "gists_url": "https://api.github.com/users/zcbenz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zcbenz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zcbenz/subscriptions",
      "organizations_url": "https://api.github.com/users/zcbenz/orgs",
      "repos_url": "https://api.github.com/users/zcbenz/repos",
      "events_url": "https://api.github.com/users/zcbenz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zcbenz/received_events",
      "type": "User",
      "site_admin": true
    },
    "created_at": "2016-01-27T12:32:24Z",
    "updated_at": "2016-01-27T12:32:24Z",
    "body": "Yeah I tried the demo, but I'm not familiar with how meteor works. We can not debug into thousand lines of meteor's code for a particular problem.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175595693",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175595693",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175595693,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T12:35:12Z",
    "updated_at": "2016-01-27T12:35:12Z",
    "body": "Is there a debug flags for electron, which i can use to help you guys debug this issue?\n\nI don't think it has anything to do with the particular framework loaded, but rather with the amount of requests, or something similar. I assume a race condition somewhere when serving and executing the files over a custom protocol.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175598820",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175598820",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175598820,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T12:40:12Z",
    "updated_at": "2016-01-27T12:45:21Z",
    "body": "Especially, when i use `protocol.interceptHttpProtocol('http', ...)` to simply rewrite `http://interface -> http://localhost:3000`, it should work exactly the same, as on a normal website, as i only alter the domain.\n\nThough the issues are exactly the same as when using a custom protocol.\n\nThe meteor and other applications work fine, when requested directly.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175812000",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175812000",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175812000,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T19:30:19Z",
    "updated_at": "2016-01-27T19:30:19Z",
    "body": "Aside from the `ws` error, the number of requests with and without the interception are different. Not sure whats causing the requests to be halted, nothing weird shows up with `log-net-log`. \n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175830353",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175830353",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175830353,
    "user": {
      "login": "deepak1556",
      "id": 964386,
      "avatar_url": "https://avatars2.githubusercontent.com/u/964386?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/deepak1556",
      "html_url": "https://github.com/deepak1556",
      "followers_url": "https://api.github.com/users/deepak1556/followers",
      "following_url": "https://api.github.com/users/deepak1556/following{/other_user}",
      "gists_url": "https://api.github.com/users/deepak1556/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/deepak1556/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/deepak1556/subscriptions",
      "organizations_url": "https://api.github.com/users/deepak1556/orgs",
      "repos_url": "https://api.github.com/users/deepak1556/repos",
      "events_url": "https://api.github.com/users/deepak1556/events{/privacy}",
      "received_events_url": "https://api.github.com/users/deepak1556/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T20:10:34Z",
    "updated_at": "2016-01-27T20:10:34Z",
    "body": "The todomvc application listed in the original post works fine with interception.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/175891715",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-175891715",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 175891715,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-27T22:24:18Z",
    "updated_at": "2016-01-27T22:45:39Z",
    "body": "@deepak1556 nice that you're here, hopefully you can help me get to the bottom of this issue :)\n\nI just simplified the whole [repro](https://github.com/frozeman/electron-curstom-protocol-realtive-urls-repro) a lot more, so basically the only difference is now that i switch out the protocol, i leave everything as is:\n\n``` js\n  protocol.registerHttpProtocol('mist', function(request, callback) {\n      request.url = request.url.replace('mist:','http:');\n\n      console.log(request.url);\n      callback(request);\n\n  }, function (error) {\n    if (error)\n      console.error('Failed to register protocol', error)\n  });\n```\n\nSimply switching from `http://` to `mist://`, will make the app not work. So the only difference here is that i either use a custom protocol or not.\n\n``` js\nmainWindow.loadURL('mist://localhost:3000/?2324'); // change to http://localhost:3000/ as reference\n```\n\nAlso adding:\n\n``` js\nprotocol.registerStandardSchemes(['mist']);\n```\n\nDoesn't make it a standard protocol with a proper `location.origin`. (Which you @deepak1556 added, right?)\n\nI tried rewriting the websocket URL `ws://` and i could do this successfully [see here](https://github.com/frozeman/electron-curstom-protocol-realtive-urls-repro/blob/master/backup.js#L2-L10) (though `//:myurls` won't get the domain appended, see https://github.com/atom/electron/issues/1747). It didn't make any difference and still didn't work.\nI also know from tests with meteor apps as static files, that the web socket connection doesn't matter at all (I'm the creator of [meteor-build-client](https://github.com/frozeman/meteor-build-client)).\n\nRunning the meteor app with `--production`, where it concatenates all files, suddenly works (Its exactly the same code, just minified, merged and without the js.map files)! Though there are more complex meteor apps, which even then don't run... its surely a strange issue!\n\nBesides this web socket connection failure, there is also no other error i could follow..\n\nCan i try anything to debug this further? I really need custom protocols to work like standard HTTP.\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/176887551",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-176887551",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 176887551,
    "user": {
      "login": "arolson101",
      "id": 5304092,
      "avatar_url": "https://avatars3.githubusercontent.com/u/5304092?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arolson101",
      "html_url": "https://github.com/arolson101",
      "followers_url": "https://api.github.com/users/arolson101/followers",
      "following_url": "https://api.github.com/users/arolson101/following{/other_user}",
      "gists_url": "https://api.github.com/users/arolson101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arolson101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arolson101/subscriptions",
      "organizations_url": "https://api.github.com/users/arolson101/orgs",
      "repos_url": "https://api.github.com/users/arolson101/repos",
      "events_url": "https://api.github.com/users/arolson101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arolson101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-29T17:57:47Z",
    "updated_at": "2016-01-29T17:59:29Z",
    "body": "I'm seeing this also.  In my protocol handler I print the request passed in and I get:\n\n```\n{ method: 'GET', referrer: '', url: 'app://' }\n{ method: 'GET', referrer: '', url: 'app://' }\n```\n\nbut if I change the scripts from `<script src=\"vendor.js\"></script>` to `<script src=\"app://vendor.js\"></script>` then I see the correct script response but the wrong .map request:\n\n```\n{ method: 'GET', referrer: '', url: 'app://vendor.js' }\n{ method: 'GET',\n  referrer: '',\n  url: 'app://vendor.js/vendor.js.map' }\n```\n\nAlso, even though the script executes it doesn't seem to report errors or console logs\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/176897193",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-176897193",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 176897193,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-01-29T18:25:47Z",
    "updated_at": "2016-01-29T18:25:47Z",
    "body": "I figured by adding a `/` on the end of loaded url, it works, but this still doesn't solve the issue i posted here..\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/181368900",
    "html_url": "https://github.com/electron/electron/issues/4238#issuecomment-181368900",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/4238",
    "id": 181368900,
    "user": {
      "login": "frozeman",
      "id": 232662,
      "avatar_url": "https://avatars2.githubusercontent.com/u/232662?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frozeman",
      "html_url": "https://github.com/frozeman",
      "followers_url": "https://api.github.com/users/frozeman/followers",
      "following_url": "https://api.github.com/users/frozeman/following{/other_user}",
      "gists_url": "https://api.github.com/users/frozeman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frozeman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frozeman/subscriptions",
      "organizations_url": "https://api.github.com/users/frozeman/orgs",
      "repos_url": "https://api.github.com/users/frozeman/repos",
      "events_url": "https://api.github.com/users/frozeman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frozeman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-08T13:32:40Z",
    "updated_at": "2016-02-08T13:32:40Z",
    "body": "@zcbenz can you please re-open that issue, as it certainly is one and unsolved, so we can keep track of it?\n\nI will get back to this very soon and hope to get more insight.\n"
  }
]