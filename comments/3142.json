[
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/149397042",
    "html_url": "https://github.com/electron/electron/issues/3142#issuecomment-149397042",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3142",
    "id": 149397042,
    "user": {
      "login": "hokein",
      "id": 2557445,
      "avatar_url": "https://avatars2.githubusercontent.com/u/2557445?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hokein",
      "html_url": "https://github.com/hokein",
      "followers_url": "https://api.github.com/users/hokein/followers",
      "following_url": "https://api.github.com/users/hokein/following{/other_user}",
      "gists_url": "https://api.github.com/users/hokein/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hokein/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hokein/subscriptions",
      "organizations_url": "https://api.github.com/users/hokein/orgs",
      "repos_url": "https://api.github.com/users/hokein/repos",
      "events_url": "https://api.github.com/users/hokein/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hokein/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-20T01:40:56Z",
    "updated_at": "2015-10-20T01:40:56Z",
    "body": "The `did-finish-load` event will not be emitted when the `webContents` loads a `pdf` url. I test it in v0.32.2 and v0.34.0. You may try:\n\n```\nspWindow.webContents.session.on('will-download', function(event, item, webContents) {\n  if(item.getMimeType() == 'application/pdf') {\n    console.log(\"Is Loading? : \"+webContents.isLoading());\n    event.preventDefault();\n    console.log(\"Waiting For Response? : \"+webContents.isWaitingForResponse());\n    console.log(item.getUrl());\n    webContents.stop();\n    item.on('done', function(e, state) {\n      console.log(state); // should be cancelled\n      var jsToRun = \"$('iframe').attr('src', 'url_from_server');\";\n      console.log(\"Injecting : \"+jsToRun);\n      spWindow.webContents.executeJavaScript(jsToRun);\n      console.log(\"Waiting For Response? : \"+webContents.isWaitingForResponse());\n    });\n  }\n});\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/149398285",
    "html_url": "https://github.com/electron/electron/issues/3142#issuecomment-149398285",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3142",
    "id": 149398285,
    "user": {
      "login": "adilanchian",
      "id": 13204620,
      "avatar_url": "https://avatars3.githubusercontent.com/u/13204620?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adilanchian",
      "html_url": "https://github.com/adilanchian",
      "followers_url": "https://api.github.com/users/adilanchian/followers",
      "following_url": "https://api.github.com/users/adilanchian/following{/other_user}",
      "gists_url": "https://api.github.com/users/adilanchian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adilanchian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adilanchian/subscriptions",
      "organizations_url": "https://api.github.com/users/adilanchian/orgs",
      "repos_url": "https://api.github.com/users/adilanchian/repos",
      "events_url": "https://api.github.com/users/adilanchian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adilanchian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-20T01:51:31Z",
    "updated_at": "2015-10-20T01:51:31Z",
    "body": "Hey hokein,\n\nThank you for the reply! So basically you added an event on item to see if it is done? I guess that will give me a heads up if the webContents.stop() works. Thanks again for your time and I will be testing this out with updates to come.\n\n-Alec \n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/149401207",
    "html_url": "https://github.com/electron/electron/issues/3142#issuecomment-149401207",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3142",
    "id": 149401207,
    "user": {
      "login": "adilanchian",
      "id": 13204620,
      "avatar_url": "https://avatars3.githubusercontent.com/u/13204620?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adilanchian",
      "html_url": "https://github.com/adilanchian",
      "followers_url": "https://api.github.com/users/adilanchian/followers",
      "following_url": "https://api.github.com/users/adilanchian/following{/other_user}",
      "gists_url": "https://api.github.com/users/adilanchian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adilanchian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adilanchian/subscriptions",
      "organizations_url": "https://api.github.com/users/adilanchian/orgs",
      "repos_url": "https://api.github.com/users/adilanchian/repos",
      "events_url": "https://api.github.com/users/adilanchian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adilanchian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-20T02:02:21Z",
    "updated_at": "2015-10-20T02:02:21Z",
    "body": "Just implemented this code now. So the webContents.stop() does show the 'cancelled' state which is good but it still holds true for Waiting For Response after trying to run the JS inside the frame. I have been thinking that this implementation is probably not the most efficient but, it would be great to know what I'm doing wrong here. Thanks !\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/149408440",
    "html_url": "https://github.com/electron/electron/issues/3142#issuecomment-149408440",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3142",
    "id": 149408440,
    "user": {
      "login": "hokein",
      "id": 2557445,
      "avatar_url": "https://avatars2.githubusercontent.com/u/2557445?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hokein",
      "html_url": "https://github.com/hokein",
      "followers_url": "https://api.github.com/users/hokein/followers",
      "following_url": "https://api.github.com/users/hokein/following{/other_user}",
      "gists_url": "https://api.github.com/users/hokein/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hokein/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hokein/subscriptions",
      "organizations_url": "https://api.github.com/users/hokein/orgs",
      "repos_url": "https://api.github.com/users/hokein/repos",
      "events_url": "https://api.github.com/users/hokein/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hokein/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-20T02:32:46Z",
    "updated_at": "2015-10-20T02:32:46Z",
    "body": "@adilanchian Oh, I see your purpose. You should use `did-stop-loading` event:\n\n```\nspWindow.webContents.session.on('will-download', function(event, item, webContents) {\n  if(item.getMimeType() == 'application/pdf') {\n    console.log(\"Is Loading? : \"+webContents.isLoading());\n    event.preventDefault();\n    console.log(\"Waiting For Response? : \"+webContents.isWaitingForResponse());\n    console.log(item.getUrl());\n    webContents.stop();\n    webContents.on('did-stop-loading', function() {\n      console.log(webContents.isWaitingForResponse()); // should be false\n      var jsToRun = \"$('iframe').attr('src', 'url_from_server');\";\n      console.log(\"Injecting : \"+jsToRun);\n      spWindow.webContents.executeJavaScript(jsToRun);\n      console.log(\"Waiting For Response? : \"+webContents.isWaitingForResponse());\n    });\n  }\n});\n```\n"
  },
  {
    "url": "https://api.github.com/repos/electron/electron/issues/comments/152406036",
    "html_url": "https://github.com/electron/electron/issues/3142#issuecomment-152406036",
    "issue_url": "https://api.github.com/repos/electron/electron/issues/3142",
    "id": 152406036,
    "user": {
      "login": "adilanchian",
      "id": 13204620,
      "avatar_url": "https://avatars3.githubusercontent.com/u/13204620?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adilanchian",
      "html_url": "https://github.com/adilanchian",
      "followers_url": "https://api.github.com/users/adilanchian/followers",
      "following_url": "https://api.github.com/users/adilanchian/following{/other_user}",
      "gists_url": "https://api.github.com/users/adilanchian/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adilanchian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adilanchian/subscriptions",
      "organizations_url": "https://api.github.com/users/adilanchian/orgs",
      "repos_url": "https://api.github.com/users/adilanchian/repos",
      "events_url": "https://api.github.com/users/adilanchian/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adilanchian/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-10-30T03:40:04Z",
    "updated_at": "2015-10-30T03:40:04Z",
    "body": "@hokein @zcbenz\n\nMy issue was solved through @hokein example. Sorry about not updating sooner. Thank you for all your help!\n"
  }
]